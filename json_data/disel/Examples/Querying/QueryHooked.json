{
    "filename": "Examples/Querying/QueryHooked.v",
    "coq_project": "disel",
    "vernac_cmds": [
        [
            "From mathcomp.ssreflect Require Import ssreflect ssrbool ssrnat eqtype ssrfun seq path.",
            "VernacRequire",
            "afe6982416ca92b56c3a0275b3d2ca126578d807"
        ],
        [
            "Require Import Eqdep.",
            "VernacRequire",
            "a499933d0898d4c0e235af789d9252f633426d20"
        ],
        [
            "From fcsl Require Import axioms pred prelude ordtype finmap pcm unionmap heap.",
            "VernacRequire",
            "576c96e5dbde92d8f1878b78d95e36aa980a0403"
        ],
        [
            "From DiSeL Require Import Freshness State EqTypeX Protocols Worlds NetworkSem Rely Actions.",
            "VernacRequire",
            "433f376538950843be2a31220c18ec311daf7ccc"
        ],
        [
            "From DiSeL Require Import SeqLib QueryProtocol NewStatePredicates Actions.",
            "VernacRequire",
            "6e8dbda6bc4d4242cbb4a29a9be66ae263b7a656"
        ],
        [
            "From DiSeL Require Import Injection Process Always HoareTriples InferenceRules While.",
            "VernacRequire",
            "dd89d0b36dd000ac25dd8bce3e51edf84baf2254"
        ],
        [
            "Section QueryHooked.",
            "VernacBeginSection",
            "ea8fe4b948aa931e7489a384108d918bdd75a13e"
        ],
        [
            "Variables (lq : Label) (pc : protocol).",
            "VernacAssumption",
            "8689484656271c91906fc208511e6c95872771ab"
        ],
        [
            "Variable Data : Type.",
            "VernacAssumption",
            "a96639eb9fe59fbca2f8146fe1b4b8fd346e23c1"
        ],
        [
            "Variable qnodes : seq nat.",
            "VernacAssumption",
            "ef417d993a9ba0d672c20c4c8407b0735a946e01"
        ],
        [
            "Variable serialize : Data -> seq nat.",
            "VernacAssumption",
            "2d16b69c62a2b1aa737a0c15a109c638cc02b412"
        ],
        [
            "Variable deserialize : seq nat -> Data.",
            "VernacAssumption",
            "667707bad76b6b32111503fe360becb0aabdc01d"
        ],
        [
            "Hypothesis ds_inverse : left_inverse serialize deserialize.",
            "VernacAssumption",
            "8905d28a3fcdb2204a2f217d9b025b57437e6d53"
        ],
        [
            "Definition pq := QueryProtocol qnodes serialize lq.",
            "VernacDefinition",
            "054433af9f00861d6dbe367b279156cca0c23c89"
        ],
        [
            "Variable core_state_to_data : nid -> heap -> Data -> Prop.",
            "VernacAssumption",
            "97027d1b9072a4f3b0fa433a5f117fbacf24301b"
        ],
        [
            "Hypothesis core_state_to_data_inj : forall n h d d', core_state_to_data n h d -> core_state_to_data n h d' -> d = d'.",
            "VernacAssumption",
            "fd54b320c896db82d8dbe62b4af54af7ef3816e8"
        ],
        [
            "Definition query_hook : hook_type := fun hc hq ms to => forall n rid d, ms = rid :: serialize d -> core_state_to_data n hc d.",
            "VernacDefinition",
            "16526d4b2ddc1090754ccca91963f6c95a080870"
        ],
        [
            "Definition query_hookz := (1, (plab pc), (plab pq, tresp)) \\\\-> query_hook.",
            "VernacDefinition",
            "62cd6d625a3e55e72476b3efb8ea3e5bd03d7652"
        ],
        [
            "Definition W : world := ((plab pc \\\\-> pc) \\+ (plab pq \\\\-> pq), query_hookz).",
            "VernacDefinition",
            "0527ea5970f6e24c3933cb5d208de9a52c2d9a93"
        ],
        [
            "Hypothesis Lab_neq: lq != (plab pc).",
            "VernacAssumption",
            "4aa5acf1c78b1e2e0b9a73349399c1896019bc99"
        ],
        [
            "Lemma W_valid : valid W.",
            "VernacStartTheoremProof",
            "b163171905be62ea6f2be7656f78702e8186f9e2"
        ],
        [
            "apply/andP; split=>/=; last by rewrite validPt.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case: validUn=>//; rewrite ?validPt// =>l.",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "rewrite !domPt !inE=>/eqP=>Z; subst l=>/eqP=>Z.",
            "VernacExtend",
            "fbaa61af20867a5dfb8bb5213ca8048b258f8f3a"
        ],
        [
            "by subst lq; move/negbTE: Lab_neq; rewrite eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma W_complete : hook_complete W.",
            "VernacStartTheoremProof",
            "92991f31a8878fe2d54f5368d0e4d08d6a5fd297"
        ],
        [
            "move=>z lc ls t/=; rewrite domPt inE=>/eqP[]_<-<-_.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "rewrite !domUn !inE/= !domPt !inE !eqxx/= orbC.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case/andP:W_valid=>->_.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "rewrite 3!andTb.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite inE.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by apply/orP; left.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma W_dom : dom W.1 =i [:: plab pc; lq].",
            "VernacStartTheoremProof",
            "ea308c536c5fd0d18406b5b1f3656e123a96af0a"
        ],
        [
            "move=>z/=; rewrite domUn !inE/=; case/andP: W_valid=>->/=_.",
            "VernacExtend",
            "d7214ac8fd48f4d1cd143edd9d16f6d28386a302"
        ],
        [
            "rewrite !domPt !inE; rewrite -!(eq_sym z).",
            "VernacExtend",
            "2194fcb4d6d52cbae24a29f7ff14a3997f1912fd"
        ],
        [
            "rewrite /cond /= inE orbC.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "apply sym_eq.",
            "VernacExtend",
            "f01eb728d9ceeac2915c66b52a7b50a0c452e949"
        ],
        [
            "by rewrite orbC eq_sym.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma eqW : W = (plab pc \\\\-> pc, Unit) \\+ (plab pq \\\\-> pq, Unit) \\+ (Unit, query_hookz).",
            "VernacStartTheoremProof",
            "2d338513ba50d2a2aa4bbf4437b22c54f241388e"
        ],
        [
            "by rewrite /PCM.join/=/W !unitL !unitR.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma eqW' : W = (plab pc \\\\-> pc, Unit) \\+ ((plab pq \\\\-> pq, Unit) \\+ (Unit, query_hookz)).",
            "VernacStartTheoremProof",
            "0a6510a76f76bd379289facbabb30c6afdde208d"
        ],
        [
            "by rewrite eqW joinA.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma injW : injects (plab pc \\\\-> pc, Unit) W query_hookz.",
            "VernacStartTheoremProof",
            "211e4b36f10e9fec4b1b5f575358917cb5ab314d"
        ],
        [
            "rewrite eqW; apply:injectL=>//; try by move=>????/=; rewrite dom0 inE.",
            "VernacExtend",
            "ec21fbce8d9153a3b3fe2ac336bd5be68fa3540f"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite -eqW W_valid.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "move=>z lc ls t; rewrite domPt inE.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "by rewrite /cond /= dom0.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "move=>z lc ls t; rewrite domPt inE.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "by rewrite /cond /= dom0.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "move=>z lc ls t; rewrite domPt inE.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "case/eqP=>Z1 Z2 Z3 Z4; subst ls z lc t.",
            "VernacExtend",
            "1bc6fe3aac28afae057bf4ddce797aed8a3fe354"
        ],
        [
            "rewrite !domUn !inE !domPt !inE !eqxx/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case/andP:W_valid=>/=->_/=; rewrite orbC inE.",
            "VernacExtend",
            "90a2acb29b7a5304b0ab6ba5269c420638ddef63"
        ],
        [
            "by apply/orP; left.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move=>l; rewrite domPt inE=>/eqP=><-.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "move=>z lc ls t; rewrite domPt inE=>/eqP[]_ _<-_.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "apply/negbT; apply/eqP=>Z; subst lq; move/negbTE: Lab_neq.",
            "VernacExtend",
            "7799fe0f4690916bb297c21f628e1466ee9366bc"
        ],
        [
            "by rewrite eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma labC : plab pc \\in dom W.1.",
            "VernacStartTheoremProof",
            "5ee16d9f0c308a17c29d207d9d47b929dfc911cc"
        ],
        [
            "case/andP: W_valid=>V1 V2.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "by rewrite domUn !inE V1/= domPt inE eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma labQ : lq \\in dom W.1.",
            "VernacStartTheoremProof",
            "3f17eee1c380b6c11713a3d3b7c76d4f7b537bc6"
        ],
        [
            "case/andP: W_valid=>V1 V2.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "rewrite domUn !inE V1/= !domPt !inE /cond /= inE.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by apply/orP; right.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma injWQ : inj_ext injW = (lq \\\\-> pq, Unit).",
            "VernacStartTheoremProof",
            "5abd5b95eda0f7ea45af6c91f5974b82d93adb9b"
        ],
        [
            "move: (W_valid)=>V; move: (cohK injW).",
            "VernacExtend",
            "8b784377bdc4d565ff66d4cf36a6041e9354c156"
        ],
        [
            "rewrite {1}eqW/mkWorld/= -!joinA /PCM.join/= in V.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case/andP: V=>/=V V'.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "rewrite {1}eqW/mkWorld/= -!joinA /PCM.join/=; case=>H K.",
            "VernacExtend",
            "712d339e99ee17eb7d5033e19ac614eb3ca6b532"
        ],
        [
            "case: (cancel V H)=>_; rewrite !unitR=>_{H}H1.",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "rewrite [inj_ext _]surjective_pairing -H1{H1}; congr (_, _).",
            "VernacExtend",
            "a0279e71fd23ac6bde2b8b4402981a70ea719044"
        ],
        [
            "rewrite !unitL joinC/=/query_hookz/= in V' K.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite -[_ \\\\-> _]unitR in V'.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "have Z: (1, plab pc, (lq, tresp)) \\\\-> query_hook \\+ Unit = (1, plab pc, (lq, tresp)) \\\\-> query_hook \\+ (inj_ext injW).2 by rewrite unitR.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "by case: (cancel V' Z).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma prEqC : getProtocol W (plab pc) = pc.",
            "VernacStartTheoremProof",
            "fd4949d68c1e7059a63be8b343b3e70c6522730c"
        ],
        [
            "rewrite /getProtocol/W/= findUnL; last by case/andP: W_valid.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by rewrite domPt inE eqxx findPt.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma prEqQ : getProtocol W lq = pq.",
            "VernacStartTheoremProof",
            "c2a482f56235eccc0629879aeb1723e76d1feac7"
        ],
        [
            "rewrite /getProtocol/W/= findUnR; last by case/andP: W_valid.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by rewrite domPt inE eqxx findPt.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma prEqQ' : getProtocol (lq \\\\-> pq, Unit) lq = pq.",
            "VernacStartTheoremProof",
            "4abddb4e37510ff0d40929881b9a875ae42f1974"
        ],
        [
            "by rewrite /getProtocol findPt.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Variable this : nid.",
            "VernacAssumption",
            "242c7869c0bef3fe166243583278f6bbaa63bbf4"
        ],
        [
            "Hypothesis this_in_qnodes: this \\in qnodes.",
            "VernacAssumption",
            "ee06a76a21647f3723733a8854f331b324b2f0f9"
        ],
        [
            "Notation getSc s := (getStatelet s (plab pc)).",
            "VernacSyntacticDefinition",
            "e1db361487d542ee536e89beb6b3ba386889f905"
        ],
        [
            "Notation getLc s := (getLocal this (getSc s)).",
            "VernacSyntacticDefinition",
            "7d7ff957f3a26ad3353041645c96e04791963905"
        ],
        [
            "Notation getLc' s n := (getLocal n (getSc s)).",
            "VernacSyntacticDefinition",
            "569d162cd3b3d434e81dd7062fcd06578ca1b6aa"
        ],
        [
            "Notation getSq s := (getStatelet s (plab pq)).",
            "VernacSyntacticDefinition",
            "35843d4e33613e9160da66292ca394624f1716b0"
        ],
        [
            "Notation getLq s := (getLocal this (getSq s)).",
            "VernacSyntacticDefinition",
            "95e6fc75087c4158322863be655f79927a1fffba"
        ],
        [
            "Definition holds_res_perms d n (pp : nat -> Prop) := exists (reqs resp : seq (nid * nat)), getLocal n d = qst :-> (reqs, resp) /\\ forall rn, (this, rn) \\in resp -> pp rn.",
            "VernacDefinition",
            "b687aecebdac7a2715c58744c13e2a280ec7ea48"
        ],
        [
            "Definition request_msg (t: nat) (_ : seq nat) := t == treq.",
            "VernacDefinition",
            "52ba3c8c3e90faaa538cf8529c554ca812c5c21e"
        ],
        [
            "Definition response_msg (t: nat) (_ : seq nat) := t == tresp.",
            "VernacDefinition",
            "c89258f10d32921d6f9d6388c64492c8e2db6106"
        ],
        [
            "Definition query_init_state (to : nid) s := [/\\ to \\in qnodes, holds_res_perms (getSq s) to (fun _ : nat => false), no_msg_from_to' this to request_msg (dsoup (getSq s)) & no_msg_from_to' to this response_msg (dsoup (getSq s))].",
            "VernacDefinition",
            "60aaf171993a44859e0ad719468fc04705360cdb"
        ],
        [
            "Lemma query_init_step' z to s s' : this != z -> query_init_state to s -> network_step (lq \\\\-> pq, Unit) z s s' -> query_init_state to s'.",
            "VernacStartTheoremProof",
            "ef6e911b7cfe25efb303bcc06e284c32ef9a3a6c"
        ],
        [
            "move=> N H S; case: (step_coh S)=>C1 _.",
            "VernacExtend",
            "a01b3d93f426ff68d360351709a5fa5af822af32"
        ],
        [
            "case: S; [by case=>_<- | move=>l st H1 to'/= msg n H2 H3 C H4 H5 H6->{s'}| move=>l rt H1 i from pf H3 C msg H2/=[H4]_->{s'}]; rewrite -(cohD C) domPt inE in H3; move/eqP: H3=>H3; subst l; rewrite /query_init_state/getStatelet !findU !eqxx (cohS C1)/=; have Cq: coh pq (getStatelet s lq) by move: (coh_coh lq C1); rewrite /getProtocol findPt.",
            "VernacExtend",
            "74d04ef320945deb44ec43f6c0ef0d04a3f2198c"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case:H=>G1 G2 G3 G4.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "move: st H1 H4 H5 H6; rewrite /get_st prEqQ'=>st H1 H4 H5 H6.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "case B: (to == z); rewrite /holds_res_perms/getLocal findU B/=; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "split=>//.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "move=>m t c; rewrite findUnR ?valid_fresh ?(cohVs Cq)//; case: ifP; last by move=>_/G3.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-{m}; rewrite findPt; case=>_ _ Z; subst z.",
            "VernacExtend",
            "c7e30415936c50a58f873c300084e7ac57da094b"
        ],
        [
            "by move/negbTE: N; rewrite eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "move=>m t c; rewrite findUnR ?valid_fresh ?(cohVs Cq)//; case: ifP; last by move=>_/G4.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-{m}; rewrite findPt; case=>_ _ Z; subst z.",
            "VernacExtend",
            "c7e30415936c50a58f873c300084e7ac57da094b"
        ],
        [
            "by rewrite eqxx in B.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move/eqP: B=>B; subst z; split=>//; first 1 last.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "move=>m t c; rewrite findUnR ?valid_fresh ?(cohVs Cq)//; case: ifP; last by move=>_/G3.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-{m}; rewrite findPt; case=>_ _ Z; subst to.",
            "VernacExtend",
            "049978e2ec10cb29b0da4ad596f40091965407f7"
        ],
        [
            "by move/negbTE: N; rewrite eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "move=>m t c; rewrite findUnR ?valid_fresh ?(cohVs Cq)//; case: ifP; last by move=>_/G4.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-{m}; rewrite findPt; case=>Z' Z2 Z; subst to' t c.",
            "VernacExtend",
            "69a1effe787b2bd2a1d1c681aae237e2657be71e"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst st=>//.",
            "VernacExtend",
            "642073d4c047bd3445c6c1d7a292b3e7e8f7f08d"
        ],
        [
            "case: (H4)=>_[C']/=[rid][d][_]; case: G2=>rq[rs][E]H.",
            "VernacExtend",
            "5887f8022a4f6389ac249140364feb69c4f18799"
        ],
        [
            "by rewrite (getStK _ E)/==>/H.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite (cohVl Cq); case: G2=>rq[rs][E]H.",
            "VernacExtend",
            "712d339e99ee17eb7d5033e19ac614eb3ca6b532"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst st=>//; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "case: (H4)=>_[C']/=[rid][d][H']; subst msg.",
            "VernacExtend",
            "4f0d26c80f9a62c9ec206491065cf02c416be154"
        ],
        [
            "rewrite (getStK _ E)/==>G.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "rewrite /=/QueryProtocol.send_step/=!(getStK _ E)/= G/= in H6; case: H6=>Z.",
            "VernacExtend",
            "712d339e99ee17eb7d5033e19ac614eb3ca6b532"
        ],
        [
            "subst n; eexists rq, (seq.rem (to', rid) rs); split=>//.",
            "VernacExtend",
            "4ca32b2ca97b78ea1ada9befd442b31f6093fda7"
        ],
        [
            "by move=>rn; move/mem_rem; apply/H.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: (H4)=>_[C']/==>Z.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "rewrite/QueryProtocol.send_req_prec (getStK _ E) in Z; subst msg.",
            "VernacExtend",
            "6397720ba149b77a3ca0cf2344dcca32ecdd90ae"
        ],
        [
            "rewrite /=/QueryProtocol.send_step/=!(getStK _ E)/= in H6; case: H6=>Z; subst n.",
            "VernacExtend",
            "1fbcede6dda32f946b4210889d3facf6a5266151"
        ],
        [
            "by exists ((to', fresh_id rq) :: rq), rs.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case:H=>G1 G2 G3 G4.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "move: (coh_s _ _) rt pf H1 H2.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "rewrite /get_rt prEqQ'/==>Cq'; rewrite !(pf_irr Cq' Cq)=>{Cq'}.",
            "VernacExtend",
            "fbaa61af20867a5dfb8bb5213ca8048b258f8f3a"
        ],
        [
            "move=>rt pf H1 H2.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "case B: (to == z); rewrite /holds_res_perms/getLocal findU B/=; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by split=>//; apply: no_msg_from_to_consume'=>//; rewrite ?(cohVs Cq).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite !(cohVl Cq); move/eqP:B=>B; subst z.",
            "VernacExtend",
            "9d5d6e7628701b68a6190cb3d46e40167340d11c"
        ],
        [
            "split=>//; try by apply: no_msg_from_to_consume'=>//; rewrite ?(cohVs Cq).",
            "VernacExtend",
            "9e1ddabc19dbcde2cd0d438099a629085ca31577"
        ],
        [
            "case: G2=>rq[rs][E]H.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst rt=>//=; simpl in H2; rewrite /QueryProtocol.receive_step (getStK _ E)/=; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case: ifP=>_; last by eexists _, _.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by exists (seq.rem (from, head 0 msg) rq), rs.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: ifP=>_; last by eexists _, _.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "exists rq, ((from, head 0 msg) :: rs); split=>//.",
            "VernacExtend",
            "b105a5a6a6938b08779574ee0f0a7a32160133ed"
        ],
        [
            "move=>rn; rewrite inE; case/orP; last by apply: H.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case/eqP=>Z1 Z2; subst rn from.",
            "VernacExtend",
            "49b4ef42fdacf85861937d6d1c8b27cf5b4dfb27"
        ],
        [
            "case: msg H2 H4=>t c/=Z H4; subst t.",
            "VernacExtend",
            "cb7f7fc8c9bf54dd40642228df71eafbde36d5b5"
        ],
        [
            "by move: (G3 _ _ _ H4).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma query_init_rely' to s s' : query_init_state to s -> network_rely (lq \\\\-> pq, Unit) this s s' -> query_init_state to s'.",
            "VernacStartTheoremProof",
            "10e74cbc0b5cbea0cbc0dd13c97d660e87d2a9d6"
        ],
        [
            "move=>H1 [n]H2; elim: n s H2 H1=>/=[s | n Hi s]; first by case=>Z _; subst s'.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case=>z[s1][N]H1 H2 H3; apply: (Hi s1 H2).",
            "VernacExtend",
            "d62e4c271de3f2a9ff5062b8b89d3c57d965c518"
        ],
        [
            "by apply: (query_init_step' _ _ _ _ N H3 H1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma query_init_rely to s s2 : query_init_state to s -> network_rely W this s s2 -> query_init_state to s2.",
            "VernacStartTheoremProof",
            "ec6c7194f170a17ba88f03ec7a2382eb8075847e"
        ],
        [
            "move=>Q R; case:(rely_coh R)=>CD CD'.",
            "VernacExtend",
            "a01b3d93f426ff68d360351709a5fa5af822af32"
        ],
        [
            "rewrite eqW in CD; move: (coh_hooks CD)=>{CD}CD.",
            "VernacExtend",
            "7e529e80bb2879787ee6d9466056f19f0215c721"
        ],
        [
            "rewrite eqW in CD'; move: (coh_hooks CD')=>{CD'}CD'.",
            "VernacExtend",
            "7e529e80bb2879787ee6d9466056f19f0215c721"
        ],
        [
            "case: (coh_split CD _ _); try apply: hook_complete0.",
            "VernacExtend",
            "1a12e527114c2334e70d66d126a44d968b267be4"
        ],
        [
            "move=>i1[j1][C1 D1 Z]; subst s.",
            "VernacExtend",
            "eef520705260be04faa88b488a16456ba32efa20"
        ],
        [
            "case: (coh_split CD' _ _); try apply: hook_complete0.",
            "VernacExtend",
            "1a12e527114c2334e70d66d126a44d968b267be4"
        ],
        [
            "move=>i2[j2][C2 D2 Z]; subst s2.",
            "VernacExtend",
            "87cbbf7fb3f94f52b29d627f425bb70ea94ec73c"
        ],
        [
            "rewrite /query_init_state in Q *.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite (locProjR CD _ D1) in Q; last by rewrite domPt inE andbC eqxx.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite (locProjR CD' _ D2); last by rewrite domPt inE andbC eqxx.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case: (rely_split injW C1 C2 R)=>Rc Rq; rewrite injWQ in Rq.",
            "VernacExtend",
            "90a2acb29b7a5304b0ab6ba5269c420638ddef63"
        ],
        [
            "by apply: (query_init_rely' _ _ _ Q Rq).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition msg_just_sent d (reqs resp : seq (nid * nat)) req_num to := [/\\ getLocal this d = qst :-> (reqs, resp), no_msg_from_to' to this response_msg (dsoup d), (to, req_num) \\in reqs, msg_spec' this to treq ([:: req_num]) (dsoup d) & holds_res_perms d to (fun _ => false)].",
            "VernacDefinition",
            "470e9eef39153c90010ab16311ee8b5c02418fa0"
        ],
        [
            "Definition msg_received d (reqs resp : seq (nid * nat)) req_num to := [/\\ getLocal this d = qst :-> (reqs, resp), (to, req_num) \\in reqs, no_msg_from_to' this to request_msg (dsoup d), no_msg_from_to' to this response_msg (dsoup d) & holds_res_perms d to (fun rn => rn == req_num)].",
            "VernacDefinition",
            "9c2f84fb08b8650b57aa8b2ec05841738b91dcaf"
        ],
        [
            "Definition msg_responded d (reqs resp : seq (nid * nat)) req_num to data := [/\\ getLocal this d = qst :-> (reqs, resp), (to, req_num) \\in reqs, no_msg_from_to' this to request_msg (dsoup d), msg_spec' to this tresp (req_num :: serialize data) (dsoup d) & holds_res_perms d to (fun _ => false)].",
            "VernacDefinition",
            "2e6e490dbf9ddea0a4a39267cf7c74554d0d3201"
        ],
        [
            "Variable local_indicator : Data -> Pred heap.",
            "VernacAssumption",
            "82b6064d8fd137977c4b8009676db745c4d7e419"
        ],
        [
            "Hypothesis core_state_stable_step : forall z s data s' n, this != z -> network_step (plab pc \\\\-> pc, Unit) z s s' -> n \\in qnodes -> local_indicator data (getLc s) -> core_state_to_data n (getLc' s n) data -> core_state_to_data n (getLc' s' n) data.",
            "VernacAssumption",
            "ff21b07e4c008958c3973533fb5806220e87b9aa"
        ],
        [
            "Lemma prEqC' : (getProtocol (plab pc \\\\-> pc, Unit) (plab pc)) = pc.",
            "VernacStartTheoremProof",
            "2434e1dbf0f2543f30257207a5b04cea36093b7a"
        ],
        [
            "by rewrite /getProtocol findPt/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma core_state_stable_step_W s data s' z : this != z -> network_step W z s s' -> z \\in qnodes -> local_indicator data (getLc s) -> core_state_to_data z (getLc' s z) data -> core_state_to_data z (getLc' s' z) data.",
            "VernacStartTheoremProof",
            "7874313981221d44374303bb69b8513ee39263e3"
        ],
        [
            "move=>N H2 G L H1; move:(step_coh H2)=>[C1 C2].",
            "VernacExtend",
            "8b784377bdc4d565ff66d4cf36a6041e9354c156"
        ],
        [
            "rewrite eqW' in C1 C2.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "move: (projectSE C1)(projectSE C2)=>E1 E2.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "set s1 := projectS (plab pc \\\\-> pc, Unit) s in E1.",
            "VernacExtend",
            "69a61e99b234580f7b41fa5b9655c87ba9a76f70"
        ],
        [
            "set s2 := projectS ((plab pq \\\\-> pq, Unit) \\+ (Unit, query_hookz)) s in E1.",
            "VernacExtend",
            "69a61e99b234580f7b41fa5b9655c87ba9a76f70"
        ],
        [
            "set s1' := projectS (plab pc \\\\-> pc, Unit) s' in E2.",
            "VernacExtend",
            "69a61e99b234580f7b41fa5b9655c87ba9a76f70"
        ],
        [
            "set s2' := projectS ((plab pq \\\\-> pq, Unit) \\+ (Unit, query_hookz)) s' in E2.",
            "VernacExtend",
            "69a61e99b234580f7b41fa5b9655c87ba9a76f70"
        ],
        [
            "move: (C1) (C2) =>C1' C2'.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "rewrite E1 E2 in H2 C1' C2'.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "have [X X'] : (forall z, getLc' s z = getLc' s1 z) /\\ (forall z, getLc' s' z = getLc' s1' z).",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by split; move=>z'; rewrite /getStatelet find_umfilt domPt inE eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: (sem_split injW _ _ H2).",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "apply: (@projectS_cohL (plab pc \\\\-> pc, Unit) ((plab pq \\\\-> pq, Unit) \\+ (Unit, query_hookz)))=>//.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "by move=>????; rewrite dom0.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "suff H : hook_complete (plab pc \\\\-> pc, Unit).",
            "VernacExtend",
            "d07fc8b2103f140554938023774bf3f75d04ba99"
        ],
        [
            "apply: (@projectS_cohL _ ((plab pq \\\\-> pq, Unit)\\+(Unit, query_hookz)))=>//.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "by move=>????; rewrite dom0.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case=>H _; rewrite X'; rewrite !X in L H1.",
            "VernacExtend",
            "0f0588dc734a9ceb55e4ce3c6acf8890e667bba0"
        ],
        [
            "by apply: (core_state_stable_step _ _ _ _ _ N H _ L H1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by case=>_ E; rewrite X'; rewrite !X in L H1; rewrite -E.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma core_state_stable s data s' z : network_rely W this s s' -> z \\in qnodes -> local_indicator data (getLc s) -> core_state_to_data z (getLc' s z) data -> core_state_to_data z (getLc' s' z) data.",
            "VernacStartTheoremProof",
            "2b86c931e502d4750bb666ce92a5d7c5daf0994e"
        ],
        [
            "move=> R Z L.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "move: (L); rewrite -(@rely_loc' _ _ (plab pc) s s' R)=>L'.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "move: R Z L.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "case B: (this == z); [move/eqP: B=>B|move/negbT: B=>B].",
            "VernacExtend",
            "987be5383bb7da17c61db2d4d36c3ee9bbbadea8"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by subst z=>R; rewrite (@rely_loc' _ _ (plab pc) s s' R).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move=>[n]H2 H1; elim: n s H2=>/=[s | n Hi s]; first by case=>Z _; subst s'.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case=>y[s1][N]G1 G2 G3 G4; apply: (Hi s1 G2).",
            "VernacExtend",
            "d62e4c271de3f2a9ff5062b8b89d3c57d965c518"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite /getLocal -(step_is_local (plab pc) G1 N).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case B' : (z == y); [move/eqP: B'=>B' | move/negbT: B'=>B'].",
            "VernacExtend",
            "987be5383bb7da17c61db2d4d36c3ee9bbbadea8"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by subst y; apply: (core_state_stable_step_W _ _ _ _ B G1 _ G3).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by rewrite /getLocal -(step_is_local (plab pc) G1 B').",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma cohQ s : Coh W s -> (QueryProtocol.QCoh qnodes) (getSq s).",
            "VernacStartTheoremProof",
            "22d6ea17aa611ab072052a40b297c519e11efc88"
        ],
        [
            "by move/(coh_coh lq); rewrite prEqQ.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma send_lq_case1 req_num reqs resp to s (N : this != to) (Qn : to \\in qnodes) (M : msg_just_sent (getSq s) reqs resp req_num to) to' msg (n : heap) (C : Coh W s) (st : send_trans (Protocols.coh pq)) (H1 : st \\In snd_trans pq) (H2 : to \\in qnodes) (H4 : send_safe st to to' (getSq s) msg) : all_hooks_fire query_hookz (plab pq) (t_snd st) s to msg to' -> Some n = send_step H4 -> let: d := getStatelet (upd (plab pq) (DStatelet (upd to n (dstate (getSq s))) (dsoup (getSq s) \\+ fresh (dsoup (getSq s)) \\\\-> Msg (TMsg (t_snd st) msg) to to' true)) s) lq in msg_just_sent d reqs resp req_num to.",
            "VernacStartTheoremProof",
            "69abd402d385a5f8889e659c531e44a18f77c573"
        ],
        [
            "move=>H5 H6; case: M=>G1 G2 G3 G4[rq][rs][E]Np; split=>//.",
            "VernacExtend",
            "898083afbcb7f48eb38b81893aabf115193d46fd"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/==>z t c.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: ifP; [|by move=>_; apply: G2].",
            "VernacExtend",
            "f2087b5d39a71a87d324e6b4f082ed0e1d3a0fec"
        ],
        [
            "rewrite domPt inE=>/eqP<-; rewrite findPt; case=>???; subst t c to'.",
            "VernacExtend",
            "f21a69b595d8c25d1c7c10905d85a805f7d4f300"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6/=; subst n.",
            "VernacExtend",
            "05a56613d84b4936dbbb594c6f74edf657717031"
        ],
        [
            "by case:H4=>_[C'][rid][_][_]; rewrite (getStK _ E); move/Np.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case:G4; case=>i[[c']Q1 Q3] Q2; split; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "move=>j c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "case:ifP; last by move=>_; apply Q2.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-; rewrite findPt.",
            "VernacExtend",
            "82d53976234637e3f0907eb36cddf61d028c6306"
        ],
        [
            "by case=>???; subst to; rewrite eqxx in N.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "exists i; split=>[|j[c1]];rewrite findUnL ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "0c04afef4ad25b5eb708991655a14460c2fd8b87"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by exists c'; rewrite (find_some Q1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: ifP=>_; first by move=> T; apply: Q3; exists c1.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by case/findPt_inv=>_[]_ _?; subst to; rewrite eqxx in N.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6; subst n.",
            "VernacExtend",
            "05a56613d84b4936dbbb594c6f74edf657717031"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by exists ((to', fresh_id rq) :: rq), rs.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: ifP=>_; last by exists rq, rs.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by exists rq, (seq.rem (to', head 0 msg) rs); split=>//rn/mem_rem/Np.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma send_lq_case3 req_num data reqs resp to s (N : this != to) (Qn : to \\in qnodes) (H : core_state_to_data to (getLc' s to) data) (L : local_indicator data (getLc' s this)) (M : msg_responded (getSq s) reqs resp req_num to data) to' msg (n : heap) (C : Coh W s) (st : send_trans (Protocols.coh pq)) (H1 : st \\In snd_trans pq) (H2 : to \\in qnodes) (H4 : send_safe st to to' (getSq s) msg) : all_hooks_fire query_hookz (plab pq) (t_snd st) s to msg to' -> Some n = send_step H4 -> let: d := getStatelet (upd (plab pq) (DStatelet (upd to n (dstate (getSq s))) (dsoup (getSq s) \\+ fresh (dsoup (getSq s)) \\\\-> Msg (TMsg (t_snd st) msg) to to' true)) s) lq in msg_responded d reqs resp req_num to data.",
            "VernacStartTheoremProof",
            "d49adeb3f5bc71d628ae8bd237fd0c67db16c15d"
        ],
        [
            "move=>H5 H6.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "case: M=>G1 G2 G3 G4[rq][rs][E]Np; split=>//.",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/==>z t c.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: ifP; [|by move=>_; apply: G3].",
            "VernacExtend",
            "f2087b5d39a71a87d324e6b4f082ed0e1d3a0fec"
        ],
        [
            "rewrite domPt inE=>/eqP<-; rewrite findPt; case=>????; subst t c to to'.",
            "VernacExtend",
            "8da58b9cab3fe94a30288935585a8637e4df93fd"
        ],
        [
            "by rewrite eqxx in N.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case:G4; case=>i[[c']Q1 Q3] Q2; split; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "move=>j c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "case:ifP; last by move=>_; apply Q2.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-; rewrite findPt.",
            "VernacExtend",
            "82d53976234637e3f0907eb36cddf61d028c6306"
        ],
        [
            "case=>???; subst to' c.",
            "VernacExtend",
            "a4de1f86f9b189e2d0ddc22497ddb29271640472"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6/=; subst n.",
            "VernacExtend",
            "05a56613d84b4936dbbb594c6f74edf657717031"
        ],
        [
            "by case:H4=>_[C']; rewrite (getStK _ E); case=>rid[d][->]/=/Np.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "exists i; split=>[|j[c1]];rewrite findUnL ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "0c04afef4ad25b5eb708991655a14460c2fd8b87"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by exists c'; rewrite (find_some Q1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: ifP=>_; first by move=> T; apply: Q3; exists c1.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case/findPt_inv=>_[]???; subst to'.",
            "VernacExtend",
            "87d67d7da438d98d2f6ad9e0b35a845aeeca5867"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6/=; subst n.",
            "VernacExtend",
            "05a56613d84b4936dbbb594c6f74edf657717031"
        ],
        [
            "by case:H4=>_[C']; rewrite (getStK _ E); case=>rid[d][_]/=/Np.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6; subst n.",
            "VernacExtend",
            "05a56613d84b4936dbbb594c6f74edf657717031"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by exists ((to', fresh_id rq) :: rq), rs.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: ifP=>_; last by exists rq, rs.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by exists rq, (seq.rem (to', head 0 msg) rs); split=>//rn/mem_rem/Np.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma send_lq_all_cases req_num data reqs resp to s (N : this != to) (Qn : to \\in qnodes) (H : core_state_to_data to (getLc' s to) data) (L : local_indicator data (getLc' s this)) (M : [\\/ msg_just_sent (getSq s) reqs resp req_num to, msg_received (getSq s) reqs resp req_num to | msg_responded (getSq s) reqs resp req_num to data]) to' msg (n : heap) (C : Coh W s) (st : send_trans (Protocols.coh (getProtocol W (plab pq)))) (H1 : st \\In get_st W (plab pq)) (H2 : to \\in nodes (getProtocol W (plab pq)) (getSq s)) (H4 : send_safe st to to' (getSq s) msg) : all_hooks_fire query_hookz (plab pq) (t_snd st) s to msg to' -> Some n = send_step H4 -> let: d := getStatelet (upd (plab pq) (DStatelet (upd to n (dstate (getSq s))) (dsoup (getSq s) \\+ fresh (dsoup (getSq s)) \\\\-> Msg (TMsg (t_snd st) msg) to to' true)) s) lq in [\\/ msg_just_sent d reqs resp req_num to, msg_received d reqs resp req_num to | msg_responded d reqs resp req_num to data].",
            "VernacStartTheoremProof",
            "a5c67b28018cc0633afd414db192d3b1385e8662"
        ],
        [
            "move=>H5 H6.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "move: st H1 H4 H5 H6; rewrite /get_st prEqQ=>st H1 H4 H5 H6.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "case: M; last 1 first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "constructor 3.",
            "VernacExtend",
            "fc203c31040684912422f2b19644a4136ee46779"
        ],
        [
            "by apply: (send_lq_case3 req_num data _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ H4).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by constructor 1; apply: (send_lq_case1 req_num _ _ _ _ _ _ _ _ _ _ _ _ _ _ H4).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Ltac kill_g3 s C G3 to N := rewrite /getStatelet findU eqxx(cohS C)/==>z t c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//; case: ifP; [|by move=>_; apply: G3]; rewrite domPt inE=>/eqP<-; rewrite findPt; by case=>_ _ Z _; subst to; rewrite eqxx in N.",
            "VernacExtend",
            "b124b4901fd400b36f99cd533dee933b270d4746"
        ],
        [
            "Ltac kill_g4 s C G4 to' t B:= rewrite /getStatelet findU eqxx(cohS C)/==>z t c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//; case: ifP; [|by move=>_; apply: G4]; rewrite domPt inE=>/eqP<-; rewrite findPt; by case=>??; try move=>?; try subst t; try subst to'; try rewrite ?eqxx in B.",
            "VernacExtend",
            "6d0b1d08c8c2f91176a488ad8bc394b86e5bdb9a"
        ],
        [
            "case=>G1 G2 G3 G4 [rq][rs][E]Np.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "case B : (to' == this); [move/eqP:B=>B; subst to'|]; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "constructor 2.",
            "VernacExtend",
            "3bbfaccba5e1a5a8e417cf2575e634e4c10773fe"
        ],
        [
            "split=>//.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "kill_g3 s C G3 to N.",
            "VernacExtend",
            "ee38410839871aefa3ac48959af5b3f3fd14b284"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "kill_g4 s C G4 to' t B.",
            "VernacExtend",
            "f524714075a773482681ad2c70b1a8a33bb761b5"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6; subst n.",
            "VernacExtend",
            "05a56613d84b4936dbbb594c6f74edf657717031"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by exists ((to', fresh_id rq) :: rq), rs.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case:ifP=>_; last by exists rq, rs.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by exists rq, (seq.rem (to', head 0 msg) rs); split=>//rn/mem_rem/Np.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6; subst n.",
            "VernacExtend",
            "05a56613d84b4936dbbb594c6f74edf657717031"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "constructor 2; split=>//.",
            "VernacExtend",
            "6394869e14fb35adade86bfc9f06194251870c23"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "kill_g3 s C G3 to N.",
            "VernacExtend",
            "ee38410839871aefa3ac48959af5b3f3fd14b284"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "kill_g4 s C G4 to' t B.",
            "VernacExtend",
            "f524714075a773482681ad2c70b1a8a33bb761b5"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by exists ((this, fresh_id rq) :: rq), rs.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: (H4)=>_[C']/=[rid][d][Zm]Tr; subst msg.",
            "VernacExtend",
            "4f0d26c80f9a62c9ec206491065cf02c416be154"
        ],
        [
            "rewrite (getStK _ E)/= in Tr.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite Tr; constructor 3.",
            "VernacExtend",
            "248340a4c99ac1a4f07517cd50cc8ae9e8b72f11"
        ],
        [
            "move: (H5 1 (plab pc) query_hook); rewrite findPt -!(cohD C).",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "move/(_ (erefl _) labC labQ to rid d (erefl _))=>D.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "move: (core_state_to_data_inj _ _ _ _ D H)=>Z; subst d.",
            "VernacExtend",
            "441d5c5e679f0f9f2e8f72d6d289471f2d1f36d6"
        ],
        [
            "split=>//; first 3 last.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "exists (rq), (seq.rem (this, rid) rs).",
            "VernacExtend",
            "70768580cad71a6280b94840d28b181fb529792d"
        ],
        [
            "rewrite /getLocal findU eqxx/= (cohVl C'); split=>// rn R.",
            "VernacExtend",
            "80e7cce19c53eb5d5a21aafd83e552d37e23084a"
        ],
        [
            "move/Np/eqP: (mem_rem R)=>Zr; subst rn.",
            "VernacExtend",
            "79e222ffeca2cc194c5592cf0b362c1911aa5ac2"
        ],
        [
            "move/Np:Tr=>/eqP=>Zr; subst rid.",
            "VernacExtend",
            "e88edd08e2386691363a915f4994c56a8963b986"
        ],
        [
            "case: (C')=>_ _ _/(_ to); rewrite E (cohDom C')=>/(_ Qn).",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "case=>[[x1 x2]][]/(hcancelPtV _); rewrite validPt/==>/(_ is_true_true).",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "case=>Z1 Z2; subst x1 x2=>/andP[_]G.",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "by rewrite (rem_filter (this, req_num) G) mem_filter/= eqxx/= in R.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by rewrite /getStatelet findU eqxx(cohS C)/getLocal findU (negbTE N).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C)/==>z t c.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "rewrite findUnR ?(valid_fresh) ?(cohVs C')//.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: ifP=>[|_]; last by apply: G3.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by rewrite domPt inE=>/eqP<-{z}; rewrite findPt; case=><-.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "split=>[|i m]; rewrite /getStatelet findU eqxx/= (cohS C)/=; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "rewrite findUnR ?(valid_fresh) ?(cohVs C')//; case: ifP=>[|_]; last by move/G4.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-; rewrite findPt; case=><-.",
            "VernacExtend",
            "2289f2bfae5d151681d361796cca422ec04b24ad"
        ],
        [
            "by move/Np/eqP: Tr=>->; rewrite eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "exists (fresh (dsoup (getStatelet s lq))); split.",
            "VernacExtend",
            "472afea770f3833ecfcb3a6258558a0f83980d1b"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "exists (rid :: serialize data).",
            "VernacExtend",
            "6e9b485fa8b26716dda2b84ee69dc285ed73c666"
        ],
        [
            "by rewrite findUnR ?(valid_fresh)?(cohVs C')// domPt inE eqxx findPt.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move=>i[c]; rewrite findUnR ?(valid_fresh)?(cohVs C')//.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "case: ifP=>[|_]; last by move/G4.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by rewrite domPt inE=>/eqP<-; rewrite findPt.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma send_lc_all_cases req_num data reqs resp to s (N : this != to) (Qn : to \\in qnodes) (H : core_state_to_data to (getLc' s to) data) (L : local_indicator data (getLc' s this)) (M : [\\/ msg_just_sent (getSq s) reqs resp req_num to, msg_received (getSq s) reqs resp req_num to | msg_responded (getSq s) reqs resp req_num to data]) to' msg (n : heap) (C : Coh W s) (st : send_trans (Protocols.coh (getProtocol W (plab pc)))) (H1 : st \\In get_st W (plab pc)) (H2 : to \\in nodes (getProtocol W (plab pc)) (getSq s)) (H4 : send_safe st to to' (getSq s) msg) : all_hooks_fire query_hookz (plab pc) (t_snd st) s to msg to' -> Some n = send_step H4 -> let: d := getStatelet (upd (plab pc) (DStatelet (upd to n (dstate (getSq s))) (dsoup (getSq s) \\+ fresh (dsoup (getSq s)) \\\\-> Msg (TMsg (t_snd st) msg) to to' true)) s) lq in [\\/ msg_just_sent d reqs resp req_num to, msg_received d reqs resp req_num to | msg_responded d reqs resp req_num to data].",
            "VernacStartTheoremProof",
            "d536e03768257e4d592e9dd516955ca5b1e6c5e7"
        ],
        [
            "move=>H5 H6.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "move: st H1 H4 H5 H6; rewrite /get_st prEqC=>st H1 H4 H5 H6.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "by case: M; [constructor 1|constructor 2|constructor 3]; rewrite /getStatelet findU (negbTE Lab_neq)/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma recv_lq_case1 req_num reqs resp to s (N : this != to) (Qn : to \\in qnodes) (M : msg_just_sent (getSq s) reqs resp req_num to) i from msg (C : Coh W s) (C' : (coh pq) (getSq s)) (pf : to \\in nodes pq (getSq s)) (rt : receive_trans (Protocols.coh pq)) : rt \\In rcv_trans pq -> tag msg = t_rcv rt -> find i (dsoup (getSq s)) = Some (Msg msg from to true) -> let: d := getStatelet (upd (plab pq) (DStatelet (upd to (receive_step rt from msg C' pf) (dstate (getSq s))) (consume_msg (dsoup (getSq s)) i)) s) lq in msg_just_sent d reqs resp req_num to \\/ msg_received d reqs resp req_num to.",
            "VernacStartTheoremProof",
            "ec191e0a81572105323dcb99ebae74c305befd99"
        ],
        [
            "move=>H1 H2 H4; case: M=>G1 G2 G3 G4[rq][rs][Tr]Np.",
            "VernacExtend",
            "a01b3d93f426ff68d360351709a5fa5af822af32"
        ],
        [
            "case X: (this == from); [move/eqP:X=>X; subst from|constructor 1]; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "split=>//.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: msg H2 H4=>t c H2 H4.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "by apply: (msg_spec_consumeE (cohVs C') H4 G4); rewrite (negbT X).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst rt=>//=; simpl in H2, H4; rewrite/QueryProtocol.receive_step (getStK _ Tr)/=.",
            "VernacExtend",
            "ba2719dc501742aa76dcf49e3d0807e16ff27bb7"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "case:ifP=>_; last by exists rq, rs.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "exists rq, ((from, head 0 msg) :: rs); split=>//rn.",
            "VernacExtend",
            "b105a5a6a6938b08779574ee0f0a7a32160133ed"
        ],
        [
            "by rewrite inE; case/orP; [case/eqP=>Z; subst; rewrite eqxx in X|move/Np].",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case:ifP=>_; last by exists rq, rs.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by exists (seq.rem (from, head 0 msg) rq), rs.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: msg H2 H4=>t c H2 H4.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst rt=>//=; simpl in H2, H4; subst t; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "constructor 1; split=>//.",
            "VernacExtend",
            "23440c5e7dafce40c7f40870e75f858ddaff3cb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by apply: (msg_spec_consumeE (cohVs C') H4 G4)=>/=; rewrite -(orbC true)/= orbC.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite/QueryProtocol.receive_step (getStK _ Tr)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case:ifP=>_; last by exists rq, rs.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by exists (seq.rem (this, head 0 c) rq), rs.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "constructor 2; split=>//.",
            "VernacExtend",
            "6394869e14fb35adade86bfc9f06194251870c23"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by apply: (no_msg_spec_consume (cohVs C') H4 G4).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite/QueryProtocol.receive_step (getStK _ Tr)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case:ifP=>X; last by move/negbT/negbNE/Np: X.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "exists rq, ((this, head 0 c) :: rs); split=>//rn.",
            "VernacExtend",
            "543648280d5ff18dbe895ed96f150191913b9be3"
        ],
        [
            "rewrite inE=>/orP[]; last by move/Np.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by case/eqP=>Z; subst rn; case:G4=>_/(_ _ _ H4)/eqP->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma recv_lq_case2 req_num reqs resp to s (N : this != to) (Qn : to \\in qnodes) (M : msg_received (getSq s) reqs resp req_num to) i from msg (C : Coh W s) (C' : (coh pq) (getSq s)) (pf : to \\in nodes pq (getSq s)) (rt : receive_trans (Protocols.coh pq)) : rt \\In rcv_trans pq -> tag msg = t_rcv rt -> find i (dsoup (getSq s)) = Some (Msg msg from to true) -> let: d := getStatelet (upd (plab pq) (DStatelet (upd to (receive_step rt from msg C' pf) (dstate (getSq s))) (consume_msg (dsoup (getSq s)) i)) s) lq in msg_received d reqs resp req_num to.",
            "VernacStartTheoremProof",
            "dcb65e8b7a1488e3a50a288cc9c8105e4241e036"
        ],
        [
            "move=>H1 H2 H4; case: M=>G1 G2 G3 G4[rq][rs][Tr]Np.",
            "VernacExtend",
            "a01b3d93f426ff68d360351709a5fa5af822af32"
        ],
        [
            "split=>//.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst rt=>//=; simpl in H2, H4; rewrite/QueryProtocol.receive_step (getStK _ Tr)/=.",
            "VernacExtend",
            "ba2719dc501742aa76dcf49e3d0807e16ff27bb7"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case:ifP=>_; last by exists rq, rs.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "exists rq, ((from, head 0 msg) :: rs); split=>//rn.",
            "VernacExtend",
            "b105a5a6a6938b08779574ee0f0a7a32160133ed"
        ],
        [
            "case X: (this == from); last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by rewrite inE; case/orP; [case/eqP=>Z; subst; rewrite eqxx in X|move/Np].",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move/eqP:X=>X; subst from.",
            "VernacExtend",
            "c9c387f758755b19c707f3d892f9182e27d29c93"
        ],
        [
            "by case: msg H2 H4=>t c/= H2 H4; move: (G3 _ _ _ H4); subst t.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case:ifP=>_; last by exists rq, rs.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by exists (seq.rem (from, head 0 msg) rq), rs.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma recv_lq_case3 req_num reqs resp to s data (N : this != to) (Qn : to \\in qnodes) (M : msg_responded (getSq s) reqs resp req_num to data) (H : core_state_to_data to (getLc' s to) data) (L : local_indicator data (getLc' s this)) i from msg (C : Coh W s) (C' : (coh pq) (getSq s)) (pf : to \\in nodes pq (getSq s)) (rt : receive_trans (Protocols.coh pq)) : rt \\In rcv_trans pq -> tag msg = t_rcv rt -> find i (dsoup (getSq s)) = Some (Msg msg from to true) -> let: d := getStatelet (upd (plab pq) (DStatelet (upd to (receive_step rt from msg C' pf) (dstate (getSq s))) (consume_msg (dsoup (getSq s)) i)) s) lq in msg_responded d reqs resp req_num to data.",
            "VernacStartTheoremProof",
            "42d13309e669e2703da1b8373ba55e80eac80870"
        ],
        [
            "move=>H1 H2 H4; case: M=>G1 G2 G3 G4[rq][rs][Tr]Np.",
            "VernacExtend",
            "a01b3d93f426ff68d360351709a5fa5af822af32"
        ],
        [
            "split=>//.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: msg H2 H4=>t c H2 H4.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "by apply: (msg_spec_consumeE (cohVs C') H4 G4); rewrite N orbC.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: H1;[|case=>//]; move=>Z; subst rt=>//=; simpl in H2, H4; rewrite/QueryProtocol.receive_step (getStK _ Tr)/=.",
            "VernacExtend",
            "ba2719dc501742aa76dcf49e3d0807e16ff27bb7"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case:ifP=>_; last by exists rq, rs.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "exists rq, ((from, head 0 msg) :: rs); split=>//rn.",
            "VernacExtend",
            "b105a5a6a6938b08779574ee0f0a7a32160133ed"
        ],
        [
            "case X: (this == from); last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by rewrite inE; case/orP; [case/eqP=>Z; subst; rewrite eqxx in X|move/Np].",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move/eqP:X=>X; subst from.",
            "VernacExtend",
            "c9c387f758755b19c707f3d892f9182e27d29c93"
        ],
        [
            "by case: msg H2 H4=>t c/= H2 H4; move: (G3 _ _ _ H4); subst t.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case:ifP=>_; last by exists rq, rs.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by exists (seq.rem (from, head 0 msg) rq), rs.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition msg_story s req_num to data reqs resp := [/\\ to \\in qnodes, core_state_to_data to (getLc' s to) data, local_indicator data (getLc s) & let: d := getSq s in [\\/ msg_just_sent d reqs resp req_num to, msg_received d reqs resp req_num to | msg_responded d reqs resp req_num to data]].",
            "VernacDefinition",
            "011bb6005711f5dd26b7eccb2ec3c4791e6f0809"
        ],
        [
            "Lemma msg_story_step' req_num data reqs resp to s s' : this != to -> msg_story s req_num to data reqs resp -> network_step W to s s' -> msg_story s' req_num to data reqs resp.",
            "VernacStartTheoremProof",
            "af5e8de64b4559fc54db38ba48bc160d78f642f8"
        ],
        [
            "move=> N H S; case: H=> Qn H L M; split=>//.",
            "VernacExtend",
            "898083afbcb7f48eb38b81893aabf115193d46fd"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "apply: (core_state_stable s data s')=>//.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "by exists 1, to, s'; split=>//=; split=>//; case/step_coh: S.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "suff R : (network_rely W this s s') by rewrite -(rely_loc' _ R) in L.",
            "VernacExtend",
            "d07fc8b2103f140554938023774bf3f75d04ba99"
        ],
        [
            "by exists 1, to, s'; split=>//=; split=>//; case/step_coh: S.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: S; [by case=>_<- | move=>l st H1 to'/= msg n H2 H3 C H4 H5 H6->{s'}| move=>l rt H1 i from pf H3 C msg H2/=[H4]_->{s'}]; rewrite -(cohD C) domUn !inE !domPt !inE in H3; case/andP:H3=>_ H3; case/orP: H3=>/eqP H3; subst l.",
            "VernacExtend",
            "47b6788eef485ae0421841ff04b3143cac36a2ca"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "move: st H1 H4 H5 H6; rewrite /get_st prEqC=>st H1 H4 H5 H6.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "by case: M; [constructor 1|constructor 2|constructor 3]; rewrite /getStatelet findU (negbTE Lab_neq).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by apply: send_lq_all_cases.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "move: (coh_s _ _) rt pf H1 H2 H4; rewrite /get_rt prEqC=>C' rt pf H1 H2 H4.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "by case: M; [constructor 1|constructor 2|constructor 3]; rewrite /getStatelet findU (negbTE Lab_neq).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move: (coh_s _ _) rt pf H1 H2 H4; rewrite /get_rt prEqQ=>C' rt pf H1 H2 H4.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "case: M=>M;[|constructor 2|constructor 3]; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by apply: recv_lq_case3.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by apply: recv_lq_case2.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by case:(recv_lq_case1 req_num _ _ to s N Qn M i from msg C C' pf _ H1 H2 H4); [constructor 1|constructor 2].",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma msg_story_step req_num to data reqs resp z s s' : this != z -> msg_story s req_num to data reqs resp -> network_step W z s s' -> msg_story s' req_num to data reqs resp.",
            "VernacStartTheoremProof",
            "37030d536d592b8cb70d552e7087501a8fe30844"
        ],
        [
            "case A: (to == z); first by move/eqP: A=>A; subst to; apply: msg_story_step'.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "move=> N H S; case: H=> Qn H L M; split=>//.",
            "VernacExtend",
            "898083afbcb7f48eb38b81893aabf115193d46fd"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "apply: (core_state_stable s data s')=>//.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "by exists 1, z, s'; split=>//=; split=>//; case/step_coh: S.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "suff R : (network_rely W this s s') by rewrite -(rely_loc' _ R) in L.",
            "VernacExtend",
            "d07fc8b2103f140554938023774bf3f75d04ba99"
        ],
        [
            "by exists 1, z, s'; split=>//=; split=>//; case/step_coh: S.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: S; [by case=>_<- | move=>l st H1 to'/= msg n H2 H3 C H4 H5 H6->{s'}| move=>l rt H1 i from pf H3 C msg H2/=[H4]_->{s'}]; rewrite -(cohD C) domUn !inE !domPt !inE in H3; case/andP:H3=>_ H3; case/orP: H3=>/eqP H3; subst l; do? [by rewrite /getStatelet findU (negbTE Lab_neq)]; rewrite /getStatelet findU eqxx(cohS C)/=.",
            "VernacExtend",
            "212eaa3814dcb37fd4df944c7507789c62984a3c"
        ],
        [
            "case:M; case=>G1 G2 G3 G4 G5; [constructor 1|constructor 2|constructor 3].",
            "VernacExtend",
            "9e947369cb772529c5ec00dc524515a83a24404a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "split=>//=; first by rewrite /getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "move=>i t c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "case:ifP; last by move=>_; apply G2.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-; rewrite findPt.",
            "VernacExtend",
            "82d53976234637e3f0907eb36cddf61d028c6306"
        ],
        [
            "by case=>???; subst to; rewrite eqxx in A.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "case: G4; case=>i[[c']Q1 Q3] Q2; split; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "move=>j c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "case:ifP; last by move=>_; apply Q2.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-; rewrite findPt.",
            "VernacExtend",
            "82d53976234637e3f0907eb36cddf61d028c6306"
        ],
        [
            "by case=>????; subst z to' c; rewrite eqxx in N.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "exists i; split=>[|j[c1]];rewrite findUnL ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "0c04afef4ad25b5eb708991655a14460c2fd8b87"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by exists c'; rewrite (find_some Q1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: ifP=>_; first by move=> T; apply: Q3; exists c1.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by case/findPt_inv=>_[]????; subst to' z; rewrite eqxx in N.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by case:G5=>rq[rs][Tr]Np; exists rq, rs; rewrite /getLocal/=findU A/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "split=>//=; first by rewrite /getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "move=>i t c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "case:ifP; last by move=>_; apply G3.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-; rewrite findPt.",
            "VernacExtend",
            "82d53976234637e3f0907eb36cddf61d028c6306"
        ],
        [
            "by case=>????; subst z to'; rewrite eqxx in N.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "move=>i t c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "case:ifP; last by move=>_; apply G4.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-; rewrite findPt.",
            "VernacExtend",
            "82d53976234637e3f0907eb36cddf61d028c6306"
        ],
        [
            "by case=>????; subst z to'; rewrite eqxx in A.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by case:G5=>rq[rs][Tr]Np; exists rq, rs; rewrite /getLocal/=findU A/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "split=>//=; first by rewrite /getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "move=>i t c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "case:ifP; last by move=>_; apply G3.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-; rewrite findPt.",
            "VernacExtend",
            "82d53976234637e3f0907eb36cddf61d028c6306"
        ],
        [
            "by case=>????; subst to' z; rewrite eqxx in N.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "case: G4; case=>i[[c']Q1 Q3] Q2; split; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "move=>j c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "case:ifP; last by move=>_; apply Q2.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite domPt inE=>/eqP<-; rewrite findPt.",
            "VernacExtend",
            "82d53976234637e3f0907eb36cddf61d028c6306"
        ],
        [
            "by case=>????; subst z to' c; rewrite eqxx in A.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "exists i; split=>[|j[c1]];rewrite findUnL ?(valid_fresh) ?(cohVs (cohQ s C))//.",
            "VernacExtend",
            "0c04afef4ad25b5eb708991655a14460c2fd8b87"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by exists c'; rewrite (find_some Q1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: ifP=>_; first by move=> T; apply: Q3; exists c1.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by case/findPt_inv=>_[]????; subst to' z; rewrite eqxx in A.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by case:G5=>rq[rs][Tr]Np; exists rq, rs; rewrite /getLocal/=findU A/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case:M; case=>G1 G2 G3 G4 G5; [constructor 1|constructor 2|constructor 3].",
            "VernacExtend",
            "9e947369cb772529c5ec00dc524515a83a24404a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "split=>//=; first by rewrite /getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs (cohQ s C)).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "case: msg H2 H4=>t c H2 H4.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "apply: (msg_spec_consumeE (cohVs (cohQ s C)) H4 G4).",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "by rewrite (negbT A) orbC.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by case:G5=>rq[rs][Tr]Np; exists rq, rs; rewrite /getLocal/=findU A/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "split=>//=; first by rewrite /getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs (cohQ s C)).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs (cohQ s C)).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by case:G5=>rq[rs][Tr]Np; exists rq, rs; rewrite /getLocal/=findU A/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "split=>//=; first by rewrite /getLocal/= findU (negbTE N) in G1 *.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs (cohQ s C)).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "case: msg H2 H4=>t c H2 H4.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "apply: (msg_spec_consumeE (cohVs (cohQ s C)) H4 G4).",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "by rewrite (negbTE N) orbC.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by case:G5=>rq[rs][Tr]Np; exists rq, rs; rewrite /getLocal/=findU A/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma msg_story_rely req_num to data reqs resp s s2 : msg_story s req_num to data reqs resp -> network_rely W this s s2 -> msg_story s2 req_num to data reqs resp.",
            "VernacStartTheoremProof",
            "7b28caf690d18341007ef5001dd8e55fc250d72e"
        ],
        [
            "move=>H1 [n]H2; elim: n s H2 H1=>/=[s | n Hi s]; first by case=>Z _; subst s2.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case=>z[s1][N]H1 H2 H3; apply: (Hi s1 H2).",
            "VernacExtend",
            "d62e4c271de3f2a9ff5062b8b89d3c57d965c518"
        ],
        [
            "by apply: (msg_story_step _ _ _ _ _ _ _ _ N H3 H1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Program Definition read_request_id to : {rrd : seq (nid * nat) * seq (nid * nat) * Data}, DHT [this, W] (fun i => let: (reqs, resp, data) := rrd in [/\\ getLq i = qst :-> (reqs, resp), local_indicator data (getLc i), query_init_state to i & core_state_to_data to (getLc' i to) data], fun (r : nat) m => let: (reqs, resp, data) := rrd in [/\\ getLq m = qst :-> (reqs, resp), local_indicator data (getLc m), query_init_state to m, core_state_to_data to (getLc' m to) data & r = fresh_id reqs]) := Do _ (act (@skip_action_wrapper W this lq pq prEqQ _ (fun s pf => fresh_id (getSt this pf).1))).",
            "VernacDefinition",
            "68387409f38d57bbf40dfabce05087c6f74e5a2e"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply: ghC=>i0 [[rq rs] d][P1] P2 P3 P4 C1.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: act_rule=>i1 R1; split=>[|r i2 i3]; first by case: (rely_coh R1).",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case=>/=H1[Cj]Z; subst i1=>->R2.",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "rewrite !(rely_loc' _ R2) !(rely_loc' _ R1); split=>//.",
            "VernacExtend",
            "80e7cce19c53eb5d5a21aafd83e552d37e23084a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by apply: (query_init_rely _ _ _ _ R2); apply: (query_init_rely _ _ _ _ R1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "apply: (core_state_stable _ _ _ _ R2); [by case: P3|by rewrite !(rely_loc' _ R1)|].",
            "VernacExtend",
            "7c0b2b70ca3094a4cd671298e0723fd677dd07dc"
        ],
        [
            "by apply: (core_state_stable _ _ _ _ R1)=>//; case: P3.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite -(rely_loc' _ R1) in P1.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "suff X: getSt this (Actions.safe_local prEqQ H1) = (rq, rs) by rewrite X.",
            "VernacExtend",
            "d07fc8b2103f140554938023774bf3f75d04ba99"
        ],
        [
            "by move: (getStK (Actions.safe_local prEqQ H1) P1)=>/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Program Definition send_req rid to := act (@send_action_wrapper W pq this (plab pq) prEqQ (qsend_req qnodes) _ [:: rid] to).",
            "VernacDefinition",
            "9c622bb3d00af1932b8931a439d31805287a8c0f"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "by rewrite !InE; left.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Program Definition send_req_act (rid : nat) (to : nid) : {rrd : seq (nid * nat) * seq (nid * nat) * Data}, DHT [this, W] (fun i => let: (reqs, resp, data) := rrd in [/\\ getLq i = qst :-> (reqs, resp), local_indicator data (getLc i), rid = fresh_id reqs, query_init_state to i & core_state_to_data to (getLc' i to) data], fun (r : seq nat) m => let: (reqs, resp, data) := rrd in [/\\ getLq m = qst :-> ((to, rid) :: reqs, resp), local_indicator data (getLc m), r = [:: rid], msg_story m rid to data ((to, rid) :: reqs) resp & core_state_to_data to (getLc' m to) data]) := Do (send_req rid to).",
            "VernacDefinition",
            "e2e68b6061fea88c2db8943dbe959517d4d12fa6"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply: ghC=>s0[[reqs resp] d]/=[P1] Pi P2 Q P3 C0.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: act_rule=>i1 R0; split=>//=[|r i2 i3[Hs]St R2].",
            "VernacExtend",
            "5fce7e5361004176d6b434b36b4623c7387f70bb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /Actions.send_act_safe/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "move/rely_coh: (R0)=>[_ C1]; rewrite -(rely_loc' _ R0) in P1.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "move: (coh_coh lq C1); rewrite prEqQ=>Cq1; split=>//; [split=>//; try by case:Q| | ].",
            "VernacExtend",
            "5ff7ef95aaf753ca0a148a5e0ab7bdaaaccd369c"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by exists Cq1; rewrite /QueryProtocol.send_req_prec (getStK _ P1)/= P2.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by apply/andP; split=>//; rewrite -(cohD C1) W_dom !inE eqxx orbC.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move=>z lc hk; rewrite find_umfilt eqxx /query_hookz.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "move => F.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "apply sym_eq in F.",
            "VernacExtend",
            "76cf18d85a6c70aff426f8c1ee06ccb93e71c674"
        ],
        [
            "move: F.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "by move/find_some; rewrite domPt !inE=>/eqP.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "have N: network_step W this i1 i2.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "apply: (Actions.send_act_step_sem _ _ St)=>//; first by rewrite prEqQ.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by rewrite !InE; left.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite (rely_loc' _ R2).",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite -(rely_loc' _ R0) in P1.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "move/rely_coh: (R0)=>[_]C1; move: (coh_coh lq C1);rewrite prEqQ=>Cq1.",
            "VernacExtend",
            "59558e378570fadf944f573c466a34c761bc9b23"
        ],
        [
            "case: St=>->[h]/=[].",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "rewrite/QueryProtocol.send_step/QueryProtocol.send_step_fun/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite (pf_irr (QueryProtocol.send_safe_coh _) Cq1).",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite (getStK _ P1); case=>Z Z'; subst h rid.",
            "VernacExtend",
            "17c9c44693eb2c3d01c080ef2d095b3844eaddc8"
        ],
        [
            "rewrite Z' locE; last first; [by apply: cohVl Cq1| by apply: cohS C1| by rewrite -(cohD C1) W_dom !inE eqxx orbC|].",
            "VernacExtend",
            "a98c56ad1923613ba318783ecb67c88f80f1237c"
        ],
        [
            "have X : getLc i3 = getLc s0.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite (rely_loc' _ R2) -(rely_loc' _ R0) Z'.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by rewrite /getStatelet findU; move/negbTE: Lab_neq; rewrite eq_sym=>->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "split=>//; try by rewrite X//.",
            "VernacExtend",
            "9e1ddabc19dbcde2cd0d438099a629085ca31577"
        ],
        [
            "apply: (msg_story_rely _ _ _ _ _ i2)=>//.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "have E: core_state_to_data to (getLc' i1 to) = core_state_to_data to (getLc' i2 to).",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case B: (to == this); [move/eqP:B=>Z; subst to | ]; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by rewrite /getLocal (step_is_local _ N)=>//; move/negbT: B.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "subst i2; rewrite ![getLc' _ _]/getLocal /getStatelet/=.",
            "VernacExtend",
            "7649e4444607ed56b8775c495d7d447fc551358d"
        ],
        [
            "by rewrite findU; move/negbTE: Lab_neq; rewrite eq_sym=>->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move: (query_init_rely _ s0 i1 Q R0)=>{Q}Q; subst i2.",
            "VernacExtend",
            "1beee296d262adce25accdff95db2470665a2ebe"
        ],
        [
            "move: (Q)=>[Q1 Q2 Q3 Q4].",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "move: (core_state_stable _ _ _ _ R0 Q1 Pi P3); rewrite E=>{E}E.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "clear N R2 Q C0 X i3 P3.",
            "VernacExtend",
            "8ac64538542b29925f4c8292b536e1dd22d9cf97"
        ],
        [
            "split=>//.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /getStatelet findU; move/negbTE: Lab_neq; rewrite eq_sym=>->//=.",
            "VernacExtend",
            "a833b3bf0d956d1094f48b394f064884ddd0b86d"
        ],
        [
            "by rewrite (rely_loc' _ R0).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "constructor 1.",
            "VernacExtend",
            "08a5b9fd59ad59b27ce13f998c760c4014bfab97"
        ],
        [
            "split=>//; rewrite ?inE ?eqxx=>//=.",
            "VernacExtend",
            "fbaa61af20867a5dfb8bb5213ca8048b258f8f3a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite locE=>//; [by rewrite -(cohD C1) W_dom !inE eqxx orbC| apply: cohS C1|by apply: cohVl Cq1].",
            "VernacExtend",
            "450d811b50d7333694bf0e3f6f5c679a9cadebba"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "move=>m t c; rewrite /getStatelet findU eqxx (cohS C1)/=.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "set ds := (dsoup _); rewrite findUnR; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by rewrite valid_fresh; apply: cohVs Cq1.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite domPt !inE/=; case:ifP=>[/eqP<-|_]; last by apply: Q4.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by rewrite findPt; case=><-.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C1)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "set ds := (dsoup _); split=>//.",
            "VernacExtend",
            "ced270260aea2dd3ab523a646806c84962140531"
        ],
        [
            "exists (fresh ds); split=>//.",
            "VernacExtend",
            "a6c24937a9d5133af616ce26d2412b6b1232e6ac"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "exists [:: fresh_id reqs].",
            "VernacExtend",
            "aa1d63cf8eba45e31dbea3606420f5f65e02f6f6"
        ],
        [
            "rewrite findUnR; last by rewrite valid_fresh; apply: cohVs Cq1.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by rewrite domPt inE eqxx findPt.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "move=>x[c]; rewrite findUnR; last by rewrite valid_fresh; apply: cohVs Cq1.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case:ifP=>[|_[]]; first by rewrite domPt inE=>/eqP->.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by move/(Q3 x treq c).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move=>x c ; rewrite findUnR; last by rewrite valid_fresh; apply: cohVs Cq1.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case:ifP=>[|_[]]; last by move/(Q3 x treq c).",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by rewrite domPt inE=>/eqP->; rewrite findPt;case=>->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "set ds := (dsoup _).",
            "VernacExtend",
            "69a61e99b234580f7b41fa5b9655c87ba9a76f70"
        ],
        [
            "case: Q2=>reqs'[resp'][G1 G2].",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "case X: (to == this).",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "exists ((this, fresh_id reqs) :: reqs), resp; move/eqP:X=>X; subst to.",
            "VernacExtend",
            "b5589c51603678e6653fe5219b98f93c1c6d4b69"
        ],
        [
            "rewrite P1 in G1; have V: valid (qst :-> (reqs, resp)) by [].",
            "VernacExtend",
            "7be6e3cf9ccbce33486c4b5c6fefdf7a9ad6e52b"
        ],
        [
            "case: (hcancelPtV V G1)=>Z1 Z2; subst reqs' resp'=>{G1}.",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "split=>//; rewrite locE//; last first; [by apply: cohVl Cq1| by apply: cohS C1| by rewrite -(cohD C1) W_dom !inE eqxx orbC].",
            "VernacExtend",
            "26a376d764f13bae8f9a56efad72e3523ea69c7e"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "exists reqs', resp'; split=>//.",
            "VernacExtend",
            "2e8310d05674783a8cfc66250922cddd7b02e8dd"
        ],
        [
            "rewrite /getStatelet findU eqxx (cohS C1)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by rewrite /getLocal findU X.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: (Q)=>Nq _ _ _.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "move: (core_state_stable _ _ _ _ R0 Nq Pi P3)=>H1.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "rewrite -(rely_loc' _ R0) in Pi.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "have Pi': local_indicator d (getLc' i2 this).",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite Z'/getStatelet findU/= eq_sym; move/negbTE:Lab_neq->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "apply: (core_state_stable _ _ _ _ R2 Nq Pi').",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "by rewrite Z'/getStatelet findU/= eq_sym; move/negbTE:Lab_neq->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Program Definition tryrecv_resp (rid : nat) (to : nid) := act (@tryrecv_action_wrapper W this (fun k n t (b : seq nat) => [&& k == lq, n == to, t == tresp, head 0 b == rid & to \\in qnodes]) _).",
            "VernacDefinition",
            "e9a41b1dd95fde1e7614181a3304ede54436f82f"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "case/andP:H=>/eqP=>->_; rewrite joinC domUn inE domPt inE eqxx andbC/=.",
            "VernacExtend",
            "82d53976234637e3f0907eb36cddf61d028c6306"
        ],
        [
            "case: validUn=>//=; rewrite ?validPt//.",
            "VernacExtend",
            "90a2acb29b7a5304b0ab6ba5269c420638ddef63"
        ],
        [
            "move=>k; rewrite !domPt !inE=>/eqP<-/eqP Z; subst lq.",
            "VernacExtend",
            "4d0a43c6802b8488a0d2b36dc56fdc2cbfb5466e"
        ],
        [
            "by move/negbTE: Lab_neq; rewrite eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition recv_resp_cond (res : option Data): bool := if res is Some v then false else true.",
            "VernacDefinition",
            "661564b016e0e1e13f21b799b5a225c0748f2c46"
        ],
        [
            "Definition recv_resp_inv (rid : nat) to (rrd : (seq (nid * nat) * seq (nid * nat) * Data)) : cont (option Data) := fun res i => let: (reqs, resp, data) := rrd in if res is Some d then [/\\ getLq i = qst :-> (reqs, resp), local_indicator data (getLc i), query_init_state to i, core_state_to_data to (getLc' i to) data & d = data] else [/\\ getLq i = qst :-> ((to, rid) :: reqs, resp), local_indicator data (getLc i) & msg_story i rid to data ((to, rid) :: reqs) resp].",
            "VernacDefinition",
            "fe285de339430e7242637bd750c327e90ca15034"
        ],
        [
            "Program Definition receive_resp_loop (rid : nat) to : {(rrd : (seq (nid * nat) * seq (nid * nat) * Data))}, DHT [this, W] (fun i => let: (reqs, resp, data) := rrd in [/\\ getLq i = qst :-> ((to, rid) :: reqs, resp), local_indicator data (getLc i), msg_story i rid to data ((to, rid) :: reqs) resp & core_state_to_data to (getLc' i to) data], fun res m => let: (reqs, resp, data) := rrd in exists d, res = Some d /\\ [/\\ getLq m = qst :-> (reqs, resp), local_indicator data (getLc m), query_init_state to m, core_state_to_data to (getLc' m to) data & d = data]) := Do _ (@while this W _ _ recv_resp_cond (recv_resp_inv rid to) _ (fun _ => Do _ ( r <-- tryrecv_resp rid to; match r with | Some (from, tg, body) => ret _ _ (Some (deserialize (behead body))) | None => ret _ _ None end )) None).",
            "VernacDefinition",
            "fe48be9bc07668fdfef5adcc546f8944fae8bab1"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "by apply: with_spec x.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Defined.",
            "VernacEndProof",
            "88c0be54a50df4bb90276c075406fe442428eb9c"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "case: b H=>[b|]; rewrite /recv_resp_inv !(rely_loc' _ H0); case=>H1 H2 H3.",
            "VernacExtend",
            "1dd33488047dbf70f12e12a749f59bfa780f9e04"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "move=>H4 ->; split=>//; try by apply: (query_init_rely _ _ _ H3 H0).",
            "VernacExtend",
            "2ab3077fe4f7463360f33ab9e380dfa60e20d299"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by apply: (core_state_stable _ _ _ _ H0 _ H2)=>//; case: H3.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "split=>//; try apply: (msg_story_rely _ _ _ _ _ _ _ H3 H0).",
            "VernacExtend",
            "6c20de5f2e691049c42e15e30f636426d64c3973"
        ],
        [
            "Defined.",
            "VernacEndProof",
            "88c0be54a50df4bb90276c075406fe442428eb9c"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "rename H into d.",
            "VernacExtend",
            "dd53189966d4e2ae4ceb3e18e0e973e31865b680"
        ],
        [
            "apply: ghC=>i0 [[reqs resp] data][G0 H0] C0; apply: step.",
            "VernacExtend",
            "8d9dae45eeb3a769b8a865cef8ae476451f63802"
        ],
        [
            "apply: act_rule=>i1 R1/=; split; first by case: (rely_coh R1).",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case=>[[[from tg] body] i2 i3|i2 i3]; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case=>S/=[]C1; case; last by case=>?[?][?][?][?][?][].",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case=>_ _ Z; subst i2=>R3; apply: ret_rule=>i4 R4/=.",
            "VernacExtend",
            "c9a31b5c3dbfd076b1a173b39b5981bc72187636"
        ],
        [
            "case: d G0 H0=>//=_[H1 H2 H3].",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "rewrite !(rely_loc' _ R4)!(rely_loc' _ R3)!(rely_loc' _ R1); split=>//.",
            "VernacExtend",
            "80e7cce19c53eb5d5a21aafd83e552d37e23084a"
        ],
        [
            "by apply: (msg_story_rely _ _ _ _ _ _ _ _ R4); apply: (msg_story_rely _ _ _ _ _ _ _ _ R3); apply: (msg_story_rely _ _ _ _ _ _ _ _ R1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case=>Sf[]C1[]=>[|[l'][mid][tms][from'][rt][pf][][E]Hin E2 Hw/=]; first by case.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case/andP=>/eqP Z1/andP[/eqP Z2]/andP[/eqP Z3]/andP[/eqP Z4]Qn->{i2}[Z5] Z6 Z7 R3.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "subst l' from' from tg body rid.",
            "VernacExtend",
            "bcadf84ecd80d9228ac70ea58ffe8882bd3dcbee"
        ],
        [
            "move: rt pf (coh_s (w:=W) lq (s:=i1) C1) Hin R3 E2 Hw Z3 E; rewrite !prEqQ.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "move=>/=rt pf C1' Hin R E2 Hw G E.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "have D: rt = qrecv_resp _ by move: Hin G; do![case=>/=; first by move=>->].",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "subst rt=>{G}; simpl in E2.",
            "VernacExtend",
            "e7301f25591774e7e05300ccbb237e08cd331a0e"
        ],
        [
            "set i2 := (upd _ _ _) in R.",
            "VernacExtend",
            "69a61e99b234580f7b41fa5b9655c87ba9a76f70"
        ],
        [
            "apply: ret_rule=>i4 R3/=; rewrite !(rely_loc' _ R3)!(rely_loc' _ R).",
            "VernacExtend",
            "56c014161b39aecfb3c54301c2409dba4e8e1857"
        ],
        [
            "suff X : [/\\ getLocal this (getStatelet i2 lq) = qst :-> (reqs, resp), local_indicator data (getLc' i2 this), query_init_state to i2 & deserialize (behead tms) = data].",
            "VernacExtend",
            "d07fc8b2103f140554938023774bf3f75d04ba99"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case: X=>X1 X2 X3 X4; split=>//.",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "by apply: (query_init_rely _ _ _ _ R3); apply: (query_init_rely _ _ _ _ R).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case: d G0 H0=>//=_[_ H2][_] H3 _ _; case: X3=>Nq _ _ _.",
            "VernacExtend",
            "5887f8022a4f6389ac249140364feb69c4f18799"
        ],
        [
            "move: (X2); rewrite -(rely_loc' _ R)=>X3.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "apply: (core_state_stable _ _ _ _ R3 Nq X3).",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: (core_state_stable _ _ _ _ R Nq X2).",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "move: (core_state_stable _ _ _ _ R1 Nq H2 H3)=>{H2 H3 X3 X4}Y.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "by subst i2; rewrite /getStatelet findU eq_sym; move/negbTE:Lab_neq=>->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "clear R i4 R3.",
            "VernacExtend",
            "b521c36896e044fd1ff61c2a3536e8709325d3d8"
        ],
        [
            "case: d G0 H0=>//=_[Q1 Q2 Q3]; rewrite -!(rely_loc' _ R1) in Q1 Q2.",
            "VernacExtend",
            "90a2acb29b7a5304b0ab6ba5269c420638ddef63"
        ],
        [
            "move: (msg_story_rely _ _ _ _ _ _ _ Q3 R1)=>{Q3}Q3.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "have P1: valid (dstate (getSq i1)) by case: (C1')=>P1 P2 P3 P4.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "have P2: valid i1 by apply: (cohS C1).",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "have P3: lq \\in dom i1.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "rewrite -(cohD C1) domUn inE !domPt !inE/= inE eqxx orbC andbC/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by case/andP: W_valid.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "clear Hin R1 C0 i0 i3 Hw.",
            "VernacExtend",
            "2cf3073318e376419d9e1e8b44bb6586ec3c46cd"
        ],
        [
            "case: Q3=>_ Q3 Q4 [].",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case=>_/(_ mid (tag tms) (tms_cont tms)); rewrite -E.",
            "VernacExtend",
            "90a2acb29b7a5304b0ab6ba5269c420638ddef63"
        ],
        [
            "by case: (tms)E2=>t c/=E2=>/(_ (erefl _))/=; subst t.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case=>_ _ _/(_ mid (tag tms) (tms_cont tms)); rewrite -E.",
            "VernacExtend",
            "90a2acb29b7a5304b0ab6ba5269c420638ddef63"
        ],
        [
            "by case: (tms)E2=>t c/=E2=>/(_ (erefl _))/=; subst t.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case=>X1 _ X2 X3 X4; rewrite /query_init_state.",
            "VernacExtend",
            "90a2acb29b7a5304b0ab6ba5269c420638ddef63"
        ],
        [
            "subst i2.",
            "VernacExtend",
            "4158e398389301162da535b6b8a52db0804879a7"
        ],
        [
            "rewrite /receive_step/=/QueryProtocol.receive_step !(getStK C1' X1)/=!inE!eqxx/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite !locE ?Qn/=;[|by case: C1'|by apply: cohS C1|by case: C1'].",
            "VernacExtend",
            "68466e744b16181737650f7b68e97595527ee40f"
        ],
        [
            "apply sym_eq in E.",
            "VernacExtend",
            "c7d663de7d755dad1769249cb97acb8f043fa64a"
        ],
        [
            "split=>//; last 1 first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case:X3; case=>m'[[c]]E'/(_ mid) H.",
            "VernacExtend",
            "5887f8022a4f6389ac249140364feb69c4f18799"
        ],
        [
            "have Z: m' = mid by apply: H; exists (tms_cont tms); rewrite E; case: (tms) E2=>/=t c'->.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "subst m'; clear H; rewrite E in E'.",
            "VernacExtend",
            "7465e5cd01611b6a6ddec6d414cb2723ee30fbe6"
        ],
        [
            "case: (tms) E' E=>t c'[]Z1 Z2; subst c' t=>E.",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "by move/(_ _ _ E)=>/eqP->/=; apply: ds_inverse.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite /getStatelet findU eq_sym; move/negbTE:Lab_neq=>->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "split=>//.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case B: (to == this); last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "rewrite /getStatelet findU eqxx/= (cohS C1)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /holds_res_perms in X4.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: X4=> rq[rs][G1 G2]; exists rq, rs; split=>//.",
            "VernacExtend",
            "f6b560331b4b75021b645214207429bdc9dfe3a3"
        ],
        [
            "by rewrite /getLocal/= findU; case:ifP=>//=/eqP Z; subst to; rewrite eqxx in B.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move/eqP:B=>B; subst to; case: X4=> rq[rs][G1 G2].",
            "VernacExtend",
            "855f2eda890297e5cb3285855cead36ce6f908d9"
        ],
        [
            "rewrite G1 in X1.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "have V: valid (qst :-> (rq, rs)) by apply: validPt.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "case: (hcancelPtV V X1)=>Z1 Z2; subst rq rs; exists reqs, resp; split=>//.",
            "VernacExtend",
            "3c0b9257fc36b48e9f4c104b26c905107e7140b8"
        ],
        [
            "rewrite /getStatelet/= findU eqxx (cohS C1)/=/getLocal/=findU eqxx/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by case: C1'=>_->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "rewrite /getStatelet/= findU eqxx/= (cohS C1)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by apply: (no_msg_from_to_consume' _ X2); case: C1'; case.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite /getStatelet/= findU eqxx/= (cohS C1)/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "case: (tms) E2 E=>t c/=-> E;apply: (no_msg_spec_consume _ E X3).",
            "VernacExtend",
            "d62e4c271de3f2a9ff5062b8b89d3c57d965c518"
        ],
        [
            "by case: C1'; case.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply:ghC=>i1[[reqs resp] d][L1 I1 M1 S1] C1.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: (gh_ex (g:=(reqs, resp, d))); apply: call_rule=>// res i2[Q1 Q2] C2.",
            "VernacExtend",
            "8d9dae45eeb3a769b8a865cef8ae476451f63802"
        ],
        [
            "by case: res Q1 Q2=>//=data _ [Q1 Q2 Z]; exists data.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Variable default_data : Data.",
            "VernacAssumption",
            "598479e83c01aabe4a04a7143d3ef4d4e7c5b2cc"
        ],
        [
            "Program Definition request_data_program to : {rrd : seq (nid * nat) * seq (nid * nat) * Data}, DHT [this, W] (fun i => let: (reqs, resp, data) := rrd in [/\\ getLq i = qst :-> (reqs, resp), local_indicator data (getLc i), query_init_state to i & core_state_to_data to (getLc' i to) data], fun res m => let: (reqs, resp, data) := rrd in [/\\ getLq m = qst :-> (reqs, resp), local_indicator data (getLc m), query_init_state to m, core_state_to_data to (getLc' m to) data & res = data]) := Do _ ( rid <-- read_request_id to; send_req_act rid to;; r <-- receive_resp_loop rid to; ret _ _ (if r is Some d then d else default_data) ).",
            "VernacDefinition",
            "76cc5b82ee86a5aa1419bab01656fc0d6d31e862"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply:ghC=>i1[[reqs resp] d][L1 I1 M1 S1] C1.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: step; apply: (gh_ex (g:=(reqs, resp, d))).",
            "VernacExtend",
            "8d9dae45eeb3a769b8a865cef8ae476451f63802"
        ],
        [
            "apply: call_rule=>//r i2[P1 P2 P3 P4->{r}] C2.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: step; apply: (gh_ex (g:=(reqs, resp, d))).",
            "VernacExtend",
            "8d9dae45eeb3a769b8a865cef8ae476451f63802"
        ],
        [
            "apply: call_rule=>//_ i3[Q1 Q2 _ Q3 Q4]C3.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: step; apply: (gh_ex (g:=(reqs, resp, d))).",
            "VernacExtend",
            "8d9dae45eeb3a769b8a865cef8ae476451f63802"
        ],
        [
            "apply: call_rule=>//? i4[d'][->][T1] T2 T3 T4->{d'}C4.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: ret_rule=>i5 R; rewrite !(rely_loc' _ R); split=>//.",
            "VernacExtend",
            "877072eca2b60ab32889d658e076eb026578eeca"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by apply: (query_init_rely _ _ _ _ R).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by apply: (core_state_stable _ _ _ _ R _ T2 T4); case: T3.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "End QueryHooked.",
            "VernacEndSegment",
            "0115f90ccb52daa5e02e99848763d6a97fdc47fa"
        ]
    ],
    "proofs": [
        {
            "name": "W_valid",
            "line_nb": 20,
            "steps": [
                {
                    "command": [
                        "apply/andP; split=>/=; last by rewrite validPt.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "case: validUn=>//; rewrite ?validPt// =>l.",
                        "VernacExtend",
                        "ba44c9d0281a02110ce54645304e6d990debd9c0"
                    ]
                },
                {
                    "command": [
                        "rewrite !domPt !inE=>/eqP=>Z; subst l=>/eqP=>Z.",
                        "VernacExtend",
                        "fbaa61af20867a5dfb8bb5213ca8048b258f8f3a"
                    ]
                },
                {
                    "command": [
                        "by subst lq; move/negbTE: Lab_neq; rewrite eqxx.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "W_complete",
            "line_nb": 26,
            "steps": [
                {
                    "command": [
                        "move=>z lc ls t/=; rewrite domPt inE=>/eqP[]_<-<-_.",
                        "VernacExtend",
                        "8261237f0cda1915a4077c28869831c5329103ce"
                    ]
                },
                {
                    "command": [
                        "rewrite !domUn !inE/= !domPt !inE !eqxx/= orbC.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case/andP:W_valid=>->_.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "rewrite 3!andTb.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite inE.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by apply/orP; left.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "W_dom",
            "line_nb": 34,
            "steps": [
                {
                    "command": [
                        "move=>z/=; rewrite domUn !inE/=; case/andP: W_valid=>->/=_.",
                        "VernacExtend",
                        "d7214ac8fd48f4d1cd143edd9d16f6d28386a302"
                    ]
                },
                {
                    "command": [
                        "rewrite !domPt !inE; rewrite -!(eq_sym z).",
                        "VernacExtend",
                        "2194fcb4d6d52cbae24a29f7ff14a3997f1912fd"
                    ]
                },
                {
                    "command": [
                        "rewrite /cond /= inE orbC.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "apply sym_eq.",
                        "VernacExtend",
                        "f01eb728d9ceeac2915c66b52a7b50a0c452e949"
                    ]
                },
                {
                    "command": [
                        "by rewrite orbC eq_sym.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "eqW",
            "line_nb": 41,
            "steps": [
                {
                    "command": [
                        "by rewrite /PCM.join/=/W !unitL !unitR.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "eqW'",
            "line_nb": 44,
            "steps": [
                {
                    "command": [
                        "by rewrite eqW joinA.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "labC",
            "line_nb": 68,
            "steps": [
                {
                    "command": [
                        "case/andP: W_valid=>V1 V2.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "by rewrite domUn !inE V1/= domPt inE eqxx.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "labQ",
            "line_nb": 72,
            "steps": [
                {
                    "command": [
                        "case/andP: W_valid=>V1 V2.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "rewrite domUn !inE V1/= !domPt !inE /cond /= inE.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by apply/orP; right.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "prEqC",
            "line_nb": 89,
            "steps": [
                {
                    "command": [
                        "rewrite /getProtocol/W/= findUnL; last by case/andP: W_valid.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by rewrite domPt inE eqxx findPt.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "prEqQ",
            "line_nb": 93,
            "steps": [
                {
                    "command": [
                        "rewrite /getProtocol/W/= findUnR; last by case/andP: W_valid.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by rewrite domPt inE eqxx findPt.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "prEqQ'",
            "line_nb": 97,
            "steps": [
                {
                    "command": [
                        "by rewrite /getProtocol findPt.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "query_init_step'",
            "line_nb": 111,
            "steps": [
                {
                    "command": [
                        "move=> N H S; case: (step_coh S)=>C1 _.",
                        "VernacExtend",
                        "a01b3d93f426ff68d360351709a5fa5af822af32"
                    ]
                },
                {
                    "command": [
                        "case: S; [by case=>_<- | move=>l st H1 to'/= msg n H2 H3 C H4 H5 H6->{s'}| move=>l rt H1 i from pf H3 C msg H2/=[H4]_->{s'}]; rewrite -(cohD C) domPt inE in H3; move/eqP: H3=>H3; subst l; rewrite /query_init_state/getStatelet !findU !eqxx (cohS C1)/=; have Cq: coh pq (getStatelet s lq) by move: (coh_coh lq C1); rewrite /getProtocol findPt.",
                        "VernacExtend",
                        "74d04ef320945deb44ec43f6c0ef0d04a3f2198c"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "case:H=>G1 G2 G3 G4.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "move: st H1 H4 H5 H6; rewrite /get_st prEqQ'=>st H1 H4 H5 H6.",
                        "VernacExtend",
                        "8261237f0cda1915a4077c28869831c5329103ce"
                    ]
                },
                {
                    "command": [
                        "case B: (to == z); rewrite /holds_res_perms/getLocal findU B/=; last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "split=>//.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "move=>m t c; rewrite findUnR ?valid_fresh ?(cohVs Cq)//; case: ifP; last by move=>_/G3.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "rewrite domPt inE=>/eqP<-{m}; rewrite findPt; case=>_ _ Z; subst z.",
                        "VernacExtend",
                        "c7e30415936c50a58f873c300084e7ac57da094b"
                    ]
                },
                {
                    "command": [
                        "by move/negbTE: N; rewrite eqxx.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "move=>m t c; rewrite findUnR ?valid_fresh ?(cohVs Cq)//; case: ifP; last by move=>_/G4.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "rewrite domPt inE=>/eqP<-{m}; rewrite findPt; case=>_ _ Z; subst z.",
                        "VernacExtend",
                        "c7e30415936c50a58f873c300084e7ac57da094b"
                    ]
                },
                {
                    "command": [
                        "by rewrite eqxx in B.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "move/eqP: B=>B; subst z; split=>//; first 1 last.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "move=>m t c; rewrite findUnR ?valid_fresh ?(cohVs Cq)//; case: ifP; last by move=>_/G3.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "rewrite domPt inE=>/eqP<-{m}; rewrite findPt; case=>_ _ Z; subst to.",
                        "VernacExtend",
                        "049978e2ec10cb29b0da4ad596f40091965407f7"
                    ]
                },
                {
                    "command": [
                        "by move/negbTE: N; rewrite eqxx.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "move=>m t c; rewrite findUnR ?valid_fresh ?(cohVs Cq)//; case: ifP; last by move=>_/G4.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "rewrite domPt inE=>/eqP<-{m}; rewrite findPt; case=>Z' Z2 Z; subst to' t c.",
                        "VernacExtend",
                        "69a1effe787b2bd2a1d1c681aae237e2657be71e"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst st=>//.",
                        "VernacExtend",
                        "642073d4c047bd3445c6c1d7a292b3e7e8f7f08d"
                    ]
                },
                {
                    "command": [
                        "case: (H4)=>_[C']/=[rid][d][_]; case: G2=>rq[rs][E]H.",
                        "VernacExtend",
                        "5887f8022a4f6389ac249140364feb69c4f18799"
                    ]
                },
                {
                    "command": [
                        "by rewrite (getStK _ E)/==>/H.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "rewrite (cohVl Cq); case: G2=>rq[rs][E]H.",
                        "VernacExtend",
                        "712d339e99ee17eb7d5033e19ac614eb3ca6b532"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst st=>//; last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "case: (H4)=>_[C']/=[rid][d][H']; subst msg.",
                        "VernacExtend",
                        "4f0d26c80f9a62c9ec206491065cf02c416be154"
                    ]
                },
                {
                    "command": [
                        "rewrite (getStK _ E)/==>G.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "rewrite /=/QueryProtocol.send_step/=!(getStK _ E)/= G/= in H6; case: H6=>Z.",
                        "VernacExtend",
                        "712d339e99ee17eb7d5033e19ac614eb3ca6b532"
                    ]
                },
                {
                    "command": [
                        "subst n; eexists rq, (seq.rem (to', rid) rs); split=>//.",
                        "VernacExtend",
                        "4ca32b2ca97b78ea1ada9befd442b31f6093fda7"
                    ]
                },
                {
                    "command": [
                        "by move=>rn; move/mem_rem; apply/H.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case: (H4)=>_[C']/==>Z.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "rewrite/QueryProtocol.send_req_prec (getStK _ E) in Z; subst msg.",
                        "VernacExtend",
                        "6397720ba149b77a3ca0cf2344dcca32ecdd90ae"
                    ]
                },
                {
                    "command": [
                        "rewrite /=/QueryProtocol.send_step/=!(getStK _ E)/= in H6; case: H6=>Z; subst n.",
                        "VernacExtend",
                        "1fbcede6dda32f946b4210889d3facf6a5266151"
                    ]
                },
                {
                    "command": [
                        "by exists ((to', fresh_id rq) :: rq), rs.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case:H=>G1 G2 G3 G4.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "move: (coh_s _ _) rt pf H1 H2.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "rewrite /get_rt prEqQ'/==>Cq'; rewrite !(pf_irr Cq' Cq)=>{Cq'}.",
                        "VernacExtend",
                        "fbaa61af20867a5dfb8bb5213ca8048b258f8f3a"
                    ]
                },
                {
                    "command": [
                        "move=>rt pf H1 H2.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "case B: (to == z); rewrite /holds_res_perms/getLocal findU B/=; last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by split=>//; apply: no_msg_from_to_consume'=>//; rewrite ?(cohVs Cq).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "rewrite !(cohVl Cq); move/eqP:B=>B; subst z.",
                        "VernacExtend",
                        "9d5d6e7628701b68a6190cb3d46e40167340d11c"
                    ]
                },
                {
                    "command": [
                        "split=>//; try by apply: no_msg_from_to_consume'=>//; rewrite ?(cohVs Cq).",
                        "VernacExtend",
                        "9e1ddabc19dbcde2cd0d438099a629085ca31577"
                    ]
                },
                {
                    "command": [
                        "case: G2=>rq[rs][E]H.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst rt=>//=; simpl in H2; rewrite /QueryProtocol.receive_step (getStK _ E)/=; last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "case: ifP=>_; last by eexists _, _.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by exists (seq.rem (from, head 0 msg) rq), rs.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case: ifP=>_; last by eexists _, _.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "exists rq, ((from, head 0 msg) :: rs); split=>//.",
                        "VernacExtend",
                        "b105a5a6a6938b08779574ee0f0a7a32160133ed"
                    ]
                },
                {
                    "command": [
                        "move=>rn; rewrite inE; case/orP; last by apply: H.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "case/eqP=>Z1 Z2; subst rn from.",
                        "VernacExtend",
                        "49b4ef42fdacf85861937d6d1c8b27cf5b4dfb27"
                    ]
                },
                {
                    "command": [
                        "case: msg H2 H4=>t c/=Z H4; subst t.",
                        "VernacExtend",
                        "cb7f7fc8c9bf54dd40642228df71eafbde36d5b5"
                    ]
                },
                {
                    "command": [
                        "by move: (G3 _ _ _ H4).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "query_init_rely",
            "line_nb": 176,
            "steps": [
                {
                    "command": [
                        "move=>Q R; case:(rely_coh R)=>CD CD'.",
                        "VernacExtend",
                        "a01b3d93f426ff68d360351709a5fa5af822af32"
                    ]
                },
                {
                    "command": [
                        "rewrite eqW in CD; move: (coh_hooks CD)=>{CD}CD.",
                        "VernacExtend",
                        "7e529e80bb2879787ee6d9466056f19f0215c721"
                    ]
                },
                {
                    "command": [
                        "rewrite eqW in CD'; move: (coh_hooks CD')=>{CD'}CD'.",
                        "VernacExtend",
                        "7e529e80bb2879787ee6d9466056f19f0215c721"
                    ]
                },
                {
                    "command": [
                        "case: (coh_split CD _ _); try apply: hook_complete0.",
                        "VernacExtend",
                        "1a12e527114c2334e70d66d126a44d968b267be4"
                    ]
                },
                {
                    "command": [
                        "move=>i1[j1][C1 D1 Z]; subst s.",
                        "VernacExtend",
                        "eef520705260be04faa88b488a16456ba32efa20"
                    ]
                },
                {
                    "command": [
                        "case: (coh_split CD' _ _); try apply: hook_complete0.",
                        "VernacExtend",
                        "1a12e527114c2334e70d66d126a44d968b267be4"
                    ]
                },
                {
                    "command": [
                        "move=>i2[j2][C2 D2 Z]; subst s2.",
                        "VernacExtend",
                        "87cbbf7fb3f94f52b29d627f425bb70ea94ec73c"
                    ]
                },
                {
                    "command": [
                        "rewrite /query_init_state in Q *.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite (locProjR CD _ D1) in Q; last by rewrite domPt inE andbC eqxx.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "rewrite (locProjR CD' _ D2); last by rewrite domPt inE andbC eqxx.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "case: (rely_split injW C1 C2 R)=>Rc Rq; rewrite injWQ in Rq.",
                        "VernacExtend",
                        "90a2acb29b7a5304b0ab6ba5269c420638ddef63"
                    ]
                },
                {
                    "command": [
                        "by apply: (query_init_rely' _ _ _ Q Rq).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "prEqC'",
            "line_nb": 195,
            "steps": [
                {
                    "command": [
                        "by rewrite /getProtocol findPt/=.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "cohQ",
            "line_nb": 240,
            "steps": [
                {
                    "command": [
                        "by move/(coh_coh lq); rewrite prEqQ.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "send_lq_case1",
            "line_nb": 243,
            "steps": [
                {
                    "command": [
                        "move=>H5 H6; case: M=>G1 G2 G3 G4[rq][rs][E]Np; split=>//.",
                        "VernacExtend",
                        "898083afbcb7f48eb38b81893aabf115193d46fd"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/==>z t c.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case: ifP; [|by move=>_; apply: G2].",
                        "VernacExtend",
                        "f2087b5d39a71a87d324e6b4f082ed0e1d3a0fec"
                    ]
                },
                {
                    "command": [
                        "rewrite domPt inE=>/eqP<-; rewrite findPt; case=>???; subst t c to'.",
                        "VernacExtend",
                        "f21a69b595d8c25d1c7c10905d85a805f7d4f300"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6/=; subst n.",
                        "VernacExtend",
                        "05a56613d84b4936dbbb594c6f74edf657717031"
                    ]
                },
                {
                    "command": [
                        "by case:H4=>_[C'][rid][_][_]; rewrite (getStK _ E); move/Np.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case:G4; case=>i[[c']Q1 Q3] Q2; split; last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "move=>j c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
                        "VernacExtend",
                        "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
                    ]
                },
                {
                    "command": [
                        "case:ifP; last by move=>_; apply Q2.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "rewrite domPt inE=>/eqP<-; rewrite findPt.",
                        "VernacExtend",
                        "82d53976234637e3f0907eb36cddf61d028c6306"
                    ]
                },
                {
                    "command": [
                        "by case=>???; subst to; rewrite eqxx in N.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "exists i; split=>[|j[c1]];rewrite findUnL ?(valid_fresh) ?(cohVs (cohQ s C))//.",
                        "VernacExtend",
                        "0c04afef4ad25b5eb708991655a14460c2fd8b87"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by exists c'; rewrite (find_some Q1).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case: ifP=>_; first by move=> T; apply: Q3; exists c1.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by case/findPt_inv=>_[]_ _?; subst to; rewrite eqxx in N.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6; subst n.",
                        "VernacExtend",
                        "05a56613d84b4936dbbb594c6f74edf657717031"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by exists ((to', fresh_id rq) :: rq), rs.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case: ifP=>_; last by exists rq, rs.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by exists rq, (seq.rem (to', head 0 msg) rs); split=>//rn/mem_rem/Np.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "send_lq_case3",
            "line_nb": 275,
            "steps": [
                {
                    "command": [
                        "move=>H5 H6.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "case: M=>G1 G2 G3 G4[rq][rs][E]Np; split=>//.",
                        "VernacExtend",
                        "ba44c9d0281a02110ce54645304e6d990debd9c0"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/==>z t c.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case: ifP; [|by move=>_; apply: G3].",
                        "VernacExtend",
                        "f2087b5d39a71a87d324e6b4f082ed0e1d3a0fec"
                    ]
                },
                {
                    "command": [
                        "rewrite domPt inE=>/eqP<-; rewrite findPt; case=>????; subst t c to to'.",
                        "VernacExtend",
                        "8da58b9cab3fe94a30288935585a8637e4df93fd"
                    ]
                },
                {
                    "command": [
                        "by rewrite eqxx in N.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case:G4; case=>i[[c']Q1 Q3] Q2; split; last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "move=>j c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//.",
                        "VernacExtend",
                        "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
                    ]
                },
                {
                    "command": [
                        "case:ifP; last by move=>_; apply Q2.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "rewrite domPt inE=>/eqP<-; rewrite findPt.",
                        "VernacExtend",
                        "82d53976234637e3f0907eb36cddf61d028c6306"
                    ]
                },
                {
                    "command": [
                        "case=>???; subst to' c.",
                        "VernacExtend",
                        "a4de1f86f9b189e2d0ddc22497ddb29271640472"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6/=; subst n.",
                        "VernacExtend",
                        "05a56613d84b4936dbbb594c6f74edf657717031"
                    ]
                },
                {
                    "command": [
                        "by case:H4=>_[C']; rewrite (getStK _ E); case=>rid[d][->]/=/Np.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "exists i; split=>[|j[c1]];rewrite findUnL ?(valid_fresh) ?(cohVs (cohQ s C))//.",
                        "VernacExtend",
                        "0c04afef4ad25b5eb708991655a14460c2fd8b87"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by exists c'; rewrite (find_some Q1).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case: ifP=>_; first by move=> T; apply: Q3; exists c1.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "case/findPt_inv=>_[]???; subst to'.",
                        "VernacExtend",
                        "87d67d7da438d98d2f6ad9e0b35a845aeeca5867"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6/=; subst n.",
                        "VernacExtend",
                        "05a56613d84b4936dbbb594c6f74edf657717031"
                    ]
                },
                {
                    "command": [
                        "by case:H4=>_[C']; rewrite (getStK _ E); case=>rid[d][_]/=/Np.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6; subst n.",
                        "VernacExtend",
                        "05a56613d84b4936dbbb594c6f74edf657717031"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by exists ((to', fresh_id rq) :: rq), rs.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case: ifP=>_; last by exists rq, rs.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by exists rq, (seq.rem (to', head 0 msg) rs); split=>//rn/mem_rem/Np.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "send_lq_all_cases",
            "line_nb": 311,
            "steps": [
                {
                    "command": [
                        "move=>H5 H6.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "move: st H1 H4 H5 H6; rewrite /get_st prEqQ=>st H1 H4 H5 H6.",
                        "VernacExtend",
                        "8261237f0cda1915a4077c28869831c5329103ce"
                    ]
                },
                {
                    "command": [
                        "case: M; last 1 first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "constructor 3.",
                        "VernacExtend",
                        "fc203c31040684912422f2b19644a4136ee46779"
                    ]
                },
                {
                    "command": [
                        "by apply: (send_lq_case3 req_num data _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ H4).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by constructor 1; apply: (send_lq_case1 req_num _ _ _ _ _ _ _ _ _ _ _ _ _ _ H4).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Ltac kill_g3 s C G3 to N := rewrite /getStatelet findU eqxx(cohS C)/==>z t c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//; case: ifP; [|by move=>_; apply: G3]; rewrite domPt inE=>/eqP<-; rewrite findPt; by case=>_ _ Z _; subst to; rewrite eqxx in N.",
                        "VernacExtend",
                        "b124b4901fd400b36f99cd533dee933b270d4746"
                    ]
                },
                {
                    "command": [
                        "Ltac kill_g4 s C G4 to' t B:= rewrite /getStatelet findU eqxx(cohS C)/==>z t c; rewrite findUnR ?(valid_fresh) ?(cohVs (cohQ s C))//; case: ifP; [|by move=>_; apply: G4]; rewrite domPt inE=>/eqP<-; rewrite findPt; by case=>??; try move=>?; try subst t; try subst to'; try rewrite ?eqxx in B.",
                        "VernacExtend",
                        "6d0b1d08c8c2f91176a488ad8bc394b86e5bdb9a"
                    ]
                },
                {
                    "command": [
                        "case=>G1 G2 G3 G4 [rq][rs][E]Np.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "case B : (to' == this); [move/eqP:B=>B; subst to'|]; last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "constructor 2.",
                        "VernacExtend",
                        "3bbfaccba5e1a5a8e417cf2575e634e4c10773fe"
                    ]
                },
                {
                    "command": [
                        "split=>//.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "kill_g3 s C G3 to N.",
                        "VernacExtend",
                        "ee38410839871aefa3ac48959af5b3f3fd14b284"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "kill_g4 s C G4 to' t B.",
                        "VernacExtend",
                        "f524714075a773482681ad2c70b1a8a33bb761b5"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6; subst n.",
                        "VernacExtend",
                        "05a56613d84b4936dbbb594c6f74edf657717031"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by exists ((to', fresh_id rq) :: rq), rs.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case:ifP=>_; last by exists rq, rs.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by exists rq, (seq.rem (to', head 0 msg) rs); split=>//rn/mem_rem/Np.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst st=>//; simpl in H5, H6; rewrite/QueryProtocol.send_step (getStK _ E)/= in H6; case: H6=>H6; subst n.",
                        "VernacExtend",
                        "05a56613d84b4936dbbb594c6f74edf657717031"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "constructor 2; split=>//.",
                        "VernacExtend",
                        "6394869e14fb35adade86bfc9f06194251870c23"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "kill_g3 s C G3 to N.",
                        "VernacExtend",
                        "ee38410839871aefa3ac48959af5b3f3fd14b284"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "kill_g4 s C G4 to' t B.",
                        "VernacExtend",
                        "f524714075a773482681ad2c70b1a8a33bb761b5"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by exists ((this, fresh_id rq) :: rq), rs.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case: (H4)=>_[C']/=[rid][d][Zm]Tr; subst msg.",
                        "VernacExtend",
                        "4f0d26c80f9a62c9ec206491065cf02c416be154"
                    ]
                },
                {
                    "command": [
                        "rewrite (getStK _ E)/= in Tr.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite Tr; constructor 3.",
                        "VernacExtend",
                        "248340a4c99ac1a4f07517cd50cc8ae9e8b72f11"
                    ]
                },
                {
                    "command": [
                        "move: (H5 1 (plab pc) query_hook); rewrite findPt -!(cohD C).",
                        "VernacExtend",
                        "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
                    ]
                },
                {
                    "command": [
                        "move/(_ (erefl _) labC labQ to rid d (erefl _))=>D.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "move: (core_state_to_data_inj _ _ _ _ D H)=>Z; subst d.",
                        "VernacExtend",
                        "441d5c5e679f0f9f2e8f72d6d289471f2d1f36d6"
                    ]
                },
                {
                    "command": [
                        "split=>//; first 3 last.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "exists (rq), (seq.rem (this, rid) rs).",
                        "VernacExtend",
                        "70768580cad71a6280b94840d28b181fb529792d"
                    ]
                },
                {
                    "command": [
                        "rewrite /getLocal findU eqxx/= (cohVl C'); split=>// rn R.",
                        "VernacExtend",
                        "80e7cce19c53eb5d5a21aafd83e552d37e23084a"
                    ]
                },
                {
                    "command": [
                        "move/Np/eqP: (mem_rem R)=>Zr; subst rn.",
                        "VernacExtend",
                        "79e222ffeca2cc194c5592cf0b362c1911aa5ac2"
                    ]
                },
                {
                    "command": [
                        "move/Np:Tr=>/eqP=>Zr; subst rid.",
                        "VernacExtend",
                        "e88edd08e2386691363a915f4994c56a8963b986"
                    ]
                },
                {
                    "command": [
                        "case: (C')=>_ _ _/(_ to); rewrite E (cohDom C')=>/(_ Qn).",
                        "VernacExtend",
                        "ba44c9d0281a02110ce54645304e6d990debd9c0"
                    ]
                },
                {
                    "command": [
                        "case=>[[x1 x2]][]/(hcancelPtV _); rewrite validPt/==>/(_ is_true_true).",
                        "VernacExtend",
                        "ba44c9d0281a02110ce54645304e6d990debd9c0"
                    ]
                },
                {
                    "command": [
                        "case=>Z1 Z2; subst x1 x2=>/andP[_]G.",
                        "VernacExtend",
                        "ba44c9d0281a02110ce54645304e6d990debd9c0"
                    ]
                },
                {
                    "command": [
                        "by rewrite (rem_filter (this, req_num) G) mem_filter/= eqxx/= in R.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by rewrite /getStatelet findU eqxx(cohS C)/getLocal findU (negbTE N).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx (cohS C)/==>z t c.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "rewrite findUnR ?(valid_fresh) ?(cohVs C')//.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case: ifP=>[|_]; last by apply: G3.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by rewrite domPt inE=>/eqP<-{z}; rewrite findPt; case=><-.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "split=>[|i m]; rewrite /getStatelet findU eqxx/= (cohS C)/=; last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "rewrite findUnR ?(valid_fresh) ?(cohVs C')//; case: ifP=>[|_]; last by move/G4.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "rewrite domPt inE=>/eqP<-; rewrite findPt; case=><-.",
                        "VernacExtend",
                        "2289f2bfae5d151681d361796cca422ec04b24ad"
                    ]
                },
                {
                    "command": [
                        "by move/Np/eqP: Tr=>->; rewrite eqxx.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "exists (fresh (dsoup (getStatelet s lq))); split.",
                        "VernacExtend",
                        "472afea770f3833ecfcb3a6258558a0f83980d1b"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "exists (rid :: serialize data).",
                        "VernacExtend",
                        "6e9b485fa8b26716dda2b84ee69dc285ed73c666"
                    ]
                },
                {
                    "command": [
                        "by rewrite findUnR ?(valid_fresh)?(cohVs C')// domPt inE eqxx findPt.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "move=>i[c]; rewrite findUnR ?(valid_fresh)?(cohVs C')//.",
                        "VernacExtend",
                        "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
                    ]
                },
                {
                    "command": [
                        "case: ifP=>[|_]; last by move/G4.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by rewrite domPt inE=>/eqP<-; rewrite findPt.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "send_lc_all_cases",
            "line_nb": 389,
            "steps": [
                {
                    "command": [
                        "move=>H5 H6.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "move: st H1 H4 H5 H6; rewrite /get_st prEqC=>st H1 H4 H5 H6.",
                        "VernacExtend",
                        "8261237f0cda1915a4077c28869831c5329103ce"
                    ]
                },
                {
                    "command": [
                        "by case: M; [constructor 1|constructor 2|constructor 3]; rewrite /getStatelet findU (negbTE Lab_neq)/=.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "recv_lq_case1",
            "line_nb": 394,
            "steps": [
                {
                    "command": [
                        "move=>H1 H2 H4; case: M=>G1 G2 G3 G4[rq][rs][Tr]Np.",
                        "VernacExtend",
                        "a01b3d93f426ff68d360351709a5fa5af822af32"
                    ]
                },
                {
                    "command": [
                        "case X: (this == from); [move/eqP:X=>X; subst from|constructor 1]; last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "split=>//.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case: msg H2 H4=>t c H2 H4.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "by apply: (msg_spec_consumeE (cohVs C') H4 G4); rewrite (negbT X).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst rt=>//=; simpl in H2, H4; rewrite/QueryProtocol.receive_step (getStK _ Tr)/=.",
                        "VernacExtend",
                        "ba2719dc501742aa76dcf49e3d0807e16ff27bb7"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "case:ifP=>_; last by exists rq, rs.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "exists rq, ((from, head 0 msg) :: rs); split=>//rn.",
                        "VernacExtend",
                        "b105a5a6a6938b08779574ee0f0a7a32160133ed"
                    ]
                },
                {
                    "command": [
                        "by rewrite inE; case/orP; [case/eqP=>Z; subst; rewrite eqxx in X|move/Np].",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case:ifP=>_; last by exists rq, rs.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by exists (seq.rem (from, head 0 msg) rq), rs.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case: msg H2 H4=>t c H2 H4.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst rt=>//=; simpl in H2, H4; subst t; last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "constructor 1; split=>//.",
                        "VernacExtend",
                        "23440c5e7dafce40c7f40870e75f858ddaff3cb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by apply: (msg_spec_consumeE (cohVs C') H4 G4)=>/=; rewrite -(orbC true)/= orbC.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite/QueryProtocol.receive_step (getStK _ Tr)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case:ifP=>_; last by exists rq, rs.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by exists (seq.rem (this, head 0 c) rq), rs.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "constructor 2; split=>//.",
                        "VernacExtend",
                        "6394869e14fb35adade86bfc9f06194251870c23"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by apply: (no_msg_spec_consume (cohVs C') H4 G4).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite/QueryProtocol.receive_step (getStK _ Tr)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case:ifP=>X; last by move/negbT/negbNE/Np: X.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "exists rq, ((this, head 0 c) :: rs); split=>//rn.",
                        "VernacExtend",
                        "543648280d5ff18dbe895ed96f150191913b9be3"
                    ]
                },
                {
                    "command": [
                        "rewrite inE=>/orP[]; last by move/Np.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by case/eqP=>Z; subst rn; case:G4=>_/(_ _ _ H4)/eqP->.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "recv_lq_case2",
            "line_nb": 451,
            "steps": [
                {
                    "command": [
                        "move=>H1 H2 H4; case: M=>G1 G2 G3 G4[rq][rs][Tr]Np.",
                        "VernacExtend",
                        "a01b3d93f426ff68d360351709a5fa5af822af32"
                    ]
                },
                {
                    "command": [
                        "split=>//.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst rt=>//=; simpl in H2, H4; rewrite/QueryProtocol.receive_step (getStK _ Tr)/=.",
                        "VernacExtend",
                        "ba2719dc501742aa76dcf49e3d0807e16ff27bb7"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "case:ifP=>_; last by exists rq, rs.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "exists rq, ((from, head 0 msg) :: rs); split=>//rn.",
                        "VernacExtend",
                        "b105a5a6a6938b08779574ee0f0a7a32160133ed"
                    ]
                },
                {
                    "command": [
                        "case X: (this == from); last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by rewrite inE; case/orP; [case/eqP=>Z; subst; rewrite eqxx in X|move/Np].",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "move/eqP:X=>X; subst from.",
                        "VernacExtend",
                        "c9c387f758755b19c707f3d892f9182e27d29c93"
                    ]
                },
                {
                    "command": [
                        "by case: msg H2 H4=>t c/= H2 H4; move: (G3 _ _ _ H4); subst t.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case:ifP=>_; last by exists rq, rs.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by exists (seq.rem (from, head 0 msg) rq), rs.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "recv_lq_case3",
            "line_nb": 476,
            "steps": [
                {
                    "command": [
                        "move=>H1 H2 H4; case: M=>G1 G2 G3 G4[rq][rs][Tr]Np.",
                        "VernacExtend",
                        "a01b3d93f426ff68d360351709a5fa5af822af32"
                    ]
                },
                {
                    "command": [
                        "split=>//.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by rewrite /getStatelet findU eqxx(cohS C)/=/getLocal/= findU (negbTE N) in G1 *.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by apply: no_msg_from_to_consume'=>//; rewrite (cohVs C').",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx(cohS C)/=.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case: msg H2 H4=>t c H2 H4.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "by apply: (msg_spec_consumeE (cohVs C') H4 G4); rewrite N orbC.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "rewrite /getStatelet findU eqxx (cohS C)/=/holds_res_perms.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite /getLocal/=findU eqxx/= (cohVl (cohQ s C)).",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "case: H1;[|case=>//]; move=>Z; subst rt=>//=; simpl in H2, H4; rewrite/QueryProtocol.receive_step (getStK _ Tr)/=.",
                        "VernacExtend",
                        "ba2719dc501742aa76dcf49e3d0807e16ff27bb7"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "case:ifP=>_; last by exists rq, rs.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "exists rq, ((from, head 0 msg) :: rs); split=>//rn.",
                        "VernacExtend",
                        "b105a5a6a6938b08779574ee0f0a7a32160133ed"
                    ]
                },
                {
                    "command": [
                        "case X: (this == from); last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by rewrite inE; case/orP; [case/eqP=>Z; subst; rewrite eqxx in X|move/Np].",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "move/eqP:X=>X; subst from.",
                        "VernacExtend",
                        "c9c387f758755b19c707f3d892f9182e27d29c93"
                    ]
                },
                {
                    "command": [
                        "by case: msg H2 H4=>t c/= H2 H4; move: (G3 _ _ _ H4); subst t.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case:ifP=>_; last by exists rq, rs.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by exists (seq.rem (from, head 0 msg) rq), rs.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "send_req_obligation_1",
            "line_nb": 640,
            "steps": [
                {
                    "command": [
                        "by rewrite !InE; left.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "tryrecv_resp_obligation_1",
            "line_nb": 740,
            "steps": [
                {
                    "command": [
                        "case/andP:H=>/eqP=>->_; rewrite joinC domUn inE domPt inE eqxx andbC/=.",
                        "VernacExtend",
                        "82d53976234637e3f0907eb36cddf61d028c6306"
                    ]
                },
                {
                    "command": [
                        "case: validUn=>//=; rewrite ?validPt//.",
                        "VernacExtend",
                        "90a2acb29b7a5304b0ab6ba5269c420638ddef63"
                    ]
                },
                {
                    "command": [
                        "move=>k; rewrite !domPt !inE=>/eqP<-/eqP Z; subst lq.",
                        "VernacExtend",
                        "4d0a43c6802b8488a0d2b36dc56fdc2cbfb5466e"
                    ]
                },
                {
                    "command": [
                        "by move/negbTE: Lab_neq; rewrite eqxx.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "receive_resp_loop_obligation_1",
            "line_nb": 749,
            "steps": [
                {
                    "command": [
                        "by apply: with_spec x.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Defined.",
                        "VernacEndProof",
                        "88c0be54a50df4bb90276c075406fe442428eb9c"
                    ]
                }
            ]
        },
        {
            "name": "receive_resp_loop_obligation_2",
            "line_nb": 752,
            "steps": [
                {
                    "command": [
                        "case: b H=>[b|]; rewrite /recv_resp_inv !(rely_loc' _ H0); case=>H1 H2 H3.",
                        "VernacExtend",
                        "1dd33488047dbf70f12e12a749f59bfa780f9e04"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "move=>H4 ->; split=>//; try by apply: (query_init_rely _ _ _ H3 H0).",
                        "VernacExtend",
                        "2ab3077fe4f7463360f33ab9e380dfa60e20d299"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by apply: (core_state_stable _ _ _ _ H0 _ H2)=>//; case: H3.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "split=>//; try apply: (msg_story_rely _ _ _ _ _ _ _ H3 H0).",
                        "VernacExtend",
                        "6c20de5f2e691049c42e15e30f636426d64c3973"
                    ]
                },
                {
                    "command": [
                        "Defined.",
                        "VernacEndProof",
                        "88c0be54a50df4bb90276c075406fe442428eb9c"
                    ]
                }
            ]
        },
        {
            "name": "receive_resp_loop_obligation_5",
            "line_nb": 842,
            "steps": [
                {
                    "command": [
                        "apply:ghC=>i1[[reqs resp] d][L1 I1 M1 S1] C1.",
                        "VernacExtend",
                        "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
                    ]
                },
                {
                    "command": [
                        "apply: (gh_ex (g:=(reqs, resp, d))); apply: call_rule=>// res i2[Q1 Q2] C2.",
                        "VernacExtend",
                        "8d9dae45eeb3a769b8a865cef8ae476451f63802"
                    ]
                },
                {
                    "command": [
                        "by case: res Q1 Q2=>//=data _ [Q1 Q2 Z]; exists data.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        }
    ]
}