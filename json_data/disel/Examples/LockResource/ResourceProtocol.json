{
    "filename": "Examples/LockResource/ResourceProtocol.v",
    "coq_project": "disel",
    "vernac_cmds": [
        [
            "From mathcomp.ssreflect Require Import ssreflect ssrbool ssrnat eqtype ssrfun seq.",
            "VernacRequire",
            "037d2ffdc90053d89d1b918c36daaeab721d2d83"
        ],
        [
            "From mathcomp Require Import path.",
            "VernacRequire",
            "7c70f445c754a2a74114416d587d02e512c693e2"
        ],
        [
            "Require Import Eqdep.",
            "VernacRequire",
            "a499933d0898d4c0e235af789d9252f633426d20"
        ],
        [
            "Require Import Relation_Operators.",
            "VernacRequire",
            "5c09f52be79db9d019c350cc3153659920102fbb"
        ],
        [
            "From fcsl Require Import axioms pred prelude ordtype finmap pcm unionmap heap.",
            "VernacRequire",
            "576c96e5dbde92d8f1878b78d95e36aa980a0403"
        ],
        [
            "From DiSeL Require Import Freshness State EqTypeX Protocols Worlds NetworkSem Rely.",
            "VernacRequire",
            "26e11e2fa076d0e09ced8c25739f81efacc39c1d"
        ],
        [
            "From DiSeL Require Import Actions Injection Process Always HoareTriples InferenceRules.",
            "VernacRequire",
            "7ad4d509680a53857edde447eef7d606efef38a6"
        ],
        [
            "Set Implicit Arguments.",
            "VernacSetOption",
            "9e84ff8896f028601d8aded48c1d4aebe60aa584"
        ],
        [
            "Unset Strict Implicit.",
            "VernacUnsetOption",
            "2842adaf6959318f2042805935c46f513bdc0348"
        ],
        [
            "Import Prenex Implicits.",
            "VernacUnsetOption",
            "444e5f0be4b25d9b1fd556943a447ec10046d151"
        ],
        [
            "Module ResourceProtocol.",
            "VernacDefineModule",
            "173195468c04f3cff1a6b9c229b07fa383f85c5c"
        ],
        [
            "Section ResourceProtocol.",
            "VernacBeginSection",
            "4e2c16f8890ac923b04acc23f2a4b77e143e07e8"
        ],
        [
            "Variable server : nid.",
            "VernacAssumption",
            "939830d3b9ba288b0ef1759362bc062b4d4eb313"
        ],
        [
            "Variable clients : seq nid.",
            "VernacAssumption",
            "3a7c06cc0506a2002ac8fbf82573ea4d9a8d9fb8"
        ],
        [
            "Hypothesis Hnin : server \\notin clients.",
            "VernacAssumption",
            "3dae73b0ed8f4c9950a32db65ab0257a49374e76"
        ],
        [
            "Hypothesis Huniq : uniq clients.",
            "VernacAssumption",
            "8a5077790a51bbb1a4148fdb2a72ff84d086f9bb"
        ],
        [
            "Lemma client_not_server n : n \\in clients -> (n == server) = false.",
            "VernacStartTheoremProof",
            "d44979d9331bae7944113d951323d687ef43b9e2"
        ],
        [
            "move=>H.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "case E: (n == server)=>//.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "move/eqP in E.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "subst n.",
            "VernacExtend",
            "658ba7b0c6dcaa38fbd1dbf1ac8b11db0853c08e"
        ],
        [
            "move: (Hnin).",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "by rewrite H.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition nodes := [:: server] ++ clients.",
            "VernacDefinition",
            "d5cdfa38fdfc380eb3886eed1f66a6935cb82808"
        ],
        [
            "Lemma client_nodes n : n \\in clients -> n \\in nodes.",
            "VernacStartTheoremProof",
            "48f2ff40786f8e60fa8ccf9592d5509a5a57b554"
        ],
        [
            "by rewrite inE orbC/= =>->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Notation epoch := nat (only parsing).",
            "VernacSyntacticDefinition",
            "bbe0e4f5c4259f31f47bef383018b704caa2e597"
        ],
        [
            "Notation client := nid (only parsing).",
            "VernacSyntacticDefinition",
            "6ad44954aa19dfac8325ce6c7cc117d0d31464e4"
        ],
        [
            "Definition value := nat.",
            "VernacDefinition",
            "6b8e40c93737ae97b4f558b04b460fcf90241fa5"
        ],
        [
            "Inductive request := | Update of client * epoch * value | Read of client * epoch.",
            "VernacInductive",
            "fd73289d223cdec70ef1d2f4e7471bbb77abbcbe"
        ],
        [
            "Definition request_eq (r1 r2 : request) : bool := match r1, r2 with | Update x1, Update x2 => x1 == x2 | Read x1, Read x2 => x1 == x2 | _, _ => false end.",
            "VernacDefinition",
            "d948a420d265e748b20341a45bcab49fef5e2c40"
        ],
        [
            "Lemma request_eqP : Equality.axiom request_eq.",
            "VernacStartTheoremProof",
            "8279ef4bc3e06efc477cf383d077d1ab6e0b23a1"
        ],
        [
            "case=>x[]y; do? [by constructor]; apply: (iffP eqP); congruence.",
            "VernacExtend",
            "f40664180a7bf8433bccc39b885c83f562379e68"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Canonical request_eqMixin := EqMixin request_eqP.",
            "VernacDefinition",
            "208305fe1ef0e8a2cb47b65efe6f5c5ff0f36e60"
        ],
        [
            "Canonical request_eqType := Eval hnf in EqType request request_eqMixin.",
            "VernacDefinition",
            "241d419252c4c5924e76bc99a294966d2d766527"
        ],
        [
            "Record server_state := ServerState { current_epoch : epoch; current_value : value; outstanding : seq request }.",
            "VernacInductive",
            "17ff09fe5f556cb58a683a960d8b5c827b5ac3f6"
        ],
        [
            "Definition update_tag := 0.",
            "VernacDefinition",
            "5bb3ea4a6aedf870b56854765e0b80d42127d8a2"
        ],
        [
            "Definition update_response_tag := 1.",
            "VernacDefinition",
            "2cd36634e5835f67eb3aac9b0b920804ec0ac3e1"
        ],
        [
            "Definition read_tag := 2.",
            "VernacDefinition",
            "218ac18b9b26699bfd9f9793751d3072e82c4e2d"
        ],
        [
            "Definition read_response_tag := 3.",
            "VernacDefinition",
            "909c0e2630c5ec0608aab20afac2eff9a0f65443"
        ],
        [
            "Definition msg_from_client ms := (tag ms == update_tag /\\ exists e v, tms_cont ms = [:: e; v]) \\/ (tag ms == read_tag /\\ exists e, tms_cont ms = [:: e]).",
            "VernacDefinition",
            "f7c661a226031b66485b8343504bec5fe7e2a9db"
        ],
        [
            "Definition msg_from_server ms := (tag ms == update_response_tag /\\ exists e v b, tms_cont ms = [:: e; v; b]) \\/ (tag ms == read_response_tag /\\ ((exists e v, tms_cont ms = [:: e; v] ) \\/ (exists e, tms_cont ms = [:: e] ))).",
            "VernacDefinition",
            "7869804a3c4c4608424662e60cc03decf76b3318"
        ],
        [
            "Definition coh_msg pkt := if from pkt == server then to pkt \\in clients /\\ msg_from_server (content pkt) else if from pkt \\in clients then to pkt == server /\\ msg_from_client (content pkt) else False.",
            "VernacDefinition",
            "de8c3782248fe14c27ef6cbe70a606f7282b095e"
        ],
        [
            "Definition st := ptr_nat 1.",
            "VernacDefinition",
            "b14ba6b685a37e0333cb749673d4f4b0fb950659"
        ],
        [
            "Definition client_local_coh := [Pred h | h = Heap.empty].",
            "VernacDefinition",
            "6d4b51547ca0d3e4f56715784da269559fe4596b"
        ],
        [
            "Definition server_local_coh (ss : server_state) := [Pred h | h = st :-> ss].",
            "VernacDefinition",
            "23051e46165f46a16b1d74662570eac4f7225408"
        ],
        [
            "Definition local_coh (n : nid) := [Pred h | valid h /\\ if n == server then exists ss, server_local_coh ss h else n \\in clients /\\ client_local_coh h].",
            "VernacDefinition",
            "baaa76097b1705badc1b230fe02e01519f13de1e"
        ],
        [
            "Definition soup_coh : Pred soup := [Pred s | valid s /\\ forall m ms, find m s = Some ms -> active ms -> coh_msg ms].",
            "VernacDefinition",
            "6ab17cf64585a9b544a3d4f7632f50420c5007f0"
        ],
        [
            "Lemma soup_coh_post_msg d m: soup_coh (dsoup d) -> coh_msg m -> soup_coh (post_msg (dsoup d) m).1.",
            "VernacStartTheoremProof",
            "0347f51d25d40cf2850d95167b2d576072519bfb"
        ],
        [
            "move=>[H1 H2]Cm; split=>[|i ms/=]; first by rewrite valid_fresh.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite findUnL; last by rewrite valid_fresh.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case: ifP=>E; first by move/H2.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by move/findPt_inv=>[Z G]; subst i m.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition state_coh d := forall n, n \\in nodes -> local_coh n (getLocal n d).",
            "VernacDefinition",
            "b680bcbcf48bac8182767759964778edc8761a92"
        ],
        [
            "Definition resource_coh d := let: dl := dstate d in let: ds := dsoup d in [/\\ soup_coh ds , dom dl =i nodes , valid dl & state_coh d].",
            "VernacDefinition",
            "1c3c891b7912d6fe8b419a57196523d722d4afc9"
        ],
        [
            "Lemma l1 d: resource_coh d -> valid (dstate d).",
            "VernacStartTheoremProof",
            "9fc9e827503833a6e77a79e7086040b0f567f91f"
        ],
        [
            "by case.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma l2 d: resource_coh d -> valid (dsoup d).",
            "VernacStartTheoremProof",
            "9b925c42bd73c933ba29694bd70e0f481ace5f11"
        ],
        [
            "by case; case.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma l3 d: resource_coh d -> dom (dstate d) =i nodes.",
            "VernacStartTheoremProof",
            "477a04ccf24eb4f602c4bdf9f049a1779385c94b"
        ],
        [
            "by case.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition ResourceCoh := CohPred (CohPredMixin l1 l2 l3).",
            "VernacDefinition",
            "2d004c988de02fd36a875532655d9faa16382dac"
        ],
        [
            "Lemma consume_coh d m : ResourceCoh d -> soup_coh (consume_msg (dsoup d) m).",
            "VernacStartTheoremProof",
            "7796c3abd58d93d6a8901137120274aea753b5f5"
        ],
        [
            "move=>C; split=>[|m' msg]; first by apply: consume_valid; rewrite (cohVs C).",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case X: (m == m');[move/eqP: X=><-{m'}|].",
            "VernacExtend",
            "c4499c8f840c4e47d73ea32ebd509fa0e700d79a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case/(find_mark (cohVs C))=>tms[E]->{msg}.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "by case:(C); case=>_/(_ m tms E).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite eq_sym in X.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite (mark_other (cohVs C) X)=>E.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "by case:(C); case=>_; move/(_ m' msg E).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma coh_dom_upd this d s : this \\in nodes -> ResourceCoh d -> dom (upd this s (dstate d)) =i nodes.",
            "VernacStartTheoremProof",
            "1b59304f8b9833a536c7dc4a44eb44ef0fe89e3b"
        ],
        [
            "move=>D C z; rewrite -(cohDom C) domU inE/=.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "by case: ifP=>///eqP->{z}; rewrite (cohDom C) D; apply: cohVl C.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition server_send_step (ss : server_state) (to : nid) (tag : nat) (msg : seq nat) : server_state := if to \\in clients then if tag == update_response_tag then if msg is [:: e; v; b] then let: r := Update (to, e, v) in if current_epoch ss <= e then ServerState e v (seq.rem r (outstanding ss)) else ServerState (current_epoch ss) (current_value ss) (seq.rem r (outstanding ss)) else ss else if tag == read_response_tag then if msg is e :: _ then let: r := Read (to, e) in ServerState (current_epoch ss) (current_value ss) (seq.rem r (outstanding ss)) else ss else ss else ss.",
            "VernacDefinition",
            "14b8f7a5893337099f88d44fedda732c3f1a0118"
        ],
        [
            "Definition server_recv_step (ss : server_state) (from : nid) (mtag : nat) (mbody : seq nat) : server_state := if mtag == update_tag then if mbody is [:: e; v] then ServerState (current_epoch ss) (current_value ss) (cons (Update (from, e, v)) (outstanding ss)) else ss else if mbody is [:: e] then ServerState (current_epoch ss) (current_value ss) (cons (Read (from, e)) (outstanding ss)) else ss.",
            "VernacDefinition",
            "1fc322a859653b4ac7a6d3107c7c9921db881b6e"
        ],
        [
            "Section GetterLemmas.",
            "VernacBeginSection",
            "99e1e221861e328d8b2cf6e5d0f44dd319995533"
        ],
        [
            "Lemma getLocal_coh n d (C : ResourceCoh d): n \\in nodes -> valid (getLocal n d) /\\ if n == server then exists (ss : server_state), getLocal n d = st :-> ss else (n \\in clients) /\\ getLocal n d = Unit.",
            "VernacStartTheoremProof",
            "a08afac3353cf5575f642f296b95069a6e55c03e"
        ],
        [
            "by case: C=>_ _ _ /(_ n)G; rewrite /local_coh/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma getLocal_server_st_tp d (C : ResourceCoh d) s: find st (getLocal server d) = Some s -> dyn_tp s = server_state.",
            "VernacStartTheoremProof",
            "233febdd3b8248d5108642ee139138c96b861a67"
        ],
        [
            "have pf: server \\in nodes by rewrite inE eqxx.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "move: (getLocal_coh C pf); rewrite eqxx; move =>[V][s']Z; rewrite Z in V *.",
            "VernacExtend",
            "164dec8e666020d73c9ebc9fc08641d83bc05f4b"
        ],
        [
            "by rewrite findPt /=; case=><-.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition getSt_server d (C : ResourceCoh d) : server_state := match find st (getLocal server d) as f return _ = f -> _ with Some v => fun epf => icast (sym_eq (getLocal_server_st_tp C epf)) (dyn_val v) | _ => fun epf => ServerState 0 0 [::] end (erefl _).",
            "VernacDefinition",
            "4d9e51b5b48ccb1ac47b43e85f7c42fab868a55f"
        ],
        [
            "Lemma getSt_server_K d (C : ResourceCoh d) m : getLocal server d = st :-> m -> getSt_server C = m.",
            "VernacStartTheoremProof",
            "066a9264fb24b043f49c14a945b402ddd0aa7dd5"
        ],
        [
            "move=>E; rewrite /getSt_server/=.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "have pf: server \\in nodes by rewrite inE eqxx.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "have V: valid (getLocal server d) by case: (getLocal_coh C pf).",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "move: (getLocal_server_st_tp C); rewrite !E=>/= H.",
            "VernacExtend",
            "8261237f0cda1915a4077c28869831c5329103ce"
        ],
        [
            "by apply: eqc.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "End GetterLemmas.",
            "VernacEndSegment",
            "32b524b942e9fe7c68e1c79dd002d518d1494e64"
        ],
        [
            "Section ServerGenericSendTransitions.",
            "VernacBeginSection",
            "e7f252aa4a00e0089b8365c9e900673f0c2daab7"
        ],
        [
            "Definition HServ this to := (this == server /\\ to \\in clients).",
            "VernacDefinition",
            "eb8c5f46350596f01f016ae7f05071445d76a8f5"
        ],
        [
            "Variable the_tag : nat.",
            "VernacAssumption",
            "44cff55f934c46074924259929d9f9b457164df4"
        ],
        [
            "Variable prec : server_state -> nid -> seq nat -> Prop.",
            "VernacAssumption",
            "a35defabd90a93eadd4616ac4cf040db3ba68cba"
        ],
        [
            "Hypothesis prec_safe : forall this to s m, HServ this to -> prec s to m -> coh_msg (Msg (TMsg the_tag m) this to true).",
            "VernacAssumption",
            "19c2dcfd590953773f4ab8298c63b72d11b9778c"
        ],
        [
            "Notation coh := ResourceCoh.",
            "VernacSyntacticDefinition",
            "c9c806c24e8e6cab6c13bbd776ff420817e0535a"
        ],
        [
            "Definition server_send_safe (this n : nid) (d : dstatelet) (msg : seq nat) := HServ this n /\\ exists (C : coh d), prec (getSt_server C) n msg.",
            "VernacDefinition",
            "3e283a67d428f40850fae9d8782a077ebbd7cf72"
        ],
        [
            "Lemma server_send_safe_coh this to d m : server_send_safe this to d m -> coh d.",
            "VernacStartTheoremProof",
            "74b02b7300c0de255d21bf8bbe8fade79410047c"
        ],
        [
            "by case=>_[].",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma server_send_this_in this to : HServ this to -> this \\in nodes.",
            "VernacStartTheoremProof",
            "7c86f652cb181b208b0a94ee34dcd9cf7e7ba464"
        ],
        [
            "by case=>/eqP->; rewrite inE eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma server_send_to_in this to : HServ this to -> to \\in nodes.",
            "VernacStartTheoremProof",
            "aa770d23d1235112a0d8332a5e754cb37aa5be1f"
        ],
        [
            "by case=>_; rewrite /nodes inE/= orbC=>->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma server_send_safe_in this to d m : server_send_safe this to d m -> this \\in nodes /\\ to \\in nodes.",
            "VernacStartTheoremProof",
            "5f064cf777940d4c8e5a926d7867f55f735f96f5"
        ],
        [
            "by case=>[]=>G _; move/server_send_to_in: (G)->; case: G=>/eqP-> _; rewrite inE eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition server_step (this to : nid) (d : dstatelet) (msg : seq nat) (pf : server_send_safe this to d msg) := let C := server_send_safe_coh pf in let s := getSt_server C in Some (st :-> server_send_step s to the_tag msg).",
            "VernacDefinition",
            "a9912a28c7b8c13e417b4e3b257d00e623d3cc68"
        ],
        [
            "Lemma server_step_coh : s_step_coh_t coh the_tag server_step.",
            "VernacStartTheoremProof",
            "bd2646032100bd76ad32ee7f89a7d210f7428c11"
        ],
        [
            "move=>this to d msg pf h[]->{h}.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "have C : (coh d) by case: pf=>?[].",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "have E: this = server by case: pf=>[][]/eqP.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "split=>/=.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "apply: soup_coh_post_msg; first by case:(server_send_safe_coh pf).",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case: (pf)=>H[C']P/=.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "by apply: (prec_safe _ P).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by apply: coh_dom_upd=>//; case: (server_send_safe_in pf).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite validU; apply: cohVl C.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move=>n Ni.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "rewrite /local_coh/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /getLocal/=findU; case: ifP=>B; last by case: C=>_ _ _/(_ n Ni).",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "move/eqP: B=>Z; subst n this; rewrite eqxx (cohVl C)/=.",
            "VernacExtend",
            "ea2cf4d7233aa95e0b0f1bbf65e6c4bc215b2c14"
        ],
        [
            "split.",
            "VernacExtend",
            "55abc140132bd88981001ac656020469a8d503eb"
        ],
        [
            "by rewrite validPt.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by eexists.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma server_step_def this to d msg : server_send_safe this to d msg <-> exists b pf, @server_step this to d msg pf = Some b.",
            "VernacStartTheoremProof",
            "fbe7722440f0e515de09b9422469a52b6e955882"
        ],
        [
            "split=>[pf/=|]; last by case=>?[].",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "rewrite /server_step.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by eexists _, pf.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition server_send_trans := SendTrans server_send_safe_coh server_send_safe_in server_step_def server_step_coh.",
            "VernacDefinition",
            "8c993fff8ed1d611efb6ae7db8167359de6e12a8"
        ],
        [
            "End ServerGenericSendTransitions.",
            "VernacEndSegment",
            "59aeb622daa340419bf504635c5c689eba12af7c"
        ],
        [
            "Section ServerSendTransitions.",
            "VernacBeginSection",
            "cbaad1cdfd5f97e2927e767369293ef26ddc9c47"
        ],
        [
            "Definition server_send_update_response_prec (ss : server_state) to m := exists e v b e0 v0 outstanding, m = [:: e; v; b] /\\ let: r := Update (to, e, v) in r \\in outstanding /\\ ss = ServerState e0 v0 outstanding /\\ b = if e0 <= e then 1 else 0.",
            "VernacDefinition",
            "85e08ce689889e1de8533b09a4d41b25fa02bfe7"
        ],
        [
            "Program Definition server_send_update_response_trans : send_trans ResourceCoh := @server_send_trans update_response_tag server_send_update_response_prec _.",
            "VernacDefinition",
            "eb7e28977f985494ed5e4a99e497054665225bb9"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "case: H=>/eqP->H; rewrite /coh_msg eqxx; split=>//=.",
            "VernacExtend",
            "c4a46ac89a9c7997fc10e59922c13d5e3d2b0b23"
        ],
        [
            "case: H0=>[e][v][b][e0][v0][out][]->[U][_]->.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "rewrite /msg_from_server /= eqxx.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "left.",
            "VernacExtend",
            "06dad9fc5698018f3f1213205145fec906c612b1"
        ],
        [
            "split=>//.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "by eexists _, _, _.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition server_send_read_response_prec (ss : server_state) to m := exists e e0 v0 outstanding, ss = ServerState e0 v0 outstanding /\\ let: r := Read (to, e) in r \\in outstanding /\\ m = if e0 <= e then [:: e; v0 ] else [:: e].",
            "VernacDefinition",
            "1e8feed442b2eadb98e7f1c7ac8d8767c80171af"
        ],
        [
            "Program Definition server_send_read_response_trans : send_trans ResourceCoh := @server_send_trans read_response_tag server_send_read_response_prec _.",
            "VernacDefinition",
            "ed6fa1df661ae1fbd6a773e721a0db5498f167a7"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "case: H=>/eqP->H; rewrite /coh_msg eqxx; split=>//=.",
            "VernacExtend",
            "c4a46ac89a9c7997fc10e59922c13d5e3d2b0b23"
        ],
        [
            "case: H0=>[e][e0][v0][out][_][R]->.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "rewrite /msg_from_server /= eqxx.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "right.",
            "VernacExtend",
            "27e417a3497755767e1a1d6ba87753ecddaee6b7"
        ],
        [
            "split=>//.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "by case: ifP=>_; [left; eexists _,_|right; eexists].",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "End ServerSendTransitions.",
            "VernacEndSegment",
            "2f1009e949e7f7a45fa0d68dea6ac356aba7d0fa"
        ],
        [
            "Section ServerGenericReceiveTransitions.",
            "VernacBeginSection",
            "f5a239c3b24318bfae740a8559a088525ab93547"
        ],
        [
            "Notation coh := ResourceCoh.",
            "VernacSyntacticDefinition",
            "c9c806c24e8e6cab6c13bbd776ff420817e0535a"
        ],
        [
            "Variable the_tag : nat.",
            "VernacAssumption",
            "44cff55f934c46074924259929d9f9b457164df4"
        ],
        [
            "Variable server_recv_wf : forall d, coh d -> nid -> nid -> TaggedMessage -> bool.",
            "VernacAssumption",
            "ee754c0135136678be4771b84fcc0cb1cac7d569"
        ],
        [
            "Definition rs_step : receive_step_t coh := fun this (from : nid) (m : seq nat) d (pf : coh d) (pt : this \\in nodes) => if (this == server) then let s := getSt_server pf in st :-> server_recv_step s from the_tag m else getLocal this d.",
            "VernacDefinition",
            "db4c769de45f888069f212667c0be99bca665bac"
        ],
        [
            "Lemma rs_step_coh : r_step_coh_t server_recv_wf the_tag rs_step.",
            "VernacStartTheoremProof",
            "f3267923de53a15a73384a301fae198d006567d1"
        ],
        [
            "move=>d from this m C pf tms D F Wf T/=.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "rewrite /rs_step; case X: (this == server); last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "split=>/=; first by apply: consume_coh.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by apply: coh_dom_upd.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by rewrite validU; apply: cohVl C.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by move=>n Ni/=; case: (C)=>_ _ _/(_ n Ni)=>L; rewrite -(getLocalU)// (cohVl C).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "split=>/=; first by apply: consume_coh.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by apply: coh_dom_upd.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite validU; apply: cohVl C.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move=>n Ni/=; rewrite /local_coh/=.",
            "VernacExtend",
            "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
        ],
        [
            "rewrite /getLocal/=findU; case: ifP=>B/=; last by case: (C)=>_ _ _/(_ n Ni).",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "move/eqP: B X=>Z/eqP X; subst n this; rewrite eqxx (cohVl C)/=.",
            "VernacExtend",
            "ea2cf4d7233aa95e0b0f1bbf65e6c4bc215b2c14"
        ],
        [
            "split; first by rewrite validPt.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by eexists.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition rs_recv_trans := ReceiveTrans rs_step_coh.",
            "VernacDefinition",
            "b6035ae563d697cfff1f1538107cda24157b0b22"
        ],
        [
            "End ServerGenericReceiveTransitions.",
            "VernacEndSegment",
            "2f05d0e21fb2a7abbec8b93b38b40173c51973b6"
        ],
        [
            "Section ServerReceiveTransitions.",
            "VernacBeginSection",
            "a7a5a6a659fc3c73ec0b9860a88f39aa7fc5cc2d"
        ],
        [
            "Definition s_matches_tag (ss : server_state) (from : nid) t := (t == read_tag) || (t == update_tag).",
            "VernacDefinition",
            "4aa0cdf04a989a4c298e74014c500f3ab00f7430"
        ],
        [
            "Definition server_msg_wf d (C : ResourceCoh d) (this from : nid) := [pred m : TaggedMessage | s_matches_tag (getSt_server C) from (tag m)].",
            "VernacDefinition",
            "63f3881d64a559dccc3ea9fec63867882ce1ab7c"
        ],
        [
            "Definition server_recv_update_trans := rs_recv_trans update_tag server_msg_wf.",
            "VernacDefinition",
            "1a574a8af0e5597f130d38e631c09c44296eb092"
        ],
        [
            "Definition server_recv_read_trans := rs_recv_trans read_tag server_msg_wf.",
            "VernacDefinition",
            "bfbb1e3fcc164b09efe335604808993cdadb93c7"
        ],
        [
            "End ServerReceiveTransitions.",
            "VernacEndSegment",
            "02022a8b6e5df497f1ead5e3c674c06b3766a609"
        ],
        [
            "Section ClientGenericSendTransitions.",
            "VernacBeginSection",
            "9a0d21178a019e4a4a86fa7798a0420b85d8954e"
        ],
        [
            "Definition HClient this to := (this \\in clients /\\ to == server).",
            "VernacDefinition",
            "110632a659d086960f00d23a69c822d51098eab3"
        ],
        [
            "Variable the_tag : nat.",
            "VernacAssumption",
            "44cff55f934c46074924259929d9f9b457164df4"
        ],
        [
            "Variable prec : nid -> seq nat -> Prop.",
            "VernacAssumption",
            "ac066e128406d6e541e07cdb19cf514e10d4ad58"
        ],
        [
            "Hypothesis prec_safe : forall this to m, HClient this to -> prec to m -> msg_from_client (TMsg the_tag m).",
            "VernacAssumption",
            "0b7aae2d2248f3a6526bd0ff08f09e7eadcd6acc"
        ],
        [
            "Notation coh := ResourceCoh.",
            "VernacSyntacticDefinition",
            "c9c806c24e8e6cab6c13bbd776ff420817e0535a"
        ],
        [
            "Lemma client_send_this_in this to : HClient this to -> this \\in nodes.",
            "VernacStartTheoremProof",
            "ab8a92a51a4cc7303e1d57921d3f398bd49b40f9"
        ],
        [
            "case=>H _.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "by apply /client_nodes.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition client_send_safe (this n : nid) (d : dstatelet) (msg : seq nat) := [/\\ HClient this n, coh d & prec n msg].",
            "VernacDefinition",
            "f6775a866def2d93b881c25cf593e9e15bb4c733"
        ],
        [
            "Lemma client_send_safe_coh this to d m : client_send_safe this to d m -> coh d.",
            "VernacStartTheoremProof",
            "03417ad6e4295d63698eab77594716b6c59c0bea"
        ],
        [
            "by case.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma client_send_to_in this to : HClient this to -> to \\in nodes.",
            "VernacStartTheoremProof",
            "6c9c3f7a39e9374c7d2553b5599f5e99415fee6f"
        ],
        [
            "by case=>_/eqP->; rewrite /nodes inE/= eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma client_send_safe_in this to d m : client_send_safe this to d m -> this \\in nodes /\\ to \\in nodes.",
            "VernacStartTheoremProof",
            "21c23ce492ff20e6ce6dfc4ce4144fc7757d12fb"
        ],
        [
            "case=>HC C P.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "split.",
            "VernacExtend",
            "55abc140132bd88981001ac656020469a8d503eb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "exact: (client_send_this_in HC).",
            "VernacExtend",
            "ce637ff86bafca5d8359473e8c02af644dcbdc43"
        ],
        [
            "exact: (client_send_to_in HC).",
            "VernacExtend",
            "ce637ff86bafca5d8359473e8c02af644dcbdc43"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition client_step (this to : nid) (d : dstatelet) (msg : seq nat) (pf : client_send_safe this to d msg) := Some Heap.empty.",
            "VernacDefinition",
            "c2364bacb0e81c32b3e51af679539b2b419d4792"
        ],
        [
            "Lemma client_step_coh : s_step_coh_t coh the_tag client_step.",
            "VernacStartTheoremProof",
            "00e78936d12316c4d86af78619df024f03bd257a"
        ],
        [
            "move=>this to d msg pf h[]->{h}.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "have C : (coh d) by exact: (client_send_safe_coh pf).",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "have E: this \\in clients by case: pf=>[][].",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "split=>/=.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "apply: soup_coh_post_msg; first by case:(client_send_safe_coh pf).",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "case: (pf)=>H _ P/=.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "rewrite/coh_msg/= client_not_server// E.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "split; first by case: (H).",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by apply: (prec_safe H P).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by apply: coh_dom_upd=>//; case: (client_send_safe_in pf).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite validU; apply: cohVl C.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "move=>n Ni.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "rewrite /local_coh/=.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "rewrite /getLocal/=findU; case: ifP=>B; last by case: C=>_ _ _/(_ n Ni).",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "move/eqP: B=>Z; subst n.",
            "VernacExtend",
            "bb326bcdc9212df2647174d525914d8a4ad2e8a3"
        ],
        [
            "by rewrite client_not_server// (cohVl C)/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma client_step_def this to d msg : client_send_safe this to d msg <-> exists b pf, @client_step this to d msg pf = Some b.",
            "VernacStartTheoremProof",
            "5f8945be65f816bd83e9b8dde0d3d9ce523c37c0"
        ],
        [
            "split=>[pf/=|]; last by case=>?[].",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by eexists _, pf.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition client_send_trans := SendTrans client_send_safe_coh client_send_safe_in client_step_def client_step_coh.",
            "VernacDefinition",
            "073b0a3d38421d9b0d66d0eb489018c3b0e13fcb"
        ],
        [
            "End ClientGenericSendTransitions.",
            "VernacEndSegment",
            "50e2b816247f7c6b385eca76adabdebdd26a4d39"
        ],
        [
            "Section ClientSendTransitions.",
            "VernacBeginSection",
            "ccc802d9da346b5e511a74ee0937730f5d21f2fd"
        ],
        [
            "Definition client_send_update_prec (to : nid) (m : seq nat) := exists e v, m = [:: e; v].",
            "VernacDefinition",
            "6453173ce9f8e4fc20658a6a2e97e1c58f454ce0"
        ],
        [
            "Program Definition client_send_update_trans : send_trans ResourceCoh := @client_send_trans update_tag client_send_update_prec _.",
            "VernacDefinition",
            "cf20e2328d541a61c436df7e45c746b43666f484"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "by left.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition client_send_read_prec (to : nid) (m : seq nat) := exists e, m = [:: e].",
            "VernacDefinition",
            "136407474096238819dd7ce023adf6f874294657"
        ],
        [
            "Program Definition client_send_read_trans : send_trans ResourceCoh := @client_send_trans read_tag client_send_read_prec _.",
            "VernacDefinition",
            "7a234fe9bb54912d1537809650967cbaba295c8c"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "by right.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "End ClientSendTransitions.",
            "VernacEndSegment",
            "8f59041fa9fafb1c23bd2fe29f90849cb547045b"
        ],
        [
            "Section ClientGenericReceiveTransitions.",
            "VernacBeginSection",
            "056d3122fdbb3153915527b7495b0d3c8df921a5"
        ],
        [
            "Notation coh := ResourceCoh.",
            "VernacSyntacticDefinition",
            "c9c806c24e8e6cab6c13bbd776ff420817e0535a"
        ],
        [
            "Variable the_tag : nat.",
            "VernacAssumption",
            "44cff55f934c46074924259929d9f9b457164df4"
        ],
        [
            "Variable client_recv_wf : forall d, coh d -> nid -> nid -> TaggedMessage -> bool.",
            "VernacAssumption",
            "48d779088ced91d08d65ad800fc7624a7998df4b"
        ],
        [
            "Definition rc_step : receive_step_t coh := fun this (from : nid) (m : seq nat) d (pf : coh d) (pt : this \\in nodes) => getLocal this d.",
            "VernacDefinition",
            "9ee894510f017147132d68e65f83a82ec16c0ba3"
        ],
        [
            "Lemma rc_step_coh : r_step_coh_t client_recv_wf the_tag rc_step.",
            "VernacStartTheoremProof",
            "ed5e8d73db972f01feaa499b57da1fe9dac765a4"
        ],
        [
            "move=>d from this m C pf tms D F Wf T/=.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "rewrite /resource_coh.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "split=>/=.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "by apply: consume_coh.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by apply: coh_dom_upd.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by rewrite validU; apply: cohVl C.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "have Y: forall z : nat_eqType, z \\in nodes -> local_coh z (getLocal z d) by case: (C).",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "by move=>n Ni/=; move: (Y n Ni)=>L; rewrite -(getLocalU) // (cohVl C).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition rc_recv_trans := ReceiveTrans rc_step_coh.",
            "VernacDefinition",
            "286139f06c9958b81e1dfe5d86a05119cf326ace"
        ],
        [
            "End ClientGenericReceiveTransitions.",
            "VernacEndSegment",
            "c0431bab4699dbc2da2b9602f3d706e717620610"
        ],
        [
            "Section ClientReceiveTransitions.",
            "VernacBeginSection",
            "b9cdfa4ed16c15a0bc1511fe40498d27d1ff38b2"
        ],
        [
            "Definition client_msg_wf d (_ : ResourceCoh d) (this from : nid) := [pred m : TaggedMessage | true].",
            "VernacDefinition",
            "4b421dbd32767903771ec01493adbc1fa5d0a8bf"
        ],
        [
            "Definition client_recv_update_response_trans := rc_recv_trans update_response_tag client_msg_wf.",
            "VernacDefinition",
            "a5c9571d95caff3cb0314943e53c5fe9230533c5"
        ],
        [
            "Definition client_recv_read_response_trans := rc_recv_trans read_response_tag client_msg_wf.",
            "VernacDefinition",
            "4979433270ce332112d20f9ac831b1042de7757a"
        ],
        [
            "End ClientReceiveTransitions.",
            "VernacEndSegment",
            "d9fc6105d9d7e3933943f24410cad65fbc8ceca3"
        ],
        [
            "Section Protocol.",
            "VernacBeginSection",
            "695090f638b84556087f901bb7382b56fef1a388"
        ],
        [
            "Variable l : Label.",
            "VernacAssumption",
            "aca5957ed38b3e3b45d48e71df1841eb1fc9d5f0"
        ],
        [
            "Definition resource_sends := [:: server_send_update_response_trans; server_send_read_response_trans; client_send_update_trans; client_send_read_trans ].",
            "VernacDefinition",
            "ee726e02aea310ff07b16587299ee3bd84e6cede"
        ],
        [
            "Definition resource_receives := [:: server_recv_update_trans; server_recv_read_trans; client_recv_update_response_trans; client_recv_read_response_trans ].",
            "VernacDefinition",
            "44fed1ad4c90cff03de5e49a5942ed3eaea78fa8"
        ],
        [
            "Program Definition ResourceProtocol : protocol := @Protocol _ l _ resource_sends resource_receives _ _.",
            "VernacDefinition",
            "f2bf18788f28c49dc59b725c37b01e06cfcd8c14"
        ],
        [
            "End Protocol.",
            "VernacEndSegment",
            "655d51001a6e3448f8243ee8e6e2afc49fa5fce2"
        ],
        [
            "End ResourceProtocol.",
            "VernacEndSegment",
            "1e02858798deb54663e84d20f35275f0b170af76"
        ],
        [
            "Module Exports.",
            "VernacDefineModule",
            "d4a1114ec53f746523a7dec57823f7f03e51fa24"
        ],
        [
            "Section Exports.",
            "VernacBeginSection",
            "3d3d73b16827535e7d0c9fdb92a2f163a05b14f4"
        ],
        [
            "Definition ResourceProtocol := ResourceProtocol.",
            "VernacDefinition",
            "2ecbc0861c09b958c8516cfc0c506d0ff5b66a03"
        ],
        [
            "End Exports.",
            "VernacEndSegment",
            "71efedae7ccffd696e1ffe5d8ae6baa8a4484918"
        ],
        [
            "End Exports.",
            "VernacEndSegment",
            "71efedae7ccffd696e1ffe5d8ae6baa8a4484918"
        ],
        [
            "End ResourceProtocol.",
            "VernacEndSegment",
            "1e02858798deb54663e84d20f35275f0b170af76"
        ],
        [
            "Export ResourceProtocol.Exports.",
            "VernacImport",
            "99fea154930323c05a76ca11cf7ca76a2b8bbc8f"
        ]
    ],
    "proofs": [
        {
            "name": "client_not_server",
            "line_nb": 16,
            "steps": [
                {
                    "command": [
                        "move=>H.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "case E: (n == server)=>//.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "move/eqP in E.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "subst n.",
                        "VernacExtend",
                        "658ba7b0c6dcaa38fbd1dbf1ac8b11db0853c08e"
                    ]
                },
                {
                    "command": [
                        "move: (Hnin).",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "by rewrite H.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "client_nodes",
            "line_nb": 25,
            "steps": [
                {
                    "command": [
                        "by rewrite inE orbC/= =>->.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "request_eqP",
            "line_nb": 33,
            "steps": [
                {
                    "command": [
                        "case=>x[]y; do? [by constructor]; apply: (iffP eqP); congruence.",
                        "VernacExtend",
                        "f40664180a7bf8433bccc39b885c83f562379e68"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "soup_coh_post_msg",
            "line_nb": 51,
            "steps": [
                {
                    "command": [
                        "move=>[H1 H2]Cm; split=>[|i ms/=]; first by rewrite valid_fresh.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "rewrite findUnL; last by rewrite valid_fresh.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "case: ifP=>E; first by move/H2.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by move/findPt_inv=>[Z G]; subst i m.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "l1",
            "line_nb": 59,
            "steps": [
                {
                    "command": [
                        "by case.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "l2",
            "line_nb": 62,
            "steps": [
                {
                    "command": [
                        "by case; case.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "l3",
            "line_nb": 65,
            "steps": [
                {
                    "command": [
                        "by case.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "consume_coh",
            "line_nb": 69,
            "steps": [
                {
                    "command": [
                        "move=>C; split=>[|m' msg]; first by apply: consume_valid; rewrite (cohVs C).",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "case X: (m == m');[move/eqP: X=><-{m'}|].",
                        "VernacExtend",
                        "c4499c8f840c4e47d73ea32ebd509fa0e700d79a"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "case/(find_mark (cohVs C))=>tms[E]->{msg}.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "by case:(C); case=>_/(_ m tms E).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "rewrite eq_sym in X.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "rewrite (mark_other (cohVs C) X)=>E.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "by case:(C); case=>_; move/(_ m' msg E).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "coh_dom_upd",
            "line_nb": 79,
            "steps": [
                {
                    "command": [
                        "move=>D C z; rewrite -(cohDom C) domU inE/=.",
                        "VernacExtend",
                        "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
                    ]
                },
                {
                    "command": [
                        "by case: ifP=>///eqP->{z}; rewrite (cohDom C) D; apply: cohVl C.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "getLocal_coh",
            "line_nb": 86,
            "steps": [
                {
                    "command": [
                        "by case: C=>_ _ _ /(_ n)G; rewrite /local_coh/=.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "getLocal_server_st_tp",
            "line_nb": 89,
            "steps": [
                {
                    "command": [
                        "have pf: server \\in nodes by rewrite inE eqxx.",
                        "VernacExtend",
                        "406cde1174359c53bf162a2a18c4eede395555f9"
                    ]
                },
                {
                    "command": [
                        "move: (getLocal_coh C pf); rewrite eqxx; move =>[V][s']Z; rewrite Z in V *.",
                        "VernacExtend",
                        "164dec8e666020d73c9ebc9fc08641d83bc05f4b"
                    ]
                },
                {
                    "command": [
                        "by rewrite findPt /=; case=><-.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "getSt_server_K",
            "line_nb": 95,
            "steps": [
                {
                    "command": [
                        "move=>E; rewrite /getSt_server/=.",
                        "VernacExtend",
                        "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
                    ]
                },
                {
                    "command": [
                        "have pf: server \\in nodes by rewrite inE eqxx.",
                        "VernacExtend",
                        "406cde1174359c53bf162a2a18c4eede395555f9"
                    ]
                },
                {
                    "command": [
                        "have V: valid (getLocal server d) by case: (getLocal_coh C pf).",
                        "VernacExtend",
                        "406cde1174359c53bf162a2a18c4eede395555f9"
                    ]
                },
                {
                    "command": [
                        "move: (getLocal_server_st_tp C); rewrite !E=>/= H.",
                        "VernacExtend",
                        "8261237f0cda1915a4077c28869831c5329103ce"
                    ]
                },
                {
                    "command": [
                        "by apply: eqc.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "server_send_safe_coh",
            "line_nb": 110,
            "steps": [
                {
                    "command": [
                        "by case=>_[].",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "server_send_this_in",
            "line_nb": 113,
            "steps": [
                {
                    "command": [
                        "by case=>/eqP->; rewrite inE eqxx.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "server_send_to_in",
            "line_nb": 116,
            "steps": [
                {
                    "command": [
                        "by case=>_; rewrite /nodes inE/= orbC=>->.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "server_send_safe_in",
            "line_nb": 119,
            "steps": [
                {
                    "command": [
                        "by case=>[]=>G _; move/server_send_to_in: (G)->; case: G=>/eqP-> _; rewrite inE eqxx.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "server_step_def",
            "line_nb": 144,
            "steps": [
                {
                    "command": [
                        "split=>[pf/=|]; last by case=>?[].",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "rewrite /server_step.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by eexists _, pf.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "server_send_update_response_trans_obligation_1",
            "line_nb": 154,
            "steps": [
                {
                    "command": [
                        "case: H=>/eqP->H; rewrite /coh_msg eqxx; split=>//=.",
                        "VernacExtend",
                        "c4a46ac89a9c7997fc10e59922c13d5e3d2b0b23"
                    ]
                },
                {
                    "command": [
                        "case: H0=>[e][v][b][e0][v0][out][]->[U][_]->.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "rewrite /msg_from_server /= eqxx.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "left.",
                        "VernacExtend",
                        "06dad9fc5698018f3f1213205145fec906c612b1"
                    ]
                },
                {
                    "command": [
                        "split=>//.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "by eexists _, _, _.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "server_send_read_response_trans_obligation_1",
            "line_nb": 164,
            "steps": [
                {
                    "command": [
                        "case: H=>/eqP->H; rewrite /coh_msg eqxx; split=>//=.",
                        "VernacExtend",
                        "c4a46ac89a9c7997fc10e59922c13d5e3d2b0b23"
                    ]
                },
                {
                    "command": [
                        "case: H0=>[e][e0][v0][out][_][R]->.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "rewrite /msg_from_server /= eqxx.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "right.",
                        "VernacExtend",
                        "27e417a3497755767e1a1d6ba87753ecddaee6b7"
                    ]
                },
                {
                    "command": [
                        "split=>//.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "by case: ifP=>_; [left; eexists _,_|right; eexists].",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "rs_step_coh",
            "line_nb": 178,
            "steps": [
                {
                    "command": [
                        "move=>d from this m C pf tms D F Wf T/=.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "rewrite /rs_step; case X: (this == server); last first.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "split=>/=; first by apply: consume_coh.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by apply: coh_dom_upd.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by rewrite validU; apply: cohVl C.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "by move=>n Ni/=; case: (C)=>_ _ _/(_ n Ni)=>L; rewrite -(getLocalU)// (cohVl C).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "split=>/=; first by apply: consume_coh.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by apply: coh_dom_upd.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by rewrite validU; apply: cohVl C.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "move=>n Ni/=; rewrite /local_coh/=.",
                        "VernacExtend",
                        "057edeb0967475c7ea5e8c98c449ddc5613eddc1"
                    ]
                },
                {
                    "command": [
                        "rewrite /getLocal/=findU; case: ifP=>B/=; last by case: (C)=>_ _ _/(_ n Ni).",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "move/eqP: B X=>Z/eqP X; subst n this; rewrite eqxx (cohVl C)/=.",
                        "VernacExtend",
                        "ea2cf4d7233aa95e0b0f1bbf65e6c4bc215b2c14"
                    ]
                },
                {
                    "command": [
                        "split; first by rewrite validPt.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by eexists.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "client_send_this_in",
            "line_nb": 213,
            "steps": [
                {
                    "command": [
                        "case=>H _.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "by apply /client_nodes.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "client_send_safe_coh",
            "line_nb": 218,
            "steps": [
                {
                    "command": [
                        "by case.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "client_send_to_in",
            "line_nb": 221,
            "steps": [
                {
                    "command": [
                        "by case=>_/eqP->; rewrite /nodes inE/= eqxx.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "client_send_safe_in",
            "line_nb": 224,
            "steps": [
                {
                    "command": [
                        "case=>HC C P.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "split.",
                        "VernacExtend",
                        "55abc140132bd88981001ac656020469a8d503eb"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "exact: (client_send_this_in HC).",
                        "VernacExtend",
                        "ce637ff86bafca5d8359473e8c02af644dcbdc43"
                    ]
                },
                {
                    "command": [
                        "exact: (client_send_to_in HC).",
                        "VernacExtend",
                        "ce637ff86bafca5d8359473e8c02af644dcbdc43"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "client_step_def",
            "line_nb": 253,
            "steps": [
                {
                    "command": [
                        "split=>[pf/=|]; last by case=>?[].",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by eexists _, pf.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "client_send_update_trans_obligation_1",
            "line_nb": 262,
            "steps": [
                {
                    "command": [
                        "by left.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "client_send_read_trans_obligation_1",
            "line_nb": 267,
            "steps": [
                {
                    "command": [
                        "by right.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "rc_step_coh",
            "line_nb": 276,
            "steps": [
                {
                    "command": [
                        "move=>d from this m C pf tms D F Wf T/=.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "rewrite /resource_coh.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "split=>/=.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "by apply: consume_coh.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "by apply: coh_dom_upd.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "by rewrite validU; apply: cohVl C.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "have Y: forall z : nat_eqType, z \\in nodes -> local_coh z (getLocal z d) by case: (C).",
                        "VernacExtend",
                        "406cde1174359c53bf162a2a18c4eede395555f9"
                    ]
                },
                {
                    "command": [
                        "by move=>n Ni/=; move: (Y n Ni)=>L; rewrite -(getLocalU) // (cohVl C).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        }
    ]
}