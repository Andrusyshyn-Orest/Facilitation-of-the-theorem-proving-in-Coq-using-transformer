{
    "filename": "Examples/Calculator/CalculatorServerLib.v",
    "coq_project": "disel",
    "vernac_cmds": [
        [
            "From mathcomp.ssreflect Require Import ssreflect ssrbool ssrnat eqtype ssrfun seq.",
            "VernacRequire",
            "037d2ffdc90053d89d1b918c36daaeab721d2d83"
        ],
        [
            "From mathcomp Require Import path.",
            "VernacRequire",
            "7c70f445c754a2a74114416d587d02e512c693e2"
        ],
        [
            "Require Import Eqdep.",
            "VernacRequire",
            "a499933d0898d4c0e235af789d9252f633426d20"
        ],
        [
            "Require Import Relation_Operators.",
            "VernacRequire",
            "5c09f52be79db9d019c350cc3153659920102fbb"
        ],
        [
            "From fcsl Require Import axioms pred prelude ordtype finmap pcm unionmap heap.",
            "VernacRequire",
            "576c96e5dbde92d8f1878b78d95e36aa980a0403"
        ],
        [
            "From DiSeL Require Import Freshness State EqTypeX Protocols Worlds NetworkSem Rely.",
            "VernacRequire",
            "26e11e2fa076d0e09ced8c25739f81efacc39c1d"
        ],
        [
            "From DiSeL Require Import Actions Injection Process Always HoareTriples InferenceRules.",
            "VernacRequire",
            "7ad4d509680a53857edde447eef7d606efef38a6"
        ],
        [
            "From DiSeL Require Import InductiveInv While.",
            "VernacRequire",
            "b2799acd5c83a73c348fbe294fc708727612ded1"
        ],
        [
            "From DiSeL Require Import CalculatorProtocol CalculatorInvariant.",
            "VernacRequire",
            "18a39cf581095939d4d0eb2c7378de0e5e5bd410"
        ],
        [
            "From DiSeL Require Import CalculatorClientLib.",
            "VernacRequire",
            "d5dbe8b5a4919a2889bf3c72ed756a778f952bde"
        ],
        [
            "From DiSeL Require Import SeqLib.",
            "VernacRequire",
            "c398989d9278b2bbcd204e7797783d5200e869ba"
        ],
        [
            "Section CalculatorServerLib.",
            "VernacBeginSection",
            "f24ca62adfaa4bf29959a23aac9b6832ed67ec3b"
        ],
        [
            "Variable l : Label.",
            "VernacAssumption",
            "aca5957ed38b3e3b45d48e71df1841eb1fc9d5f0"
        ],
        [
            "Variable f : input -> option nat.",
            "VernacAssumption",
            "7d6ed1dcc87974f361ab4da38798ed33b492e0b4"
        ],
        [
            "Variable prec : input -> bool.",
            "VernacAssumption",
            "9233668e2a8a42a88ffb16b02b647817c44a74e6"
        ],
        [
            "Variables (cs cls : seq nid).",
            "VernacAssumption",
            "632ed5b803e1ae19ac7a01a2a14acec34a7a6f20"
        ],
        [
            "Notation nodes := (cs ++ cls).",
            "VernacSyntacticDefinition",
            "d77e9f1bb6c9e287d5336ff16eaedcecf8990e04"
        ],
        [
            "Hypothesis Huniq : uniq nodes.",
            "VernacAssumption",
            "1faa976fa582f3221263ad98e03da35018e1cef6"
        ],
        [
            "Notation cal := (CalculatorProtocol f prec cs cls l).",
            "VernacSyntacticDefinition",
            "fcbee21bed7171924d08b8662188055b6494046f"
        ],
        [
            "Notation sts := (snd_trans cal).",
            "VernacSyntacticDefinition",
            "0d8aa6a0ed746c64d0da4836ccdb462c6dd5d477"
        ],
        [
            "Notation rts := (rcv_trans cal).",
            "VernacSyntacticDefinition",
            "1b48a8d4000a1da718ae3dbe969d46aa0b8f755f"
        ],
        [
            "Notation W := (mkWorld cal).",
            "VernacSyntacticDefinition",
            "032bc1fc00ec78329192e7d4d8262b206bd26003"
        ],
        [
            "Variable sv : nid.",
            "VernacAssumption",
            "1761f6896e0be33b9c39830325c43d5f3e528a83"
        ],
        [
            "Hypothesis Hs : sv \\in cs.",
            "VernacAssumption",
            "d23f56a0cb73fee8a835d111a61c232b2408169d"
        ],
        [
            "Notation loc i := (getLocal sv (getStatelet i l)).",
            "VernacSyntacticDefinition",
            "06b2dc23db56ee4ea4aacd75d138fade92a1d41f"
        ],
        [
            "Export CalculatorProtocol.",
            "VernacImport",
            "d9b2275b4d2985a1300577d66ebaabc676df3699"
        ],
        [
            "Program Definition tryrecv_req_act := act (@tryrecv_action_wrapper W sv (fun k _ t b => (k == l) && (t == req)) _).",
            "VernacDefinition",
            "106421607cecc74463be94c793b5e968b2dea5fa"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "by case/andP:H=>/eqP->; rewrite domPt inE/=.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Program Definition tryrecv_req : {ps : reqs}, DHT [sv, W] (fun i => loc i = st :-> ps, fun (r : option perm) m => match r with | Some (from, t, args) => [/\\ loc m = st :-> ((from, sv, args) :: ps), prec args & from \\in cls] | None => loc m = st :-> ps end) := Do tryrecv_req_act.",
            "VernacDefinition",
            "4c3817804ef755c1a751ffb5a6493e381abf119a"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply: ghC=>i1 ps E1 C1.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: act_rule=>i2 R1; split=>//=; first by apply: (proj2 (rely_coh R1)).",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "move=>r i3 i4[_]/=St R3.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "case: St=>C2; case.",
            "VernacExtend",
            "b81540e58272476b2d0387a6ab1fa37b994590a4"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by move=>[]?->Z; subst i3;rewrite (rely_loc' _ R3) (rely_loc' _ R1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case=>k[m][tms][from][rt][pf'][[F]]H1 H2 H3/andP[/eqP Z]H4/= Z'->; subst k i3.",
            "VernacExtend",
            "686e50f8332a77f5c6dad92c28d8a10292769dbc"
        ],
        [
            "move: rt pf' (coh_s l C2) H1 H2 H3 H4 R3.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "rewrite prEq=>rt pf' cohs H1 H2 H3 H4 R3.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "case: H1 H4; last by case=>//=->.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "move=>Z _; subst rt; move: H3; rewrite /msg_wf/=/sr_wf=>->; split=>//.",
            "VernacExtend",
            "85a275a138cc8c7716a7032e9581c1bf47bdd92d"
        ],
        [
            "set d := (getStatelet i2 l).",
            "VernacExtend",
            "69a61e99b234580f7b41fa5b9655c87ba9a76f70"
        ],
        [
            "have P1: valid (dstate d) by apply: (cohVl cohs).",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "have P2: valid i2 by apply: (cohS (proj2 (rely_coh R1))).",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "have P3: l \\in dom i2 by rewrite -(cohD(proj2(rely_coh R1)))domPt inE/=.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "rewrite -(rely_loc' _ R1) in E1.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite (rely_loc' _ R3)/= locE//=/sr_step Hs/= (getStK cohs E1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case: (cohs)=>Cs _ _ _.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "move/esym: F=> F.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "by case: Cs=>_/(_ _ _ F); rewrite /cohMsg/= H2/=; case.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition receive_req_loop_cond (res : option (nid * input)) := res == None.",
            "VernacDefinition",
            "a7c8da879253ea3acefad49a2aeebe2fe5137468"
        ],
        [
            "Definition receive_req_loop_inv (ps : reqs) := fun (r : option (nid * input)) i => match r with | Some (from, args) => [/\\ loc i = st :-> ((from, sv, args) :: ps), prec args & from \\in cls] | None => loc i = st :-> ps end.",
            "VernacDefinition",
            "3b1ec7504b3560ff67ba75263c924adbba3ac157"
        ],
        [
            "Program Definition receive_req_loop : {ps : reqs}, DHT [sv, W] (fun i => loc i = st :-> ps, fun (r : option (nid * input)) m => exists from args, [/\\ r = Some (from, args), loc m = st :-> ((from, sv, args) :: ps), from \\in cls & prec args]) := Do _ (@while sv W _ _ receive_req_loop_cond receive_req_loop_inv _ (fun r => Do _ ( r <-- tryrecv_req; match r with | Some (from, _, args) => ret _ _ (Some (from, args)) | None => ret _ _ None end)) None).",
            "VernacDefinition",
            "6ea2304bbfc73a9567a6e89d5ba3551e217de0f8"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "by apply: with_spec x.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Defined.",
            "VernacEndProof",
            "88c0be54a50df4bb90276c075406fe442428eb9c"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "by move:H; rewrite /receive_req_loop_inv (rely_loc' _ H0).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply:ghC=>i1 ps/=[/eqP H1]L1 C1; subst r.",
            "VernacExtend",
            "08d670a539e781dc7cac7e6104b769c485324668"
        ],
        [
            "apply: step; apply: (gh_ex (g:=ps)).",
            "VernacExtend",
            "8d9dae45eeb3a769b8a865cef8ae476451f63802"
        ],
        [
            "apply: call_rule=>//r i2/=; case: r; last first.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by move=>L2 C2; apply: ret_rule=>i3 R2; rewrite -(rely_loc' _ R2) in L2.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case=>[[from to] args]E2 C2; apply: ret_rule=>i3 R2/=.",
            "VernacExtend",
            "d62e4c271de3f2a9ff5062b8b89d3c57d965c518"
        ],
        [
            "by rewrite (rely_loc' _ R2).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply: ghC=>i ps E1 C1; apply: (gh_ex (g:=ps)).",
            "VernacExtend",
            "8d9dae45eeb3a769b8a865cef8ae476451f63802"
        ],
        [
            "apply: call_rule=>//res m[].",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "rewrite /receive_req_loop_cond; case: res=>//=[[from args]]_ [H1 H2]C2.",
            "VernacExtend",
            "712d339e99ee17eb7d5033e19ac614eb3ca6b532"
        ],
        [
            "by exists from, args.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Program Definition blocking_receive_req : {ps : reqs}, DHT [sv, W] (fun i => loc i = st :-> ps, fun (r : nid * input) m => [/\\ loc m = st :-> ((r.1, sv, r.2) :: ps), r.1 \\in cls & prec r.2]) := Do _ (r <-- receive_req_loop; match r with | Some res => ret _ _ res | None => ret _ _ (0, [::]) end).",
            "VernacDefinition",
            "ee1bcecfb0e4d640f1c925d6d48b0afa9d8d2dfa"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply: ghC=>i ps E1 C1; apply: step; apply: (gh_ex (g:=ps)).",
            "VernacExtend",
            "6e77d60b6fe9e5152bca0bfa572494ee57c5c96d"
        ],
        [
            "apply: call_rule=>//res i2[from][args][Z]E2 H1 H2 C2.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "by subst res; apply: ret_rule=>i3 R2/=; rewrite (rely_loc' _ R2).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Program Definition send_ans_act to msg := act (@send_action_wrapper W cal sv l (prEq cal) (server_send_trans f prec cs cls) _ msg to).",
            "VernacDefinition",
            "b40013c160bbac378c3b1b10bf21fe8666a8666b"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "by rewrite /cal_sends /InMem/=; left.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Program Definition send_answer (to : nid) (args : seq nat) (ans : nat) : {ps : reqs}, DHT [sv, W] (fun i => [/\\ loc i = st :-> ps, to \\in cls, (to, sv, args) \\in ps & f args = Some ans], fun (r : seq nat) m => [/\\ loc m = st :-> (remove_elem ps (to, sv, args)) & r = ans :: args]) := Do send_ans_act to (ans :: args).",
            "VernacDefinition",
            "b07e59166a4e980e4ce954f2e950ef7f6c98d15d"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply: ghC=>i1 ps [L1]H1 H2 H3 C1.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: act_rule=>i2 R1.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "move: (proj2 (rely_coh R1))=>C2.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "case: (C2)=>_ _ _ _/(_ l); rewrite prEq=>C.",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "set d := (getStatelet i2 l).",
            "VernacExtend",
            "69a61e99b234580f7b41fa5b9655c87ba9a76f70"
        ],
        [
            "split=>//[|r i3 i4[Sf]St R3].",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "split=>//; first 1 last.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "by rewrite/Actions.can_send mem_cat Hs/= -(cohD C2)/= domPt/= inE eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "rewrite/Actions.filter_hooks umfilt0=>???.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "move => F.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "apply sym_eq in F.",
            "VernacExtend",
            "76cf18d85a6c70aff426f8c1ee06ccb93e71c674"
        ],
        [
            "move: F.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "move/find_some.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "by rewrite dom0.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "split=>//; split=>//.",
            "VernacExtend",
            "fbaa61af20867a5dfb8bb5213ca8048b258f8f3a"
        ],
        [
            "exists C; rewrite -(rely_loc' _ R1) in L1; rewrite (getStK C L1).",
            "VernacExtend",
            "5c45446a8969f2b60d8a549596e5f9f3690011d4"
        ],
        [
            "by apply/hasP; exists (to, sv, args)=>//=; rewrite H3 !eqxx.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "rewrite (rely_loc' _ R3)=>{R3}.",
            "VernacExtend",
            "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
        ],
        [
            "case: St=>->[b]/=[][]->->/=; split=>//.",
            "VernacExtend",
            "ba44c9d0281a02110ce54645304e6d990debd9c0"
        ],
        [
            "have P1: valid (dstate (getStatelet i2 l)).",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "by apply: (cohVl C).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "have P2: valid i2 by apply: (cohS (proj2 (rely_coh R1))).",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "have P3: l \\in dom i2 by rewrite -(cohD(proj2(rely_coh R1))) domPt inE/=.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "rewrite -(rely_loc' _ R1) in L1.",
            "VernacExtend",
            "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
        ],
        [
            "by rewrite (pf_irr (ss_safe_coh _ ) C) locE// (getStK C L1).",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "End CalculatorServerLib.",
            "VernacEndSegment",
            "2f845c2545cb4ef71bcf9a2307b6c9355f0b8583"
        ]
    ],
    "proofs": [
        {
            "name": "tryrecv_req_act_obligation_1",
            "line_nb": 27,
            "steps": [
                {
                    "command": [
                        "by case/andP:H=>/eqP->; rewrite domPt inE/=.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "tryrecv_req_obligation_1",
            "line_nb": 31,
            "steps": [
                {
                    "command": [
                        "apply: ghC=>i1 ps E1 C1.",
                        "VernacExtend",
                        "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
                    ]
                },
                {
                    "command": [
                        "apply: act_rule=>i2 R1; split=>//=; first by apply: (proj2 (rely_coh R1)).",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "move=>r i3 i4[_]/=St R3.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "case: St=>C2; case.",
                        "VernacExtend",
                        "b81540e58272476b2d0387a6ab1fa37b994590a4"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by move=>[]?->Z; subst i3;rewrite (rely_loc' _ R3) (rely_loc' _ R1).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case=>k[m][tms][from][rt][pf'][[F]]H1 H2 H3/andP[/eqP Z]H4/= Z'->; subst k i3.",
                        "VernacExtend",
                        "686e50f8332a77f5c6dad92c28d8a10292769dbc"
                    ]
                },
                {
                    "command": [
                        "move: rt pf' (coh_s l C2) H1 H2 H3 H4 R3.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "rewrite prEq=>rt pf' cohs H1 H2 H3 H4 R3.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "case: H1 H4; last by case=>//=->.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "move=>Z _; subst rt; move: H3; rewrite /msg_wf/=/sr_wf=>->; split=>//.",
                        "VernacExtend",
                        "85a275a138cc8c7716a7032e9581c1bf47bdd92d"
                    ]
                },
                {
                    "command": [
                        "set d := (getStatelet i2 l).",
                        "VernacExtend",
                        "69a61e99b234580f7b41fa5b9655c87ba9a76f70"
                    ]
                },
                {
                    "command": [
                        "have P1: valid (dstate d) by apply: (cohVl cohs).",
                        "VernacExtend",
                        "406cde1174359c53bf162a2a18c4eede395555f9"
                    ]
                },
                {
                    "command": [
                        "have P2: valid i2 by apply: (cohS (proj2 (rely_coh R1))).",
                        "VernacExtend",
                        "406cde1174359c53bf162a2a18c4eede395555f9"
                    ]
                },
                {
                    "command": [
                        "have P3: l \\in dom i2 by rewrite -(cohD(proj2(rely_coh R1)))domPt inE/=.",
                        "VernacExtend",
                        "406cde1174359c53bf162a2a18c4eede395555f9"
                    ]
                },
                {
                    "command": [
                        "rewrite -(rely_loc' _ R1) in E1.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by rewrite (rely_loc' _ R3)/= locE//=/sr_step Hs/= (getStK cohs E1).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case: (cohs)=>Cs _ _ _.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "move/esym: F=> F.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "by case: Cs=>_/(_ _ _ F); rewrite /cohMsg/= H2/=; case.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "receive_req_loop_obligation_1",
            "line_nb": 57,
            "steps": [
                {
                    "command": [
                        "by apply: with_spec x.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Defined.",
                        "VernacEndProof",
                        "88c0be54a50df4bb90276c075406fe442428eb9c"
                    ]
                }
            ]
        },
        {
            "name": "receive_req_loop_obligation_2",
            "line_nb": 60,
            "steps": [
                {
                    "command": [
                        "by move:H; rewrite /receive_req_loop_inv (rely_loc' _ H0).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "send_ans_act_obligation_1",
            "line_nb": 85,
            "steps": [
                {
                    "command": [
                        "by rewrite /cal_sends /InMem/=; left.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "send_answer_obligation_1",
            "line_nb": 89,
            "steps": [
                {
                    "command": [
                        "apply: ghC=>i1 ps [L1]H1 H2 H3 C1.",
                        "VernacExtend",
                        "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
                    ]
                },
                {
                    "command": [
                        "apply: act_rule=>i2 R1.",
                        "VernacExtend",
                        "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
                    ]
                },
                {
                    "command": [
                        "move: (proj2 (rely_coh R1))=>C2.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "case: (C2)=>_ _ _ _/(_ l); rewrite prEq=>C.",
                        "VernacExtend",
                        "ba44c9d0281a02110ce54645304e6d990debd9c0"
                    ]
                },
                {
                    "command": [
                        "set d := (getStatelet i2 l).",
                        "VernacExtend",
                        "69a61e99b234580f7b41fa5b9655c87ba9a76f70"
                    ]
                },
                {
                    "command": [
                        "split=>//[|r i3 i4[Sf]St R3].",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "split=>//; first 1 last.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "by rewrite/Actions.can_send mem_cat Hs/= -(cohD C2)/= domPt/= inE eqxx.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "rewrite/Actions.filter_hooks umfilt0=>???.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "move => F.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "apply sym_eq in F.",
                        "VernacExtend",
                        "76cf18d85a6c70aff426f8c1ee06ccb93e71c674"
                    ]
                },
                {
                    "command": [
                        "move: F.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "move/find_some.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "by rewrite dom0.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "split=>//; split=>//.",
                        "VernacExtend",
                        "fbaa61af20867a5dfb8bb5213ca8048b258f8f3a"
                    ]
                },
                {
                    "command": [
                        "exists C; rewrite -(rely_loc' _ R1) in L1; rewrite (getStK C L1).",
                        "VernacExtend",
                        "5c45446a8969f2b60d8a549596e5f9f3690011d4"
                    ]
                },
                {
                    "command": [
                        "by apply/hasP; exists (to, sv, args)=>//=; rewrite H3 !eqxx.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "rewrite (rely_loc' _ R3)=>{R3}.",
                        "VernacExtend",
                        "3c42b53d0efc26db114b00541ac5e7fcb29e6aeb"
                    ]
                },
                {
                    "command": [
                        "case: St=>->[b]/=[][]->->/=; split=>//.",
                        "VernacExtend",
                        "ba44c9d0281a02110ce54645304e6d990debd9c0"
                    ]
                },
                {
                    "command": [
                        "have P1: valid (dstate (getStatelet i2 l)).",
                        "VernacExtend",
                        "406cde1174359c53bf162a2a18c4eede395555f9"
                    ]
                },
                {
                    "command": [
                        "by apply: (cohVl C).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "have P2: valid i2 by apply: (cohS (proj2 (rely_coh R1))).",
                        "VernacExtend",
                        "406cde1174359c53bf162a2a18c4eede395555f9"
                    ]
                },
                {
                    "command": [
                        "have P3: l \\in dom i2 by rewrite -(cohD(proj2(rely_coh R1))) domPt inE/=.",
                        "VernacExtend",
                        "406cde1174359c53bf162a2a18c4eede395555f9"
                    ]
                },
                {
                    "command": [
                        "rewrite -(rely_loc' _ R1) in L1.",
                        "VernacExtend",
                        "2a624b3f8ed2cb60890f98119d86e3031fa09e35"
                    ]
                },
                {
                    "command": [
                        "by rewrite (pf_irr (ss_safe_coh _ ) C) locE// (getStK C L1).",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        }
    ]
}