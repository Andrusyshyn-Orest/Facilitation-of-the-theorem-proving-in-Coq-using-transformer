{
    "filename": "machine3/cardinal.v",
    "coq_project": "distributed-reference-counting",
    "vernac_cmds": [
        [
            "Require Export reduce.",
            "VernacRequire",
            "b667fdf6ad033d12d99b9c6957039f342680c4a4"
        ],
        [
            "Require Export DistributedReferenceCounting.machine3.machine.",
            "VernacRequire",
            "79126e26ce346e1f6326e27f3a629aac820090b0"
        ],
        [
            "Section COUNT_MESSAGE.",
            "VernacBeginSection",
            "4fba430d28c4a4d2232e548b719d52984d3e8956"
        ],
        [
            "Definition dec_predicate (m : Message) := match m with | dec => true | _ => false end.",
            "VernacDefinition",
            "ca420860a986636cba8e34c2c6970d5526259ad2"
        ],
        [
            "Definition inc_predicate (m : Message) := match m with | inc_dec _ => true | _ => false end.",
            "VernacDefinition",
            "f26067c3d3bc753e64360f2fdd4815d891e6a807"
        ],
        [
            "Variable s0 : Site.",
            "VernacAssumption",
            "0a02227b4f29783d409fcef0d1a1c1d730e7c8f0"
        ],
        [
            "Definition site_inc_predicate (m : Message) := match m with | inc_dec s => if eq_site_dec s s0 then true else false | _ => false end.",
            "VernacDefinition",
            "821538a88ebf44d00becfbfaace236b64d6f4bad"
        ],
        [
            "Definition copy_predicate (m : Message) := match m with | copy => true | _ => false end.",
            "VernacDefinition",
            "c43450b3253d6fb34ad1e7454edbcce127f58821"
        ],
        [
            "Definition dec_count (m : Message) := match m with | dec => 1%Z | _ => 0%Z end.",
            "VernacDefinition",
            "1c6ad6070a16d3dcdef8a7aa36c48b7571bae922"
        ],
        [
            "Definition inc_count (m : Message) := 0%Z.",
            "VernacDefinition",
            "4463ededd55abfc1e1743d56ed6674afa8782abb"
        ],
        [
            "Definition copy_count (m : Message) := match m with | copy => 1%Z | _ => 0%Z end.",
            "VernacDefinition",
            "bc6efc1c900dccdbbc083bcd9d7f7521fa881396"
        ],
        [
            "Definition cardinal_count := fun_sum Message dec_count (fun_sum Message inc_count copy_count).",
            "VernacDefinition",
            "ec6fe4ca72ecd231424b1c564000f92218db37ea"
        ],
        [
            "Definition cardinal := reduce Message cardinal_count.",
            "VernacDefinition",
            "d052e3637f3a9496eb99af5958d254e4c566f61b"
        ],
        [
            "Lemma disjoint_cardinal : forall q : queue Message, cardinal q = (reduce Message dec_count q + (reduce Message inc_count q + reduce Message copy_count q))%Z.",
            "VernacStartTheoremProof",
            "6f7a3375473b1b6600ee72fe5a039671a71920b4"
        ],
        [
            "intro.",
            "VernacExtend",
            "3999be354c758ba0d1866e0fcc78a7288779a224"
        ],
        [
            "rewrite <- disjoint_reduce.",
            "VernacExtend",
            "7919d4857ca473d1be88a41b6c4bd409baf817c3"
        ],
        [
            "rewrite <- disjoint_reduce.",
            "VernacExtend",
            "7919d4857ca473d1be88a41b6c4bd409baf817c3"
        ],
        [
            "unfold cardinal in |- *.",
            "VernacExtend",
            "bc68d98c5d76cd12bc39bbbc7814d3b1a3923282"
        ],
        [
            "unfold cardinal_count in |- *.",
            "VernacExtend",
            "86f54b327daf2df9e0a8ad557b0d7b3debbb943f"
        ],
        [
            "auto.",
            "VernacExtend",
            "1f09da0addd069b3b65326f8c71967acc1e985af"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma cardinal_first_out : forall (q : queue Message) (m : Message), first Message q = value Message m -> cardinal (first_out Message q) = (cardinal q - cardinal_count m)%Z.",
            "VernacStartTheoremProof",
            "de5875cf33be2067cd25cf49d7f7eedfde7f9b35"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "unfold cardinal in |- *.",
            "VernacExtend",
            "bc68d98c5d76cd12bc39bbbc7814d3b1a3923282"
        ],
        [
            "apply reduce_first_out.",
            "VernacExtend",
            "f533ad34eb9db34254da9b3a14ab1c039ed80d9b"
        ],
        [
            "auto.",
            "VernacExtend",
            "1f09da0addd069b3b65326f8c71967acc1e985af"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "End COUNT_MESSAGE.",
            "VernacEndSegment",
            "3c9600edcc6cdfe1eadabc02e31224ed1ed51554"
        ],
        [
            "Section SIG_WEIGHT.",
            "VernacBeginSection",
            "202ecadbaac728b60703fe24a5a477eb8a2adaee"
        ],
        [
            "Let Bag_of_message := Bag_of_Data Message.",
            "VernacDefinition",
            "ae5219007418b596da8f0360db422427368eb05e"
        ],
        [
            "Definition sigma_weight (bm : Bag_of_message) := sigma2_table Site LS LS (queue Message) (fun s1 s2 : Site => cardinal) bm.",
            "VernacDefinition",
            "30a2bae88774f66925d0a64f6ca7ca9c3e7c70f3"
        ],
        [
            "End SIG_WEIGHT.",
            "VernacEndSegment",
            "4041d5623d37160454e9b716bdef87d4f060937f"
        ]
    ],
    "proofs": [
        {
            "name": "disjoint_cardinal",
            "line_nb": 13,
            "steps": [
                {
                    "command": [
                        "intro.",
                        "VernacExtend",
                        "3999be354c758ba0d1866e0fcc78a7288779a224"
                    ]
                },
                {
                    "command": [
                        "rewrite <- disjoint_reduce.",
                        "VernacExtend",
                        "7919d4857ca473d1be88a41b6c4bd409baf817c3"
                    ]
                },
                {
                    "command": [
                        "rewrite <- disjoint_reduce.",
                        "VernacExtend",
                        "7919d4857ca473d1be88a41b6c4bd409baf817c3"
                    ]
                },
                {
                    "command": [
                        "unfold cardinal in |- *.",
                        "VernacExtend",
                        "bc68d98c5d76cd12bc39bbbc7814d3b1a3923282"
                    ]
                },
                {
                    "command": [
                        "unfold cardinal_count in |- *.",
                        "VernacExtend",
                        "86f54b327daf2df9e0a8ad557b0d7b3debbb943f"
                    ]
                },
                {
                    "command": [
                        "auto.",
                        "VernacExtend",
                        "1f09da0addd069b3b65326f8c71967acc1e985af"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "cardinal_first_out",
            "line_nb": 21,
            "steps": [
                {
                    "command": [
                        "intros.",
                        "VernacExtend",
                        "1b4df911c5412d25278e46f48402870ba987996b"
                    ]
                },
                {
                    "command": [
                        "unfold cardinal in |- *.",
                        "VernacExtend",
                        "bc68d98c5d76cd12bc39bbbc7814d3b1a3923282"
                    ]
                },
                {
                    "command": [
                        "apply reduce_first_out.",
                        "VernacExtend",
                        "f533ad34eb9db34254da9b3a14ab1c039ed80d9b"
                    ]
                },
                {
                    "command": [
                        "auto.",
                        "VernacExtend",
                        "1f09da0addd069b3b65326f8c71967acc1e985af"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        }
    ]
}