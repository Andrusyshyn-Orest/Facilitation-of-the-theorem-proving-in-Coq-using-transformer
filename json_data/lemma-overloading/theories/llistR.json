{
    "filename": "theories/llistR.v",
    "coq_project": "lemma-overloading",
    "vernac_cmds": [
        [
            "From mathcomp Require Import ssreflect ssrbool eqtype seq ssrfun.",
            "VernacRequire",
            "3ec7cfe37763da80879c8e8bec5902ce0f084ca3"
        ],
        [
            "From LemmaOverloading Require Import heaps rels hprop stmod stsep stlogR.",
            "VernacRequire",
            "25571e22a9f9dd15e92dab8d0ce70783b64c7ee2"
        ],
        [
            "Set Implicit Arguments.",
            "VernacSetOption",
            "9e84ff8896f028601d8aded48c1d4aebe60aa584"
        ],
        [
            "Unset Strict Implicit.",
            "VernacUnsetOption",
            "2842adaf6959318f2042805935c46f513bdc0348"
        ],
        [
            "Unset Printing Implicit Defensive.",
            "VernacUnsetOption",
            "444e5f0be4b25d9b1fd556943a447ec10046d151"
        ],
        [
            "Definition llist (T : Type) := ptr.",
            "VernacDefinition",
            "943c85d77ea34d5620f62dc025c8180fcde91017"
        ],
        [
            "Section LList.",
            "VernacBeginSection",
            "6dc5dbd9f1ca3360b8b1d76d765458b82ba720bd"
        ],
        [
            "Variable T : Type.",
            "VernacAssumption",
            "a15b17e37c4241158d544882375356c273dc93f2"
        ],
        [
            "Notation llist := (llist T).",
            "VernacSyntacticDefinition",
            "3a27178bb13b8c2b851b0ecb5f13a0a99c328c7d"
        ],
        [
            "Fixpoint lseg (p q : ptr) (xs : seq T) {struct xs} := if xs is x::xt then [Pred h | exists r, exists h', h = p :-> x :+ (p .+ 1 :-> r :+ h') /\\ h' \\In lseg r q xt] else [Pred h | p = q /\\ h = empty].",
            "VernacFixpoint",
            "39081c264fb221ccf21305d5f5935cd7d04537ab"
        ],
        [
            "Lemma lseg_add_last xs x p r h : h \\In lseg p r (rcons xs x) <-> exists q, exists h', h = h' :+ (q :-> x :+ q .+ 1 :-> r) /\\ h' \\In lseg p q xs.",
            "VernacStartTheoremProof",
            "24827c7409c99af64783cab1e6d397d53521d567"
        ],
        [
            "move: xs x p r h.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "elim=>[|x xs IH] y p r h /=; first by split; case=>x [_][->][<-] ->; hhauto.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "split.",
            "VernacExtend",
            "55abc140132bd88981001ac656020469a8d503eb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "case=>z [h1][->]; case/IH=>w [h2][->] H1.",
            "VernacExtend",
            "5887f8022a4f6389ac249140364feb69c4f18799"
        ],
        [
            "by exists w; exists (p :-> x :+ (p .+ 1 :-> z :+ h2)); hhauto.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case=>q [h1][->][z][h2][->] H1.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "exists z; exists (h2 :+ q :-> y :+ q .+ 1 :-> r).",
            "VernacExtend",
            "7739f0324af9d6833cf3947a0a2a2bd794a61302"
        ],
        [
            "by rewrite -!unA; split=>//; apply/IH; eauto.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma lseg_null xs q h : def h -> h \\In lseg null q xs -> [/\\ q = null, xs = [::] & h = empty].",
            "VernacStartTheoremProof",
            "eec1b062cf16d81079a4cf6f9476efe3911c9330"
        ],
        [
            "case:xs=>[|x xs] D /= H; first by case: H=><- ->.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by case: H D=>r [h'][->] _; rewrite defPtUn eq_refl.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma lseg_neq xs p q h : p != q -> h \\In lseg p q xs -> exists x, exists r, exists h', [/\\ xs = x :: behead xs, p :-> x :+ (p .+ 1 :-> r :+ h') = h & h' \\In lseg r q (behead xs)].",
            "VernacStartTheoremProof",
            "9766049a0b6499d6862f1048a6a57e7bde000052"
        ],
        [
            "case:xs=>[|x xs] /= H []; last by move=>y [h'][->] H1; hhauto.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by move=>E; rewrite E eq_refl in H.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma lseg_empty xs p q : empty \\In lseg p q xs -> p = q /\\ xs = [::].",
            "VernacStartTheoremProof",
            "356cd2e25226a7616a7c0e64a181012227f67107"
        ],
        [
            "case:xs=>[|x xs] /=; [by case | case=>r [h][]].",
            "VernacExtend",
            "f1e7d0d8fc3b66af0b854b63b04312300fbb5ea8"
        ],
        [
            "by move/esym; case/un0E; move/empbE; rewrite empPt.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma lseg_case xs p q h : h \\In lseg p q xs -> [/\\ p = q, xs = [::] & h = empty] \\/ exists x, exists r, exists h', [/\\ xs = x :: behead xs, h = p :-> x :+ (p .+ 1 :-> r :+ h') & h' \\In lseg r q (behead xs)].",
            "VernacStartTheoremProof",
            "adc93e6272f5cdd99f26b24eb6e152cdaf96cc5c"
        ],
        [
            "case:xs=>[|x xs] /=; first by case=>->->; left.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "by case=>r [h'][->] H; right; hhauto.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition lseq p := lseg p null.",
            "VernacDefinition",
            "18f7c986f91d7e91f2488c83c29035b959837c04"
        ],
        [
            "Lemma lseq_null xs h : def h -> h \\In lseq null xs -> xs = [::] /\\ h = empty.",
            "VernacStartTheoremProof",
            "66b598a2539dc7a8f6eca34a084900491ffd3a2e"
        ],
        [
            "by move=>D; case/(lseg_null D)=>_ ->.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma lseq_pos xs p h : p != null -> h \\In lseq p xs -> exists x, exists r, exists h', [/\\ xs = x :: behead xs, p :-> x :+ (p .+ 1 :-> r :+ h') = h & h' \\In lseq r (behead xs)].",
            "VernacStartTheoremProof",
            "6c8df74a53da79b262f239a84fe5e3cd94b5c524"
        ],
        [
            "by apply: lseg_neq.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Program Definition insert p x : STsep (fun i => exists xs, i \\In lseq p xs, fun y i m => forall xs, i \\In lseq p xs -> exists q, m \\In lseq q (x::xs) /\\ y = Val q) := Do (q <-- allocb p 2; q ::= x;; ret q).",
            "VernacDefinition",
            "6c66473dea67e87706ef9d5de9a38766b7e4f8af"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply: ghE=>// i xs H _ _.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: hstep=>q /=; rewrite unh0 -unA.",
            "VernacExtend",
            "56c014161b39aecfb3c54301c2409dba4e8e1857"
        ],
        [
            "by do 2![apply: hstep]=>/=; vauto.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Program Definition remove p : STsep (fun i => exists xs, i \\In lseq p xs, fun y i m => forall xs, i \\In lseq p xs -> exists q, m \\In lseq q (behead xs) /\\ y = Val q) := Do (If p == null then ret p else pnext <-- !(p .+ 1); dealloc p;; dealloc p .+ 1;; ret pnext).",
            "VernacDefinition",
            "33cde23a86e6b5396bddf56b0957672cb9587275"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply: ghE=>// i xs H _ D; move: H.",
            "VernacExtend",
            "86bb0d3d5ae27b38aac15f69d532d662f1518315"
        ],
        [
            "case: ifP=>H1.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by rewrite (eqP H1); case/(lseq_null D)=>-> ->; apply: hstep; vauto.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case/(lseq_pos (negbT H1))=>x [q][h][->] <- /= H2.",
            "VernacExtend",
            "e00fff71ff314c991514fc71c41a3556702e444a"
        ],
        [
            "by do 4![apply: hstep]=>/=; vauto; rewrite 2!un0h.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Definition shape_rev p s := [Pred h | h \\In lseq p.1 s.1 # lseq p.2 s.2].",
            "VernacDefinition",
            "306560191e5d1ab89b94f05959d02873f3db4c10"
        ],
        [
            "Definition revT : Type := forall p, STsep (fun i => exists ps, i \\In shape_rev p ps, fun y i m => forall ps, i \\In shape_rev p ps -> exists r, m \\In lseq r (rev ps.1 ++ ps.2) /\\ y = Val r).",
            "VernacDefinition",
            "cfed34e0860f1662e076179b4867969c8da22126"
        ],
        [
            "Program Definition reverse p : STsep (fun i => exists xs, i \\In lseq p xs, fun y i m => forall xs, i \\In lseq p xs -> exists q, m \\In lseq q (rev xs) /\\ y = Val q) := Do (Fix (fun (reverse : revT) p => (Do (If p.1 == null then ret p.2 else xnext <-- !p.1 .+ 1; p.1 .+ 1 ::= p.2;; reverse (xnext, p.1)))) (p, null)).",
            "VernacDefinition",
            "5c49c5985a2f7972f881cf3d9e17c937ad3df16a"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply: ghE=>// i [x1 x2][i1][i2][->] /= [H1 H2] _ D; case: eqP H1=>[->|E].",
            "VernacExtend",
            "20ec428e50c31e1399aee62c5a532bc8417a4b29"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by case/(lseq_null (defUnl D))=>->->; rewrite un0h; apply: hstep; vauto.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "case/lseq_pos=>[|xd [xn][h'][->] <- /= H1]; first by case: eqP.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "do ![apply: hstep]=>//=; rewrite -(unC h') -(unCA h') -!unA.",
            "VernacExtend",
            "82d53976234637e3f0907eb36cddf61d028c6306"
        ],
        [
            "apply: (val_ghR (t:=(behead x1, xd::x2))); last by vauto.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by move=>x m [r][/=]; rewrite rev_cons cat_rcons=>H [->] _; vauto.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by move=>e m [r][_].",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Next Obligation.",
            "VernacExtend",
            "de5e6a0a7a163af0d8463969c3ff4241d7d5bba0"
        ],
        [
            "apply: ghE=>// i xs H _ _.",
            "VernacExtend",
            "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
        ],
        [
            "apply: (val_ghR (t:=(xs, Nil T))); last by exists i; hhauto.",
            "VernacExtend",
            "3763a4b8db689af316a7372b722bb29806ab4fb6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "by move=>x m [r][/= H1][->] _; rewrite cats0 in H1 *; vauto.",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "by move=>e m [r][_].",
            "VernacExtend",
            "ee1746465e986ababa06bb4e96ee76be726c914a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "End LList.",
            "VernacEndSegment",
            "c39a28aafb3a05a999bfe1d8e862ce6ed6aef394"
        ]
    ],
    "proofs": [
        {
            "name": "lseg_add_last",
            "line_nb": 10,
            "steps": [
                {
                    "command": [
                        "move: xs x p r h.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "elim=>[|x xs IH] y p r h /=; first by split; case=>x [_][->][<-] ->; hhauto.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "split.",
                        "VernacExtend",
                        "55abc140132bd88981001ac656020469a8d503eb"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "case=>z [h1][->]; case/IH=>w [h2][->] H1.",
                        "VernacExtend",
                        "5887f8022a4f6389ac249140364feb69c4f18799"
                    ]
                },
                {
                    "command": [
                        "by exists w; exists (p :-> x :+ (p .+ 1 :-> z :+ h2)); hhauto.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case=>q [h1][->][z][h2][->] H1.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "exists z; exists (h2 :+ q :-> y :+ q .+ 1 :-> r).",
                        "VernacExtend",
                        "7739f0324af9d6833cf3947a0a2a2bd794a61302"
                    ]
                },
                {
                    "command": [
                        "by rewrite -!unA; split=>//; apply/IH; eauto.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "lseg_null",
            "line_nb": 21,
            "steps": [
                {
                    "command": [
                        "case:xs=>[|x xs] D /= H; first by case: H=><- ->.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by case: H D=>r [h'][->] _; rewrite defPtUn eq_refl.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "lseg_neq",
            "line_nb": 25,
            "steps": [
                {
                    "command": [
                        "case:xs=>[|x xs] /= H []; last by move=>y [h'][->] H1; hhauto.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by move=>E; rewrite E eq_refl in H.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "lseg_empty",
            "line_nb": 29,
            "steps": [
                {
                    "command": [
                        "case:xs=>[|x xs] /=; [by case | case=>r [h][]].",
                        "VernacExtend",
                        "f1e7d0d8fc3b66af0b854b63b04312300fbb5ea8"
                    ]
                },
                {
                    "command": [
                        "by move/esym; case/un0E; move/empbE; rewrite empPt.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "lseg_case",
            "line_nb": 33,
            "steps": [
                {
                    "command": [
                        "case:xs=>[|x xs] /=; first by case=>->->; left.",
                        "VernacExtend",
                        "3763a4b8db689af316a7372b722bb29806ab4fb6"
                    ]
                },
                {
                    "command": [
                        "by case=>r [h'][->] H; right; hhauto.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "lseq_null",
            "line_nb": 38,
            "steps": [
                {
                    "command": [
                        "by move=>D; case/(lseg_null D)=>_ ->.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "lseq_pos",
            "line_nb": 41,
            "steps": [
                {
                    "command": [
                        "by apply: lseg_neq.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "insert_obligation_1",
            "line_nb": 45,
            "steps": [
                {
                    "command": [
                        "apply: ghE=>// i xs H _ _.",
                        "VernacExtend",
                        "4bd6fa79b17bcd2bfb7af091fb325367a20385d6"
                    ]
                },
                {
                    "command": [
                        "apply: hstep=>q /=; rewrite unh0 -unA.",
                        "VernacExtend",
                        "56c014161b39aecfb3c54301c2409dba4e8e1857"
                    ]
                },
                {
                    "command": [
                        "by do 2![apply: hstep]=>/=; vauto.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "remove_obligation_1",
            "line_nb": 51,
            "steps": [
                {
                    "command": [
                        "apply: ghE=>// i xs H _ D; move: H.",
                        "VernacExtend",
                        "86bb0d3d5ae27b38aac15f69d532d662f1518315"
                    ]
                },
                {
                    "command": [
                        "case: ifP=>H1.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "by rewrite (eqP H1); case/(lseq_null D)=>-> ->; apply: hstep; vauto.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "case/(lseq_pos (negbT H1))=>x [q][h][->] <- /= H2.",
                        "VernacExtend",
                        "e00fff71ff314c991514fc71c41a3556702e444a"
                    ]
                },
                {
                    "command": [
                        "by do 4![apply: hstep]=>/=; vauto; rewrite 2!un0h.",
                        "VernacExtend",
                        "ee1746465e986ababa06bb4e96ee76be726c914a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        }
    ]
}