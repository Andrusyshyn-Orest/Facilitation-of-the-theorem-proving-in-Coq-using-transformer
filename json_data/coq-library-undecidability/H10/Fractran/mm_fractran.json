{
    "filename": "H10/Fractran/mm_fractran.v",
    "coq_project": "coq-library-undecidability",
    "vernac_cmds": [
        [
            "Require Import List Arith Omega Permutation.",
            "VernacRequire",
            "3d7bbb29b4049282fcb1473323519209c248a31e"
        ],
        [
            "Import ListNotations.",
            "VernacImport",
            "52647db2a3b752153a8cbd37039246f200bccdee"
        ],
        [
            "Require Import utils_tac utils_list utils_nat gcd prime rel_iter pos vec.",
            "VernacRequire",
            "0cc4ad7902f182e9204d565d64554561588c97d2"
        ],
        [
            "Require Import sss subcode mm_defs mm_no_self.",
            "VernacRequire",
            "8fb2ca5ec40615d32233b6b324e3dee84da60423"
        ],
        [
            "Require Import fractran_defs prime_seq.",
            "VernacRequire",
            "70fa89981d6cfa1ff55e26a3402f9f4c5d67a740"
        ],
        [
            "Set Implicit Arguments.",
            "VernacSetOption",
            "9e84ff8896f028601d8aded48c1d4aebe60aa584"
        ],
        [
            "Tactic Notation \"rew\" \"length\" := autorewrite with length_db.",
            "VernacExtend",
            "91bbe6b1948d427fab2374906017a1e5756180f4"
        ],
        [
            "Local Notation \"e #> x\" := (vec_pos e x).",
            "VernacNotation",
            "a00b516cc604e613f8bcdff2790853fb06f9eef1"
        ],
        [
            "Local Notation \"e [ v / x ]\" := (vec_change e x v).",
            "VernacNotation",
            "8af636d2065dc38191909bd3582d6571aa785a73"
        ],
        [
            "Local Notation \"I // s -1> t\" := (mm_sss I s t).",
            "VernacNotation",
            "3b55be44504fe619eb7156debebc3fb5a470fe2d"
        ],
        [
            "Local Notation \"P /MM/ s \u2192 t\" := (sss_step (@mm_sss _) P s t) (at level 70, no associativity).",
            "VernacNotation",
            "2405c6cfb4a760c50381623a2b724bada06523e1"
        ],
        [
            "Local Notation \"P /MM/ s -[ k ]-> t\" := (sss_steps (@mm_sss _) P k s t) (at level 70, no associativity).",
            "VernacNotation",
            "2254301bac66f22535008995f10b7f32017444bc"
        ],
        [
            "Local Notation \"P /MM/ s \u2193\" := (sss_terminates (@mm_sss _) P s) (at level 70, no associativity).",
            "VernacNotation",
            "03c735ea4247d638b397645863909a539e0197aa"
        ],
        [
            "Local Notation \"l /F/ x \u2192 y\" := (fractran_step l x y) (at level 70, no associativity).",
            "VernacNotation",
            "a3c5a4bfd39f94a2b1a3ed5563ae6c98fea217cf"
        ],
        [
            "Local Notation \"l /F/ x -[ k ]-> y\" := (fractran_steps l k x y) (at level 70, no associativity).",
            "VernacNotation",
            "3aaa22e834d99f5187f9916d49a8c5c1b7f6b61a"
        ],
        [
            "Set Implicit Arguments.",
            "VernacSetOption",
            "9e84ff8896f028601d8aded48c1d4aebe60aa584"
        ],
        [
            "Definition encode_state {n} (c : nat * vec nat n) := ps (fst c) * @exp n 0 (snd c).",
            "VernacDefinition",
            "d605f61ae02943cc5bfc8fbe716096f44ebed332"
        ],
        [
            "Definition encode_inc n i (u : pos n) := (ps (i + 1) * qs u, ps i).",
            "VernacDefinition",
            "a73462e1842d72aa2f9f79d372846151c621a012"
        ],
        [
            "Definition encode_dec n i (u : pos n) (_ : nat) := (ps (i + 1), ps i * qs u).",
            "VernacDefinition",
            "668279d08f2af3f4fef0ee0bafca75fed534a85c"
        ],
        [
            "Definition encode_dec2 n i (u : pos n) j := (ps j, ps i).",
            "VernacDefinition",
            "936d3294ecb714ab29be8571c4583c15c237ed77"
        ],
        [
            "Definition encode_one_instr m i (rho : mm_instr m) := match rho with | INC u => encode_inc i u :: nil | DEC u j => encode_dec i u j :: encode_dec2 i u j :: nil end.",
            "VernacDefinition",
            "72214377b36f63f5f4fec4def5fd755cc163c7b5"
        ],
        [
            "Fixpoint encode_mm_instr m i (l : list (mm_instr m)) : list (nat * nat) := match l with | nil => nil | rho :: l => encode_one_instr i rho ++ encode_mm_instr (S i) l end.",
            "VernacFixpoint",
            "91c124d7cabd106d9e98b07fd46d14fa167801d8"
        ],
        [
            "Fact encode_mm_instr_app m i l r : @encode_mm_instr m i (l++r) = encode_mm_instr i l++encode_mm_instr (length l+i) r.",
            "VernacStartTheoremProof",
            "c39429ab12eca6c0a9a5dd1dc9c110b806f31956"
        ],
        [
            "revert i; induction l as [ | rho l IHl ]; intros i; simpl; auto; rewrite IHl, app_ass.",
            "VernacExtend",
            "245f1a2bd2812e5bef5766a00e82e01141eab791"
        ],
        [
            "do 3 f_equal; omega.",
            "VernacExtend",
            "eda953ecf16e8b24822ca803e350ad24916fa0b4"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Fact encode_mm_instr_regular n i l : Forall (fun c => fst c <> 0 /\\ snd c <> 0) (@encode_mm_instr n i l).",
            "VernacStartTheoremProof",
            "e140578fe43f8f1fe3eb97d62c7a1e36dfeebaa3"
        ],
        [
            "revert i; induction l as [ | [ u | u j ] l IHl ]; intros i; simpl.",
            "VernacExtend",
            "6c78713671db5dfaefe478b60a3a3572b53ed0ce"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "constructor.",
            "VernacExtend",
            "3c77e6be855b5086df5e918bf2a0537e1010479a"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "constructor; auto; unfold encode_inc; simpl; split; [ apply Nat.neq_mul_0; split | ]; apply prime_neq_0; apply nthprime_prime.",
            "VernacExtend",
            "255f932745dc34937b094f438893e05b8e3f55d7"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "constructor; [ | constructor ]; auto; split; unfold encode_dec, encode_dec2; simpl.",
            "VernacExtend",
            "a824f0a66821c033e3dd44bf0380e5400fb7ffc5"
        ],
        [
            "2: apply Nat.neq_mul_0; split.",
            "VernacExtend",
            "c0b69bae0fa29ca538c6ea3ae039213e9e6c911f"
        ],
        [
            "all: apply prime_neq_0; apply nthprime_prime.",
            "VernacExtend",
            "93b8cc3c2260503f8bd85697c410f84a47a666b4"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Fact encode_mm_instr_regular' n i l : fractran_regular (@encode_mm_instr n i l).",
            "VernacStartTheoremProof",
            "a957cec0887eee318d543304bbf0c49aa90ce900"
        ],
        [
            "generalize (@encode_mm_instr_regular n i l); apply Forall_impl; tauto.",
            "VernacExtend",
            "1532ab14b8df30b01bb28f4efe3ceed56f4ca679"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Fact encode_mm_instr_in_inv n i P el c er : @encode_mm_instr n i P = el++c::er -> exists l rho r, P = l++rho::r /\\ In c (encode_one_instr (length l+i) rho).",
            "VernacStartTheoremProof",
            "b25539d61526f25c3a40181a6cf86a15af9de017"
        ],
        [
            "revert i el c er; induction P as [ | rho P IHP ]; simpl; intros i el c er H.",
            "VernacExtend",
            "baed3e6b80534d2dfdf4b6fe000573cfe5fd519e"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "destruct el; discriminate.",
            "VernacExtend",
            "350275d4173b484b6a413433e4e52175b3857e0c"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "destruct list_app_cons_eq_inv with (1 := H) as [ (m & H1 & H2) | (m & H1 & H2) ].",
            "VernacExtend",
            "0a73204efd52a42075126f28e2026ab1792f9f2b"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "destruct IHP with (1 := H2) as (l & rho' & r & G1 & G2).",
            "VernacExtend",
            "8ee6c4ffa9d29ac23365271ee349d3c070618ff4"
        ],
        [
            "exists (rho::l), rho', r; subst; split; auto.",
            "VernacExtend",
            "07a587500a14019b7c940ae05b797cbf6c547d4c"
        ],
        [
            "eq goal G2; do 2 f_equal; simpl; omega.",
            "VernacExtend",
            "eaa3e73f70ce4560c9abde8085c9e486027266ef"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "exists nil, rho, P; split; simpl; auto.",
            "VernacExtend",
            "e51275416cb6f1a2b167b0e2c6a8a7b56ef12b0d"
        ],
        [
            "rewrite <- H1; apply in_or_app; simpl; auto.",
            "VernacExtend",
            "a87756c3e17dc40eafed04186e2d079c90c50637"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Local Notation divides_mult_inv := prime_div_mult.",
            "VernacSyntacticDefinition",
            "1d9db5f6e4595b0233d43b104bdd0cf91f705938"
        ],
        [
            "Local Ltac inv H := inversion H; subst; clear H.",
            "VernacExtend",
            "c97986a0b72ce4926826ddcde11ceca2610dd30d"
        ],
        [
            "Opaque ps qs.",
            "VernacSetOpacity",
            "11e76664cc0ea217e70a1d252cc04a9f0508428a"
        ],
        [
            "Lemma divides_encode_state i k n v : divides (ps i) (@encode_state n (k,v)) -> i = k.",
            "VernacStartTheoremProof",
            "31994735f01e219c0380870c5bf8f7c3b4ded87c"
        ],
        [
            "unfold encode_state.",
            "VernacExtend",
            "6d1c62761866297fe9a0cf0b52d38b157230e4bc"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "induction v.",
            "VernacExtend",
            "10789bb90c6621e796afae189b61bc10f356257b"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "cbn in H.",
            "VernacExtend",
            "15a55ffe03d1d560c937edb6c7b0ef93c68ec81b"
        ],
        [
            "replace (ps k * 1) with (ps k) in H by omega.",
            "VernacExtend",
            "3fe496dff243c2ac77916c9f224abd59ff6350ef"
        ],
        [
            "now eapply primestream_divides in H.",
            "VernacExtend",
            "4649a9ff8a87a1a03a2ca82435ba8bb8ac884162"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "cbn in H.",
            "VernacExtend",
            "15a55ffe03d1d560c937edb6c7b0ef93c68ec81b"
        ],
        [
            "eapply divides_mult_inv in H as [ | [ | ] % divides_mult_inv ]; eauto.",
            "VernacExtend",
            "a257ec8a6ce877f5eb95b81739a9e6140eaaed79"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "now eapply primestream_divides in H.",
            "VernacExtend",
            "4649a9ff8a87a1a03a2ca82435ba8bb8ac884162"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "eapply divides_pow in H; eauto.",
            "VernacExtend",
            "0eaefb8ba3e552778aa75c8c261be7d93e4ebc47"
        ],
        [
            "now eapply ps_qs_div in H.",
            "VernacExtend",
            "744c87950ec7df42eacde1464ece8b8ee7a93fca"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "now eapply ps_exp in H.",
            "VernacExtend",
            "4a3378a7569e3030fbb030a9f834e0201df207c2"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma skip_steps m k l r k' (v v' : vec _ m) : @mm_no_self_loops m (k, l ++ r) -> encode_mm_instr (k + length l) r /F/ encode_state (k + length l,v) \u2192 encode_state (k',v') -> encode_mm_instr k (l ++ r) /F/ encode_state (k + length l,v) \u2192 encode_state (k',v').",
            "VernacStartTheoremProof",
            "3679a51880f25120d8a4e5c547f6125f31ce8b35"
        ],
        [
            "Proof with eauto; try omega.",
            "VernacProof",
            "a6d540f9be3de4afbb49de8607fb2b00e7ff06b3"
        ],
        [
            "revert k.",
            "VernacExtend",
            "9954edd748d0cf1057a2885d54db0597618ac6e0"
        ],
        [
            "induction l; cbn - [subcode] in *; intros.",
            "VernacExtend",
            "b24b1799547ce5be9339edd6a0d16b7a138855cd"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "revert H0.",
            "VernacExtend",
            "de3e4fca453928a41c450906d5d5626d573cfb55"
        ],
        [
            "ring_simplify (k + 0).",
            "VernacExtend",
            "8dc05c641312eb768c3b1d20e22febc9b187767b"
        ],
        [
            "eauto.",
            "VernacExtend",
            "d5f3a05ca887c29bb0b422fc64ae2775fea3935e"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "revert H0.",
            "VernacExtend",
            "de3e4fca453928a41c450906d5d5626d573cfb55"
        ],
        [
            "ring_simplify (k + S (length l)).",
            "VernacExtend",
            "1b2f44f2d6ac37844ec76e8fddf7f637298fcaa7"
        ],
        [
            "intros H1.",
            "VernacExtend",
            "ba8e6c21eb83603690828b8ea37ea25a6f2962f3"
        ],
        [
            "destruct a.",
            "VernacExtend",
            "3f53f61a7882a1bcc65ff705b5afc6c02a0dddf5"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "econstructor 2.",
            "VernacExtend",
            "0afaa5caa60da65665ad7c6652f183b0d4d3de3a"
        ],
        [
            "intros [[|] % divides_mult_inv | ] % divides_mult_inv; eauto.",
            "VernacExtend",
            "040af714ad004e6bc1e534d7c119aa469ccb07ae"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "eapply primestream_divides in H0; omega.",
            "VernacExtend",
            "3b7a46cc6c61e6553e18b53f2451e2e96fe9723c"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "now eapply ps_qs_div in H0.",
            "VernacExtend",
            "b046350dc152e5b9b6fe2703b0ddab7f11eae53c"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "eapply divides_encode_state in H0; omega.",
            "VernacExtend",
            "03315a3f179b634d9b984596b143ac1ed408b94a"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "specialize IHl with (k := S k).",
            "VernacExtend",
            "8d6021e123982079e84a4155581ff1bf8a7ad17f"
        ],
        [
            "revert IHl.",
            "VernacExtend",
            "088728631dc89ebb654300aef714fc1d48eb3cd4"
        ],
        [
            "cbn - [subcode].",
            "VernacExtend",
            "ae6ecf225f95e4af43b41520d29bd376097289a4"
        ],
        [
            "ring_simplify (S (k + length l)).",
            "VernacExtend",
            "ca49c08493e294f6310238a2de697eba3fa1f188"
        ],
        [
            "intros IHl.",
            "VernacExtend",
            "ced11d78d406e8adf443ee676d611f1f790b3f6a"
        ],
        [
            "eapply IHl.",
            "VernacExtend",
            "e7994a6d2257fc79514f2516c79bb794f54e2eca"
        ],
        [
            "2:exact H1.",
            "VernacExtend",
            "8dffe5ecf045c8bed13cd395830934a02cba42aa"
        ],
        [
            "intros ? ? ?.",
            "VernacExtend",
            "288cad254af8b9e4d528c95e5e756cb647bbaed6"
        ],
        [
            "eapply H.",
            "VernacExtend",
            "cf02e2445d256ebbbf0bbedfdc7f26983e04ec5a"
        ],
        [
            "eapply subcode_cons.",
            "VernacExtend",
            "02dc6e14d9547266c9041a5c83e2ed1e3d34c134"
        ],
        [
            "eassumption.",
            "VernacExtend",
            "909bfe8655bf95c07560744f733991163ce6cf7e"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "repeat econstructor 2.",
            "VernacExtend",
            "a63b0818ac5b7e768ba59e9ddc0bc3c945965e1b"
        ],
        [
            "2:unfold encode_dec2.",
            "VernacExtend",
            "2d3095d197e4116b57d0c6c1673379a9ada9a05a"
        ],
        [
            "2,3: cbn- [subcode].",
            "VernacExtend",
            "4fdb25ed0e01b2f81301a13ee48324b69626bbd5"
        ],
        [
            "1: intros [] % divides_mult_inv_l.",
            "VernacExtend",
            "5bbb2734850a07faf395c5883e5b76ed5a141178"
        ],
        [
            "2: intros [ | ] % divides_mult_inv...",
            "VernacExtend",
            "3bae9dd3e6a17a646c9c42d2e9514df9e2095552"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "eapply divides_mult_inv in H0 as [? | ?]...",
            "VernacExtend",
            "931a5515f2442cb91303667483fa071f89e5c329"
        ],
        [
            "eapply primestream_divides in H0...",
            "VernacExtend",
            "a8912d6266160f9d35d8b92c49770331ca3a69e2"
        ],
        [
            "eapply divides_encode_state in H0...",
            "VernacExtend",
            "1e81b40fe81959c0c5e21488173a209f3ee3f2b2"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "eapply primestream_divides in H0...",
            "VernacExtend",
            "a8912d6266160f9d35d8b92c49770331ca3a69e2"
        ],
        [
            "subst.",
            "VernacExtend",
            "ccc9cb848804101be22a0bb6c324861981c5c7f1"
        ],
        [
            "eapply (H n p).",
            "VernacExtend",
            "88bc87455b456e96a02af77d4280ee86447064f5"
        ],
        [
            "eauto.",
            "VernacExtend",
            "d5f3a05ca887c29bb0b422fc64ae2775fea3935e"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "eapply divides_encode_state in H0...",
            "VernacExtend",
            "1e81b40fe81959c0c5e21488173a209f3ee3f2b2"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "specialize (IHl (S k)).",
            "VernacExtend",
            "467a134026bb7beadc9e96fe65e17d70c229b85d"
        ],
        [
            "revert IHl.",
            "VernacExtend",
            "088728631dc89ebb654300aef714fc1d48eb3cd4"
        ],
        [
            "cbn - [subcode].",
            "VernacExtend",
            "ae6ecf225f95e4af43b41520d29bd376097289a4"
        ],
        [
            "ring_simplify (S (k + length l)).",
            "VernacExtend",
            "ca49c08493e294f6310238a2de697eba3fa1f188"
        ],
        [
            "intros IHl.",
            "VernacExtend",
            "ced11d78d406e8adf443ee676d611f1f790b3f6a"
        ],
        [
            "eapply IHl.",
            "VernacExtend",
            "e7994a6d2257fc79514f2516c79bb794f54e2eca"
        ],
        [
            "2:exact H1.",
            "VernacExtend",
            "8dffe5ecf045c8bed13cd395830934a02cba42aa"
        ],
        [
            "intros ? ? ?.",
            "VernacExtend",
            "288cad254af8b9e4d528c95e5e756cb647bbaed6"
        ],
        [
            "eapply H.",
            "VernacExtend",
            "cf02e2445d256ebbbf0bbedfdc7f26983e04ec5a"
        ],
        [
            "eapply subcode_cons.",
            "VernacExtend",
            "02dc6e14d9547266c9041a5c83e2ed1e3d34c134"
        ],
        [
            "eassumption.",
            "VernacExtend",
            "909bfe8655bf95c07560744f733991163ce6cf7e"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma qs_exp i n u (v : vec nat n) : divides (qs u) (encode_state (i,v)) <-> divides (qs u) (exp 0 v).",
            "VernacStartTheoremProof",
            "88e774e2ce8fe7711ddc5524e17cc9596ea85c67"
        ],
        [
            "split.",
            "VernacExtend",
            "55abc140132bd88981001ac656020469a8d503eb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "intros [ | ] % divides_mult_inv; eauto.",
            "VernacExtend",
            "226cf92778877250b6a70a7462b66dd53054131c"
        ],
        [
            "now eapply qs_ps_div in H.",
            "VernacExtend",
            "c5e5d1d25822d7e0e6db9ec8bdc235186e1080bf"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "unfold encode_state.",
            "VernacExtend",
            "6d1c62761866297fe9a0cf0b52d38b157230e4bc"
        ],
        [
            "now eapply divides_mult.",
            "VernacExtend",
            "8c9d592379363052a9cf525f0c8644045d41da95"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma qs_encode_state i n (u : pos n) (v : vec nat n) : divides (qs u) (encode_state (i,v)) <-> v #> u > 0.",
            "VernacStartTheoremProof",
            "a4f6c39f7c0a7c9f650f33c05d578ca493a1f3f0"
        ],
        [
            "rewrite qs_exp.",
            "VernacExtend",
            "57134c3131105f0d5250b9a74167036c03c3a04f"
        ],
        [
            "enough (forall i, divides (qs (i + u)) (exp i v) <-> v #> u > 0).",
            "VernacExtend",
            "6cbf2865a0ead511b0dc52aa4778919986e82d21"
        ],
        [
            "eapply H.",
            "VernacExtend",
            "cf02e2445d256ebbbf0bbedfdc7f26983e04ec5a"
        ],
        [
            "intros j.",
            "VernacExtend",
            "e0beb174e0dfa01671485f5d481c71f3f1896fce"
        ],
        [
            "induction v.",
            "VernacExtend",
            "10789bb90c6621e796afae189b61bc10f356257b"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "inversion u.",
            "VernacExtend",
            "0da7eb57b75d6c6b9d5472eefd02dd12459c42f6"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "revert u.",
            "VernacExtend",
            "b8fbbd6579431926bb3e715a9ef8426cf2634cbb"
        ],
        [
            "eapply pos.pos_S_invert.",
            "VernacExtend",
            "768ff022a23901c29a502d0f0a0f277da393c01d"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "cbn; rewrite pos2nat_fst, Nat.add_0_r.",
            "VernacExtend",
            "34b136ff908fc477f38cc011109878a702af071c"
        ],
        [
            "split.",
            "VernacExtend",
            "55abc140132bd88981001ac656020469a8d503eb"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "intros [ | ] % divides_mult_inv; eauto.",
            "VernacExtend",
            "226cf92778877250b6a70a7462b66dd53054131c"
        ],
        [
            "--",
            "VernacBullet",
            "ba168e40f4056f7e624b4823d483fd7320648256"
        ],
        [
            "destruct x; try omega.",
            "VernacExtend",
            "c25aa8c1b2bd42f9ea820f653f9b2647d234156b"
        ],
        [
            "cbn in H.",
            "VernacExtend",
            "15a55ffe03d1d560c937edb6c7b0ef93c68ec81b"
        ],
        [
            "apply divides_1_inv in H.",
            "VernacExtend",
            "3050d60767c9be04f09fb86acb2fce4cfc162f29"
        ],
        [
            "generalize (str_prime qs j); rewrite H.",
            "VernacExtend",
            "fbd24c6e16137f2c8effaeab98899196584499f6"
        ],
        [
            "intros [ [] _ ]; auto.",
            "VernacExtend",
            "38fe2f9706cc321a6d7d9d3b07a8c822cca8ad3f"
        ],
        [
            "--",
            "VernacBullet",
            "ba168e40f4056f7e624b4823d483fd7320648256"
        ],
        [
            "eapply qs_exp_div in H; now eauto.",
            "VernacExtend",
            "c23d824d0b572dbc5e6ad784d4daa485510363b4"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "destruct x.",
            "VernacExtend",
            "24973a7b5353196d2d5bd2a7e0fe5cfacd5f4460"
        ],
        [
            "inv H.",
            "VernacExtend",
            "711efba707a6a75ce2cd6ff4b80f031c0d63ab98"
        ],
        [
            "exists (qs j ^ x * exp (S j) v).",
            "VernacExtend",
            "b422cf10a7e226cefb5d3d421fe1697c6b5c8ba2"
        ],
        [
            "cbn.",
            "VernacExtend",
            "2de4be1c15e6f71a05c3809cbe562a67585b4b18"
        ],
        [
            "ring.",
            "VernacExtend",
            "baadd9fc4c175005af409bb466fcea9fab25b4e6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "cbn.",
            "VernacExtend",
            "2de4be1c15e6f71a05c3809cbe562a67585b4b18"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "rewrite <- IHv, pos2nat_nxt.",
            "VernacExtend",
            "e5c0b40962c444274051d84edd5aba63be7892a5"
        ],
        [
            "rewrite qs_shift with (m := 1).",
            "VernacExtend",
            "20a641a2bb06757a3a00ba21d0142d50feba503c"
        ],
        [
            "simpl.",
            "VernacExtend",
            "1b93169f4cf876d207c1fab22a2347202ab48d85"
        ],
        [
            "replace (j+S (pos2nat p)) with (S (j+p)); try tauto.",
            "VernacExtend",
            "4dd56121b0aaffdd4cb87f0208ad677b9de36345"
        ],
        [
            "2: rewrite (plus_comm _ (S _)); simpl; rewrite plus_comm; auto.",
            "VernacExtend",
            "7bff94b8abdd392cdaa2ae6b7cf1518261c20971"
        ],
        [
            "split; intros H.",
            "VernacExtend",
            "a22fcc98cae3c9e7feb477b9e8b0236d37ea8d65"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "eapply divides_mult_inv in H as [ | ]; eauto.",
            "VernacExtend",
            "0f755455744de09decef553dd9453b52832b7bf7"
        ],
        [
            "eapply divides_pow in H; auto.",
            "VernacExtend",
            "ac1345bc8c69fd99bee05aa15dbeb58c8232004a"
        ],
        [
            "eapply primestream_divides in H.",
            "VernacExtend",
            "f553f7acb970179ed6ba8b2f5830af0d9c72babc"
        ],
        [
            "omega.",
            "VernacExtend",
            "32c6c865d255452c7e10c77111456d1981cede39"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "eapply divides_mult.",
            "VernacExtend",
            "0ceb8bbcfc781de0240d59e5c8908d7f29054ed3"
        ],
        [
            "revert H; cbn; rewrite plus_n_Sm; eauto.",
            "VernacExtend",
            "76830a0fbf8df1d3b065f493770cc30f5eef9d1d"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma one_step_forward m i P i1 v1 i2 v2 : @mm_no_self_loops m (i,P) -> (i, P) /MM/ (i1, v1) \u2192 (i2,v2) -> encode_mm_instr i P /F/ encode_state (i1,v1) \u2192 encode_state (i2,v2).",
            "VernacStartTheoremProof",
            "73f445d8f4ca72ee3ec908d5b7701f4d1cb8dd4b"
        ],
        [
            "Proof with eauto; try omega.",
            "VernacProof",
            "a6d540f9be3de4afbb49de8607fb2b00e7ff06b3"
        ],
        [
            "intros HP (k & l & [ u | u j ] & r & v & ? & ? & ?); inversion H; subst; clear H.",
            "VernacExtend",
            "f811192cc45c30fff10aff18923e38fc12b9c90f"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "inversion H0; inversion H1; subst; clear H0 H1.",
            "VernacExtend",
            "34f393c62927d82346b61ac70e410dbfe1f81bf3"
        ],
        [
            "eapply skip_steps...",
            "VernacExtend",
            "0da26d8ec7129c34dd91678396ba9c9455db0a2d"
        ],
        [
            "econstructor.",
            "VernacExtend",
            "57e0061dc596e77c9d30460f8165a53e99efafc2"
        ],
        [
            "cbn.",
            "VernacExtend",
            "2de4be1c15e6f71a05c3809cbe562a67585b4b18"
        ],
        [
            "ring_simplify.",
            "VernacExtend",
            "31578f61427562191ce5389abf97dbf9985ea04c"
        ],
        [
            "replace (1 + (k + length l)) with (k + length l + 1) by omega.",
            "VernacExtend",
            "75c6c70c4b67bb547f3d13292f8a12551f13aca2"
        ],
        [
            "unfold encode_state, fst, snd.",
            "VernacExtend",
            "db7aae31b334d3f81ab449bea69ee5deafe6b17c"
        ],
        [
            "rewrite vec_prod_mult.",
            "VernacExtend",
            "326924c32ca245cd19ce3bcb5eb5a26bd4217ee2"
        ],
        [
            "rewrite Nat.add_0_r; ring.",
            "VernacExtend",
            "22c377791d45d6fbdc8b119c37ed7097c94299a5"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "inversion H0; inversion H1; subst; clear H0 H1.",
            "VernacExtend",
            "34f393c62927d82346b61ac70e410dbfe1f81bf3"
        ],
        [
            "all:eapply skip_steps...",
            "VernacExtend",
            "0bc39bec08f6a2c70c447b012768949da8c7f5cf"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "cbn.",
            "VernacExtend",
            "2de4be1c15e6f71a05c3809cbe562a67585b4b18"
        ],
        [
            "econstructor 2.",
            "VernacExtend",
            "0afaa5caa60da65665ad7c6652f183b0d4d3de3a"
        ],
        [
            "intros [] % divides_mult_inv_l...",
            "VernacExtend",
            "3dd0a3183c7cc509cde479d3449635dd0bdaf1cd"
        ],
        [
            "eapply divides_mult_inv in H0 as [ | ]...",
            "VernacExtend",
            "6726c32200fec9753e7a5c7cd1e9f1ea9f262d0f"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "now eapply qs_ps_div in H0.",
            "VernacExtend",
            "74387118ce8d109f13d7986369898dd86db0b975"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "eapply qs_encode_state in H0.",
            "VernacExtend",
            "54f983775286867738ea2f26861cb3d0278e7c20"
        ],
        [
            "omega.",
            "VernacExtend",
            "32c6c865d255452c7e10c77111456d1981cede39"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "unfold encode_dec2.",
            "VernacExtend",
            "e74f2c2ab4b1fb4760ad69eab4a4ef21600d4dd3"
        ],
        [
            "econstructor.",
            "VernacExtend",
            "57e0061dc596e77c9d30460f8165a53e99efafc2"
        ],
        [
            "unfold encode_state, fst, snd.",
            "VernacExtend",
            "db7aae31b334d3f81ab449bea69ee5deafe6b17c"
        ],
        [
            "ring.",
            "VernacExtend",
            "baadd9fc4c175005af409bb466fcea9fab25b4e6"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "econstructor.",
            "VernacExtend",
            "57e0061dc596e77c9d30460f8165a53e99efafc2"
        ],
        [
            "cbn.",
            "VernacExtend",
            "2de4be1c15e6f71a05c3809cbe562a67585b4b18"
        ],
        [
            "unfold encode_state, fst, snd.",
            "VernacExtend",
            "db7aae31b334d3f81ab449bea69ee5deafe6b17c"
        ],
        [
            "ring_simplify.",
            "VernacExtend",
            "31578f61427562191ce5389abf97dbf9985ea04c"
        ],
        [
            "replace (1 + (k + length l)) with (k + length l + 1) by omega.",
            "VernacExtend",
            "75c6c70c4b67bb547f3d13292f8a12551f13aca2"
        ],
        [
            "erewrite <- (vec_prod_div _ _ _ H4).",
            "VernacExtend",
            "8771586b224e34c64ad80370ebc22e4f94c29a96"
        ],
        [
            "rewrite Nat.add_0_r; ring.",
            "VernacExtend",
            "22c377791d45d6fbdc8b119c37ed7097c94299a5"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma steps_forward m i P i1 v1 i2 v2 k : @mm_no_self_loops m (i, P) -> (i, P) /MM/ (i1, v1) -[k]-> (i2,v2) -> encode_mm_instr i P /F/ encode_state (i1,v1) -[k]-> encode_state (i2,v2).",
            "VernacStartTheoremProof",
            "2b2c2655eeccc11ac3e5bee0ad641dfd9b7f9ebd"
        ],
        [
            "intros HP H.",
            "VernacExtend",
            "3db669a0a15c1df7b284d9e95618449fb6bb91b1"
        ],
        [
            "revert v1 i1 i2 H.",
            "VernacExtend",
            "ac4fd6a84f9baa0d2a71d7a7ace77ad7c6854023"
        ],
        [
            "induction k; intros v1 i1 i2 H; inversion H; subst; clear H; cbn.",
            "VernacExtend",
            "570d58eda739e3ce41eb80ee61b813311041db9d"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "reflexivity.",
            "VernacExtend",
            "5cd1ae044f26cd6d89a5a5147c1d4fc5fc719d83"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "destruct st2.",
            "VernacExtend",
            "0b8490ddc95990bdc39f4dee6223c463c95d4bbe"
        ],
        [
            "eapply one_step_forward in H1; eauto.",
            "VernacExtend",
            "0f05c9229e7f2689273b69782ce4329fd9ca279c"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Local Fact divides_from_eq x y t : x*y = t -> divides x t.",
            "VernacStartTheoremProof",
            "e1d4e39e67d3b30bc75b965b87eae6dd622cfab6"
        ],
        [
            "exists y; subst; ring.",
            "VernacExtend",
            "32cd9fb9b9b68c28c0da3fadf8f3a2ee99c2faba"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Local Fact prime_div_mult3 p x y z : prime p -> divides p (x*y*z) -> divides p x \\/ divides p y \\/ divides p z.",
            "VernacStartTheoremProof",
            "7e98a2a115aa6a21ce8546c86e72336816545715"
        ],
        [
            "intros H1 H2.",
            "VernacExtend",
            "1a279bc44908e178ace5c31cb5040905c4829477"
        ],
        [
            "apply prime_div_mult in H2; auto.",
            "VernacExtend",
            "748fb3c710c6c85ef66210bdc46463da59606041"
        ],
        [
            "destruct H2 as [ H2 | ]; auto.",
            "VernacExtend",
            "1e40b2c4c4f72b3f8d6783faa6a79f0dd6b38138"
        ],
        [
            "apply prime_div_mult in H2; tauto.",
            "VernacExtend",
            "87a56d7b5f1b2a5afc4d61b455a2c3b0d7f93cea"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Local Fact prime_div_mult4 p w x y z : prime p -> divides p (w*x*y*z) -> divides p w \\/ divides p x \\/ divides p y \\/ divides p z.",
            "VernacStartTheoremProof",
            "d2180f1d1afceb29221b1d545180212c9dd52781"
        ],
        [
            "intros H1 H2.",
            "VernacExtend",
            "1a279bc44908e178ace5c31cb5040905c4829477"
        ],
        [
            "apply prime_div_mult3 in H2; auto.",
            "VernacExtend",
            "05421ac5766803316959b50244e9d9d4e9ffffad"
        ],
        [
            "destruct H2 as [ H2 | H2 ]; try tauto.",
            "VernacExtend",
            "6899a33e35dbf5a1ce4533e1c973b83be45de5a2"
        ],
        [
            "apply prime_div_mult in H2; tauto.",
            "VernacExtend",
            "87a56d7b5f1b2a5afc4d61b455a2c3b0d7f93cea"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Local Hint Resolve encode_mm_instr_regular'.",
            "VernacHints",
            "f01f02da8c6bb51a461951d7205c8066a633700d"
        ],
        [
            "Lemma one_step_backward m i P i1 v1 st : @mm_no_self_loops m (i, P) -> encode_mm_instr i P /F/ @encode_state m (i1,v1) \u2192 st -> exists i2 v2, st = @encode_state m (i2,v2) /\\ (i, P) /MM/ (i1, v1) \u2192 (i2,v2).",
            "VernacStartTheoremProof",
            "5b72988e1164f81a4e27a798fe60b672c646c97d"
        ],
        [
            "intros H1 H2.",
            "VernacExtend",
            "1a279bc44908e178ace5c31cb5040905c4829477"
        ],
        [
            "destruct fractran_step_inv with (1 := H2) as (el & p & q & er & H3 & H4 & H5).",
            "VernacExtend",
            "94c28b6a921f1d00cb774d93df81d2925137dfb3"
        ],
        [
            "unfold encode_state in H5; simpl in H5.",
            "VernacExtend",
            "1754039a8e5e0299af1dd5141dc16309222b6d00"
        ],
        [
            "destruct encode_mm_instr_in_inv with (1 := H3) as (l & rho & r & -> & G2).",
            "VernacExtend",
            "badfa19e639c3755f64538b2e12c85457410d23e"
        ],
        [
            "assert (i1 = length l+i) as E.",
            "VernacExtend",
            "bad50bccfb7f39e35803aac7a634d3c5f734927e"
        ],
        [
            "{",
            "VernacSubproof",
            "184cabd02aa0a33f23f10474ea95789b1f149361"
        ],
        [
            "unfold encode_one_instr in G2.",
            "VernacExtend",
            "160ce05a2738f2cee00fd79141ae7070a6a05ccb"
        ],
        [
            "destruct rho as [ u | u j ]; unfold encode_inc, encode_dec, encode_dec2 in G2; [ destruct G2 as [ G2 | [] ] | destruct G2 as [ G2 | [ G2 | [] ] ] ]; inversion G2; subst p q; clear G2; repeat rewrite mult_assoc in H5.",
            "VernacExtend",
            "5478a6a6a2bf4afa4d3f27d357afa4ccec6905b7"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "apply divides_from_eq, prime_div_mult4 in H5; auto.",
            "VernacExtend",
            "7fbbb2b6a35085cdbf8028ad0876d2153003d6db"
        ],
        [
            "destruct H5 as [ H5 | [ H5 | [ H5 | H5 ] ] ].",
            "VernacExtend",
            "68e14af66e77b397e4a6b7937e6fff9853d74cc0"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "apply primestream_divides in H5; omega.",
            "VernacExtend",
            "3a0877bc71b7863efa49fe1f00796b6641290173"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "apply ps_qs_div in H5; tauto.",
            "VernacExtend",
            "56ea2b1a4ef4dd9e33f497eb5533fdfd2fc70a09"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "apply primestream_divides in H5; omega.",
            "VernacExtend",
            "3a0877bc71b7863efa49fe1f00796b6641290173"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "apply ps_exp in H5; tauto.",
            "VernacExtend",
            "cab7065568627f93676b606f468f8674e7d01e31"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "rewrite <- mult_assoc in H5.",
            "VernacExtend",
            "fb45d710497d46f238cde9088a3905259281edc8"
        ],
        [
            "apply divides_from_eq, prime_div_mult3 in H5; auto.",
            "VernacExtend",
            "6c1099eb9f51e203857152bdb50b842b6ca3fee8"
        ],
        [
            "destruct H5 as [ H5 | [ H5 | H5 ] ].",
            "VernacExtend",
            "5d993977824eb944b4eac3b081595d41dd1c8fde"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "apply primestream_divides in H5; omega.",
            "VernacExtend",
            "3a0877bc71b7863efa49fe1f00796b6641290173"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "apply primestream_divides in H5; omega.",
            "VernacExtend",
            "3a0877bc71b7863efa49fe1f00796b6641290173"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "apply ps_exp in H5; tauto.",
            "VernacExtend",
            "cab7065568627f93676b606f468f8674e7d01e31"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "apply divides_from_eq, prime_div_mult3 in H5; auto.",
            "VernacExtend",
            "6c1099eb9f51e203857152bdb50b842b6ca3fee8"
        ],
        [
            "destruct H5 as [ H5 | [ H5 | H5 ] ].",
            "VernacExtend",
            "5d993977824eb944b4eac3b081595d41dd1c8fde"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "apply primestream_divides in H5.",
            "VernacExtend",
            "8f867427b0dd1f9fccde7892976b086ae72073c0"
        ],
        [
            "exfalso; apply (H1 j u); auto.",
            "VernacExtend",
            "64cce07baacd80ea817f781a19a552a7771ad7bc"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "apply primestream_divides in H5; omega.",
            "VernacExtend",
            "3a0877bc71b7863efa49fe1f00796b6641290173"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "apply ps_exp in H5; tauto.",
            "VernacExtend",
            "cab7065568627f93676b606f468f8674e7d01e31"
        ],
        [
            "}",
            "VernacEndSubproof",
            "85f27874ef16421341373f4b062b6d1605043af9"
        ],
        [
            "destruct mm_sss_total with (ii := rho) (s := (i1,v1)) as ((i2 & v2) & H7).",
            "VernacExtend",
            "e776b10aed1879afaa752ebfb3f17fa287450fa7"
        ],
        [
            "exists i2, v2.",
            "VernacExtend",
            "b35d5954e7135a67d8868f7c7ee46eaa015b185b"
        ],
        [
            "assert ((i, l++rho::r) /MM/ (i1,v1) \u2192 (i2,v2)) as H8.",
            "VernacExtend",
            "2e24e99f9bbcade202b8c0771e05a6f07826f13a"
        ],
        [
            "{",
            "VernacSubproof",
            "184cabd02aa0a33f23f10474ea95789b1f149361"
        ],
        [
            "apply in_sss_step; auto; simpl; omega.",
            "VernacExtend",
            "246a5434e46c461f9c4ea2c5c083110308f5b936"
        ],
        [
            "}",
            "VernacEndSubproof",
            "85f27874ef16421341373f4b062b6d1605043af9"
        ],
        [
            "split; auto.",
            "VernacExtend",
            "fcd44a714bd12fa54b1c7746996e44dbac16df06"
        ],
        [
            "apply one_step_forward in H8; auto.",
            "VernacExtend",
            "ad470a277342c01c9e7afb40ace4e6b499911e14"
        ],
        [
            "revert H2 H8; apply fractran_step_fun; auto.",
            "VernacExtend",
            "92474dca041dc5f79c72fdd556fdc6501bdd2b6c"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma steps_backward m i P i1 v1 k st : @mm_no_self_loops m (i, P) -> encode_mm_instr i P /F/ encode_state (i1,v1) -[k]-> st -> exists i2 v2, (i, P) /MM/ (i1, v1) -[k]-> (i2,v2) /\\ st = encode_state (i2,v2).",
            "VernacStartTheoremProof",
            "aae12fd6a2f1f9c32dfe134c5a42be0c49b4defb"
        ],
        [
            "intros H1.",
            "VernacExtend",
            "ba8e6c21eb83603690828b8ea37ea25a6f2962f3"
        ],
        [
            "revert i1 v1 st; induction k as [ | k IHk ]; intros i1 v1 st H; simpl in H.",
            "VernacExtend",
            "e6a5d920e5edf3adbf5996f2e644b799329d62bb"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "subst; exists i1, v1; split; auto; constructor.",
            "VernacExtend",
            "cf1c10c777efe3f0fcc84da196fc8c1bb4bfcc20"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "destruct H as (st1 & H2 & H3).",
            "VernacExtend",
            "a42fb5d33d85654418795b3725b019aa02f16df2"
        ],
        [
            "destruct one_step_backward with (2 := H2) as (i2 & v2 & -> & H5); auto.",
            "VernacExtend",
            "2729f8be89e5ca9f7cdfb1b44967165d6c81f512"
        ],
        [
            "destruct IHk with (1 := H3) as (i3 & v3 & ? & ->).",
            "VernacExtend",
            "3f6d98cdb01494e8a16bd1c8085ecf7f7746a69b"
        ],
        [
            "exists i3, v3; split; auto.",
            "VernacExtend",
            "d3e7c09b0aae494ae159c16881c5a4d62d118f03"
        ],
        [
            "constructor 2 with (i2,v2); auto.",
            "VernacExtend",
            "71dd162234842a35da8b00c12e829e2d1b268970"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Theorem mm_fractran_simulation n P v : @mm_no_self_loops n (1, P) -> (1,P) /MM/ (1,v) \u2193 <-> encode_mm_instr 1 P /F/ ps 1 * exp 0 v \u2193.",
            "VernacStartTheoremProof",
            "486dcd6a40a93114abcd89d0f7b2b5422a7ad4e8"
        ],
        [
            "intros HP.",
            "VernacExtend",
            "0ec01adecbfe701ee27244a41ef8fa3cd51b55e4"
        ],
        [
            "change (ps 1* exp 0 v) with (encode_state (1,v)).",
            "VernacExtend",
            "0e5fd9005e1d9bd2d8d697bcaa7b0e5f106fab81"
        ],
        [
            "split.",
            "VernacExtend",
            "55abc140132bd88981001ac656020469a8d503eb"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "intros ((j,w) & (k & H1) & H2); simpl fst in *.",
            "VernacExtend",
            "be2ae280b33be3e6a459a19ed4d6e18b70b77ef2"
        ],
        [
            "exists (encode_state (j,w)); split.",
            "VernacExtend",
            "97df1cb5f24d139ca731be013f2ca9784abaa3c4"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "exists k; apply steps_forward in H1; auto.",
            "VernacExtend",
            "79a4d4fd8766ae418bbda517cfd9ee0dbbfa45f8"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "intros x Hx.",
            "VernacExtend",
            "4f408fcf0db2619f08da1108b4fc92384e2a5db3"
        ],
        [
            "destruct one_step_backward with (2 := Hx) as (i2 & v2 & -> & ?); auto.",
            "VernacExtend",
            "766baf21bceb344e3e0e7ef1600c9a7786699edb"
        ],
        [
            "revert H; apply sss_out_step_stall; auto.",
            "VernacExtend",
            "b931f4bb3d780130b92aff15419e8bbde7558b66"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "intros (st & (k & H1) & H2).",
            "VernacExtend",
            "e9919e97980e03d8136e769f78600e405d5e6cc5"
        ],
        [
            "destruct steps_backward with (2 := H1) as (i2 & v2 & H3 & ->); auto.",
            "VernacExtend",
            "8868632788d51d2ee83d40dde25afc15e223756d"
        ],
        [
            "exists (i2,v2); split.",
            "VernacExtend",
            "33e043af2a0020d42f7f8945e071f72c0bcd94ce"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "exists k; auto.",
            "VernacExtend",
            "930bbe24c94723a9e2f5da004090011e877c06d9"
        ],
        [
            "*",
            "VernacBullet",
            "8a329d054468e0c41ce333043e0978e30eed7b98"
        ],
        [
            "simpl fst.",
            "VernacExtend",
            "50f078e6e6cbec9c7f54271bc03d95b1580e0c02"
        ],
        [
            "destruct (in_out_code_dec i2 (1,P)) as [ H4 | H4 ]; auto; exfalso.",
            "VernacExtend",
            "979f1a9b02b932f893af86dd2af9376ca6a00589"
        ],
        [
            "destruct in_code_subcode with (1 := H4) as (rho & l & r & G1 & G2).",
            "VernacExtend",
            "bd0329b2bd2167bc5e5d61d6775357419f916952"
        ],
        [
            "destruct (mm_sss_total rho (i2,v2)) as ((i3,v3) & G3).",
            "VernacExtend",
            "76b0ff51c778389f82d1b93598833c192260aee3"
        ],
        [
            "apply H2 with (encode_state (i3,v3)).",
            "VernacExtend",
            "cd600df468e5dfb34a8b167833233768670880c4"
        ],
        [
            "apply one_step_forward; auto.",
            "VernacExtend",
            "77b055da8de2525dad7efeaed2ad2c4e966ad1f9"
        ],
        [
            "subst P; apply in_sss_step; auto.",
            "VernacExtend",
            "ff27c523188a58b905347e9fc883eacea500261a"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Theorem mm_fractran_n n (P : list (mm_instr n)) : { l | Forall (fun c => snd c <> 0) l /\\ forall v, (1,P) /MM/ (1,v) \u2193 <-> l /F/ ps 1 * exp 1 v \u2193 }.",
            "VernacStartTheoremProof",
            "738f89c494ed4adf0ff6ac95acd2bb1fc3362e0b"
        ],
        [
            "destruct mm_remove_self_loops with (P := P) as (Q & H1 & _ & H2).",
            "VernacExtend",
            "787c05e81ae8e343c6145462f3163f4df841048b"
        ],
        [
            "exists (encode_mm_instr 1 Q); split.",
            "VernacExtend",
            "35338ba360ddfc718647469bb1fd361acb797125"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "generalize (encode_mm_instr_regular 1 Q); apply Forall_impl; intros; tauto.",
            "VernacExtend",
            "18f7810cb298e1296f479d1ab7f93400b502cfa7"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "intros x.",
            "VernacExtend",
            "596d66edc70dae19981ed74f103fc0a865aec92c"
        ],
        [
            "rewrite H2, mm_fractran_simulation; auto.",
            "VernacExtend",
            "6c08031dbf3cb9eea2e725cffb81aab471d80c2d"
        ],
        [
            "simpl exp; rewrite Nat.add_0_r; tauto.",
            "VernacExtend",
            "9180ad0c4790c7f4ab3b210bb0f3c980689c146e"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Theorem mm_fractran n (P : list (mm_instr (S n))) : { l | forall x, (1,P) /MM/ (1,x##vec_zero) \u2193 <-> l /F/ ps 1 * qs 1^x \u2193 }.",
            "VernacStartTheoremProof",
            "085dad4436d59b854b92d0d1dd8d2ce72b206ce9"
        ],
        [
            "destruct mm_fractran_n with (P := P) as (l & _ & Hl).",
            "VernacExtend",
            "c016879cc53cfd4d945e86ea2399ca8787ea4fc6"
        ],
        [
            "exists l; intros x; rewrite Hl; simpl.",
            "VernacExtend",
            "809d97cf6ed547afc357ffcb6c3d1e94831b3bd7"
        ],
        [
            "rewrite exp_zero, Nat.mul_1_r; tauto.",
            "VernacExtend",
            "61b3478a32cf84148175a4ddaaf8d343de89a378"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ]
    ],
    "proofs": [
        {
            "name": "encode_mm_instr_app",
            "line_nb": 22,
            "steps": [
                {
                    "command": [
                        "revert i; induction l as [ | rho l IHl ]; intros i; simpl; auto; rewrite IHl, app_ass.",
                        "VernacExtend",
                        "245f1a2bd2812e5bef5766a00e82e01141eab791"
                    ]
                },
                {
                    "command": [
                        "do 3 f_equal; omega.",
                        "VernacExtend",
                        "eda953ecf16e8b24822ca803e350ad24916fa0b4"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "encode_mm_instr_regular'",
            "line_nb": 37,
            "steps": [
                {
                    "command": [
                        "generalize (@encode_mm_instr_regular n i l); apply Forall_impl; tauto.",
                        "VernacExtend",
                        "1532ab14b8df30b01bb28f4efe3ceed56f4ca679"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "encode_mm_instr_in_inv",
            "line_nb": 40,
            "steps": [
                {
                    "command": [
                        "revert i el c er; induction P as [ | rho P IHP ]; simpl; intros i el c er H.",
                        "VernacExtend",
                        "baed3e6b80534d2dfdf4b6fe000573cfe5fd519e"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "destruct el; discriminate.",
                        "VernacExtend",
                        "350275d4173b484b6a413433e4e52175b3857e0c"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "destruct list_app_cons_eq_inv with (1 := H) as [ (m & H1 & H2) | (m & H1 & H2) ].",
                        "VernacExtend",
                        "0a73204efd52a42075126f28e2026ab1792f9f2b"
                    ]
                },
                {
                    "command": [
                        "*",
                        "VernacBullet",
                        "8a329d054468e0c41ce333043e0978e30eed7b98"
                    ]
                },
                {
                    "command": [
                        "destruct IHP with (1 := H2) as (l & rho' & r & G1 & G2).",
                        "VernacExtend",
                        "8ee6c4ffa9d29ac23365271ee349d3c070618ff4"
                    ]
                },
                {
                    "command": [
                        "exists (rho::l), rho', r; subst; split; auto.",
                        "VernacExtend",
                        "07a587500a14019b7c940ae05b797cbf6c547d4c"
                    ]
                },
                {
                    "command": [
                        "eq goal G2; do 2 f_equal; simpl; omega.",
                        "VernacExtend",
                        "eaa3e73f70ce4560c9abde8085c9e486027266ef"
                    ]
                },
                {
                    "command": [
                        "*",
                        "VernacBullet",
                        "8a329d054468e0c41ce333043e0978e30eed7b98"
                    ]
                },
                {
                    "command": [
                        "exists nil, rho, P; split; simpl; auto.",
                        "VernacExtend",
                        "e51275416cb6f1a2b167b0e2c6a8a7b56ef12b0d"
                    ]
                },
                {
                    "command": [
                        "rewrite <- H1; apply in_or_app; simpl; auto.",
                        "VernacExtend",
                        "a87756c3e17dc40eafed04186e2d079c90c50637"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "divides_encode_state",
            "line_nb": 57,
            "steps": [
                {
                    "command": [
                        "unfold encode_state.",
                        "VernacExtend",
                        "6d1c62761866297fe9a0cf0b52d38b157230e4bc"
                    ]
                },
                {
                    "command": [
                        "intros.",
                        "VernacExtend",
                        "1b4df911c5412d25278e46f48402870ba987996b"
                    ]
                },
                {
                    "command": [
                        "induction v.",
                        "VernacExtend",
                        "10789bb90c6621e796afae189b61bc10f356257b"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "cbn in H.",
                        "VernacExtend",
                        "15a55ffe03d1d560c937edb6c7b0ef93c68ec81b"
                    ]
                },
                {
                    "command": [
                        "replace (ps k * 1) with (ps k) in H by omega.",
                        "VernacExtend",
                        "3fe496dff243c2ac77916c9f224abd59ff6350ef"
                    ]
                },
                {
                    "command": [
                        "now eapply primestream_divides in H.",
                        "VernacExtend",
                        "4649a9ff8a87a1a03a2ca82435ba8bb8ac884162"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "cbn in H.",
                        "VernacExtend",
                        "15a55ffe03d1d560c937edb6c7b0ef93c68ec81b"
                    ]
                },
                {
                    "command": [
                        "eapply divides_mult_inv in H as [ | [ | ] % divides_mult_inv ]; eauto.",
                        "VernacExtend",
                        "a257ec8a6ce877f5eb95b81739a9e6140eaaed79"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "now eapply primestream_divides in H.",
                        "VernacExtend",
                        "4649a9ff8a87a1a03a2ca82435ba8bb8ac884162"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "eapply divides_pow in H; eauto.",
                        "VernacExtend",
                        "0eaefb8ba3e552778aa75c8c261be7d93e4ebc47"
                    ]
                },
                {
                    "command": [
                        "now eapply ps_qs_div in H.",
                        "VernacExtend",
                        "744c87950ec7df42eacde1464ece8b8ee7a93fca"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "now eapply ps_exp in H.",
                        "VernacExtend",
                        "4a3378a7569e3030fbb030a9f834e0201df207c2"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "qs_exp",
            "line_nb": 140,
            "steps": [
                {
                    "command": [
                        "split.",
                        "VernacExtend",
                        "55abc140132bd88981001ac656020469a8d503eb"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "intros [ | ] % divides_mult_inv; eauto.",
                        "VernacExtend",
                        "226cf92778877250b6a70a7462b66dd53054131c"
                    ]
                },
                {
                    "command": [
                        "now eapply qs_ps_div in H.",
                        "VernacExtend",
                        "c5e5d1d25822d7e0e6db9ec8bdc235186e1080bf"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "intros.",
                        "VernacExtend",
                        "1b4df911c5412d25278e46f48402870ba987996b"
                    ]
                },
                {
                    "command": [
                        "unfold encode_state.",
                        "VernacExtend",
                        "6d1c62761866297fe9a0cf0b52d38b157230e4bc"
                    ]
                },
                {
                    "command": [
                        "now eapply divides_mult.",
                        "VernacExtend",
                        "8c9d592379363052a9cf525f0c8644045d41da95"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "steps_forward",
            "line_nb": 239,
            "steps": [
                {
                    "command": [
                        "intros HP H.",
                        "VernacExtend",
                        "3db669a0a15c1df7b284d9e95618449fb6bb91b1"
                    ]
                },
                {
                    "command": [
                        "revert v1 i1 i2 H.",
                        "VernacExtend",
                        "ac4fd6a84f9baa0d2a71d7a7ace77ad7c6854023"
                    ]
                },
                {
                    "command": [
                        "induction k; intros v1 i1 i2 H; inversion H; subst; clear H; cbn.",
                        "VernacExtend",
                        "570d58eda739e3ce41eb80ee61b813311041db9d"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "reflexivity.",
                        "VernacExtend",
                        "5cd1ae044f26cd6d89a5a5147c1d4fc5fc719d83"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "destruct st2.",
                        "VernacExtend",
                        "0b8490ddc95990bdc39f4dee6223c463c95d4bbe"
                    ]
                },
                {
                    "command": [
                        "eapply one_step_forward in H1; eauto.",
                        "VernacExtend",
                        "0f05c9229e7f2689273b69782ce4329fd9ca279c"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "divides_from_eq",
            "line_nb": 249,
            "steps": [
                {
                    "command": [
                        "exists y; subst; ring.",
                        "VernacExtend",
                        "32cd9fb9b9b68c28c0da3fadf8f3a2ee99c2faba"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "prime_div_mult3",
            "line_nb": 252,
            "steps": [
                {
                    "command": [
                        "intros H1 H2.",
                        "VernacExtend",
                        "1a279bc44908e178ace5c31cb5040905c4829477"
                    ]
                },
                {
                    "command": [
                        "apply prime_div_mult in H2; auto.",
                        "VernacExtend",
                        "748fb3c710c6c85ef66210bdc46463da59606041"
                    ]
                },
                {
                    "command": [
                        "destruct H2 as [ H2 | ]; auto.",
                        "VernacExtend",
                        "1e40b2c4c4f72b3f8d6783faa6a79f0dd6b38138"
                    ]
                },
                {
                    "command": [
                        "apply prime_div_mult in H2; tauto.",
                        "VernacExtend",
                        "87a56d7b5f1b2a5afc4d61b455a2c3b0d7f93cea"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "prime_div_mult4",
            "line_nb": 258,
            "steps": [
                {
                    "command": [
                        "intros H1 H2.",
                        "VernacExtend",
                        "1a279bc44908e178ace5c31cb5040905c4829477"
                    ]
                },
                {
                    "command": [
                        "apply prime_div_mult3 in H2; auto.",
                        "VernacExtend",
                        "05421ac5766803316959b50244e9d9d4e9ffffad"
                    ]
                },
                {
                    "command": [
                        "destruct H2 as [ H2 | H2 ]; try tauto.",
                        "VernacExtend",
                        "6899a33e35dbf5a1ce4533e1c973b83be45de5a2"
                    ]
                },
                {
                    "command": [
                        "apply prime_div_mult in H2; tauto.",
                        "VernacExtend",
                        "87a56d7b5f1b2a5afc4d61b455a2c3b0d7f93cea"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "one_step_backward",
            "line_nb": 265,
            "steps": [
                {
                    "command": [
                        "intros H1 H2.",
                        "VernacExtend",
                        "1a279bc44908e178ace5c31cb5040905c4829477"
                    ]
                },
                {
                    "command": [
                        "destruct fractran_step_inv with (1 := H2) as (el & p & q & er & H3 & H4 & H5).",
                        "VernacExtend",
                        "94c28b6a921f1d00cb774d93df81d2925137dfb3"
                    ]
                },
                {
                    "command": [
                        "unfold encode_state in H5; simpl in H5.",
                        "VernacExtend",
                        "1754039a8e5e0299af1dd5141dc16309222b6d00"
                    ]
                },
                {
                    "command": [
                        "destruct encode_mm_instr_in_inv with (1 := H3) as (l & rho & r & -> & G2).",
                        "VernacExtend",
                        "badfa19e639c3755f64538b2e12c85457410d23e"
                    ]
                },
                {
                    "command": [
                        "assert (i1 = length l+i) as E.",
                        "VernacExtend",
                        "bad50bccfb7f39e35803aac7a634d3c5f734927e"
                    ]
                },
                {
                    "command": [
                        "{",
                        "VernacSubproof",
                        "184cabd02aa0a33f23f10474ea95789b1f149361"
                    ]
                },
                {
                    "command": [
                        "unfold encode_one_instr in G2.",
                        "VernacExtend",
                        "160ce05a2738f2cee00fd79141ae7070a6a05ccb"
                    ]
                },
                {
                    "command": [
                        "destruct rho as [ u | u j ]; unfold encode_inc, encode_dec, encode_dec2 in G2; [ destruct G2 as [ G2 | [] ] | destruct G2 as [ G2 | [ G2 | [] ] ] ]; inversion G2; subst p q; clear G2; repeat rewrite mult_assoc in H5.",
                        "VernacExtend",
                        "5478a6a6a2bf4afa4d3f27d357afa4ccec6905b7"
                    ]
                },
                {
                    "command": [
                        "*",
                        "VernacBullet",
                        "8a329d054468e0c41ce333043e0978e30eed7b98"
                    ]
                },
                {
                    "command": [
                        "apply divides_from_eq, prime_div_mult4 in H5; auto.",
                        "VernacExtend",
                        "7fbbb2b6a35085cdbf8028ad0876d2153003d6db"
                    ]
                },
                {
                    "command": [
                        "destruct H5 as [ H5 | [ H5 | [ H5 | H5 ] ] ].",
                        "VernacExtend",
                        "68e14af66e77b397e4a6b7937e6fff9853d74cc0"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "apply primestream_divides in H5; omega.",
                        "VernacExtend",
                        "3a0877bc71b7863efa49fe1f00796b6641290173"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "apply ps_qs_div in H5; tauto.",
                        "VernacExtend",
                        "56ea2b1a4ef4dd9e33f497eb5533fdfd2fc70a09"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "apply primestream_divides in H5; omega.",
                        "VernacExtend",
                        "3a0877bc71b7863efa49fe1f00796b6641290173"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "apply ps_exp in H5; tauto.",
                        "VernacExtend",
                        "cab7065568627f93676b606f468f8674e7d01e31"
                    ]
                },
                {
                    "command": [
                        "*",
                        "VernacBullet",
                        "8a329d054468e0c41ce333043e0978e30eed7b98"
                    ]
                },
                {
                    "command": [
                        "rewrite <- mult_assoc in H5.",
                        "VernacExtend",
                        "fb45d710497d46f238cde9088a3905259281edc8"
                    ]
                },
                {
                    "command": [
                        "apply divides_from_eq, prime_div_mult3 in H5; auto.",
                        "VernacExtend",
                        "6c1099eb9f51e203857152bdb50b842b6ca3fee8"
                    ]
                },
                {
                    "command": [
                        "destruct H5 as [ H5 | [ H5 | H5 ] ].",
                        "VernacExtend",
                        "5d993977824eb944b4eac3b081595d41dd1c8fde"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "apply primestream_divides in H5; omega.",
                        "VernacExtend",
                        "3a0877bc71b7863efa49fe1f00796b6641290173"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "apply primestream_divides in H5; omega.",
                        "VernacExtend",
                        "3a0877bc71b7863efa49fe1f00796b6641290173"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "apply ps_exp in H5; tauto.",
                        "VernacExtend",
                        "cab7065568627f93676b606f468f8674e7d01e31"
                    ]
                },
                {
                    "command": [
                        "*",
                        "VernacBullet",
                        "8a329d054468e0c41ce333043e0978e30eed7b98"
                    ]
                },
                {
                    "command": [
                        "apply divides_from_eq, prime_div_mult3 in H5; auto.",
                        "VernacExtend",
                        "6c1099eb9f51e203857152bdb50b842b6ca3fee8"
                    ]
                },
                {
                    "command": [
                        "destruct H5 as [ H5 | [ H5 | H5 ] ].",
                        "VernacExtend",
                        "5d993977824eb944b4eac3b081595d41dd1c8fde"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "apply primestream_divides in H5.",
                        "VernacExtend",
                        "8f867427b0dd1f9fccde7892976b086ae72073c0"
                    ]
                },
                {
                    "command": [
                        "exfalso; apply (H1 j u); auto.",
                        "VernacExtend",
                        "64cce07baacd80ea817f781a19a552a7771ad7bc"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "apply primestream_divides in H5; omega.",
                        "VernacExtend",
                        "3a0877bc71b7863efa49fe1f00796b6641290173"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "apply ps_exp in H5; tauto.",
                        "VernacExtend",
                        "cab7065568627f93676b606f468f8674e7d01e31"
                    ]
                },
                {
                    "command": [
                        "}",
                        "VernacEndSubproof",
                        "85f27874ef16421341373f4b062b6d1605043af9"
                    ]
                },
                {
                    "command": [
                        "destruct mm_sss_total with (ii := rho) (s := (i1,v1)) as ((i2 & v2) & H7).",
                        "VernacExtend",
                        "e776b10aed1879afaa752ebfb3f17fa287450fa7"
                    ]
                },
                {
                    "command": [
                        "exists i2, v2.",
                        "VernacExtend",
                        "b35d5954e7135a67d8868f7c7ee46eaa015b185b"
                    ]
                },
                {
                    "command": [
                        "assert ((i, l++rho::r) /MM/ (i1,v1) \u2192 (i2,v2)) as H8.",
                        "VernacExtend",
                        "2e24e99f9bbcade202b8c0771e05a6f07826f13a"
                    ]
                },
                {
                    "command": [
                        "{",
                        "VernacSubproof",
                        "184cabd02aa0a33f23f10474ea95789b1f149361"
                    ]
                },
                {
                    "command": [
                        "apply in_sss_step; auto; simpl; omega.",
                        "VernacExtend",
                        "246a5434e46c461f9c4ea2c5c083110308f5b936"
                    ]
                },
                {
                    "command": [
                        "}",
                        "VernacEndSubproof",
                        "85f27874ef16421341373f4b062b6d1605043af9"
                    ]
                },
                {
                    "command": [
                        "split; auto.",
                        "VernacExtend",
                        "fcd44a714bd12fa54b1c7746996e44dbac16df06"
                    ]
                },
                {
                    "command": [
                        "apply one_step_forward in H8; auto.",
                        "VernacExtend",
                        "ad470a277342c01c9e7afb40ace4e6b499911e14"
                    ]
                },
                {
                    "command": [
                        "revert H2 H8; apply fractran_step_fun; auto.",
                        "VernacExtend",
                        "92474dca041dc5f79c72fdd556fdc6501bdd2b6c"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "steps_backward",
            "line_nb": 316,
            "steps": [
                {
                    "command": [
                        "intros H1.",
                        "VernacExtend",
                        "ba8e6c21eb83603690828b8ea37ea25a6f2962f3"
                    ]
                },
                {
                    "command": [
                        "revert i1 v1 st; induction k as [ | k IHk ]; intros i1 v1 st H; simpl in H.",
                        "VernacExtend",
                        "e6a5d920e5edf3adbf5996f2e644b799329d62bb"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "subst; exists i1, v1; split; auto; constructor.",
                        "VernacExtend",
                        "cf1c10c777efe3f0fcc84da196fc8c1bb4bfcc20"
                    ]
                },
                {
                    "command": [
                        "-",
                        "VernacBullet",
                        "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
                    ]
                },
                {
                    "command": [
                        "destruct H as (st1 & H2 & H3).",
                        "VernacExtend",
                        "a42fb5d33d85654418795b3725b019aa02f16df2"
                    ]
                },
                {
                    "command": [
                        "destruct one_step_backward with (2 := H2) as (i2 & v2 & -> & H5); auto.",
                        "VernacExtend",
                        "2729f8be89e5ca9f7cdfb1b44967165d6c81f512"
                    ]
                },
                {
                    "command": [
                        "destruct IHk with (1 := H3) as (i3 & v3 & ? & ->).",
                        "VernacExtend",
                        "3f6d98cdb01494e8a16bd1c8085ecf7f7746a69b"
                    ]
                },
                {
                    "command": [
                        "exists i3, v3; split; auto.",
                        "VernacExtend",
                        "d3e7c09b0aae494ae159c16881c5a4d62d118f03"
                    ]
                },
                {
                    "command": [
                        "constructor 2 with (i2,v2); auto.",
                        "VernacExtend",
                        "71dd162234842a35da8b00c12e829e2d1b268970"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "mm_fractran_simulation",
            "line_nb": 328,
            "steps": [
                {
                    "command": [
                        "intros HP.",
                        "VernacExtend",
                        "0ec01adecbfe701ee27244a41ef8fa3cd51b55e4"
                    ]
                },
                {
                    "command": [
                        "change (ps 1* exp 0 v) with (encode_state (1,v)).",
                        "VernacExtend",
                        "0e5fd9005e1d9bd2d8d697bcaa7b0e5f106fab81"
                    ]
                },
                {
                    "command": [
                        "split.",
                        "VernacExtend",
                        "55abc140132bd88981001ac656020469a8d503eb"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "intros ((j,w) & (k & H1) & H2); simpl fst in *.",
                        "VernacExtend",
                        "be2ae280b33be3e6a459a19ed4d6e18b70b77ef2"
                    ]
                },
                {
                    "command": [
                        "exists (encode_state (j,w)); split.",
                        "VernacExtend",
                        "97df1cb5f24d139ca731be013f2ca9784abaa3c4"
                    ]
                },
                {
                    "command": [
                        "*",
                        "VernacBullet",
                        "8a329d054468e0c41ce333043e0978e30eed7b98"
                    ]
                },
                {
                    "command": [
                        "exists k; apply steps_forward in H1; auto.",
                        "VernacExtend",
                        "79a4d4fd8766ae418bbda517cfd9ee0dbbfa45f8"
                    ]
                },
                {
                    "command": [
                        "*",
                        "VernacBullet",
                        "8a329d054468e0c41ce333043e0978e30eed7b98"
                    ]
                },
                {
                    "command": [
                        "intros x Hx.",
                        "VernacExtend",
                        "4f408fcf0db2619f08da1108b4fc92384e2a5db3"
                    ]
                },
                {
                    "command": [
                        "destruct one_step_backward with (2 := Hx) as (i2 & v2 & -> & ?); auto.",
                        "VernacExtend",
                        "766baf21bceb344e3e0e7ef1600c9a7786699edb"
                    ]
                },
                {
                    "command": [
                        "revert H; apply sss_out_step_stall; auto.",
                        "VernacExtend",
                        "b931f4bb3d780130b92aff15419e8bbde7558b66"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "intros (st & (k & H1) & H2).",
                        "VernacExtend",
                        "e9919e97980e03d8136e769f78600e405d5e6cc5"
                    ]
                },
                {
                    "command": [
                        "destruct steps_backward with (2 := H1) as (i2 & v2 & H3 & ->); auto.",
                        "VernacExtend",
                        "8868632788d51d2ee83d40dde25afc15e223756d"
                    ]
                },
                {
                    "command": [
                        "exists (i2,v2); split.",
                        "VernacExtend",
                        "33e043af2a0020d42f7f8945e071f72c0bcd94ce"
                    ]
                },
                {
                    "command": [
                        "*",
                        "VernacBullet",
                        "8a329d054468e0c41ce333043e0978e30eed7b98"
                    ]
                },
                {
                    "command": [
                        "exists k; auto.",
                        "VernacExtend",
                        "930bbe24c94723a9e2f5da004090011e877c06d9"
                    ]
                },
                {
                    "command": [
                        "*",
                        "VernacBullet",
                        "8a329d054468e0c41ce333043e0978e30eed7b98"
                    ]
                },
                {
                    "command": [
                        "simpl fst.",
                        "VernacExtend",
                        "50f078e6e6cbec9c7f54271bc03d95b1580e0c02"
                    ]
                },
                {
                    "command": [
                        "destruct (in_out_code_dec i2 (1,P)) as [ H4 | H4 ]; auto; exfalso.",
                        "VernacExtend",
                        "979f1a9b02b932f893af86dd2af9376ca6a00589"
                    ]
                },
                {
                    "command": [
                        "destruct in_code_subcode with (1 := H4) as (rho & l & r & G1 & G2).",
                        "VernacExtend",
                        "bd0329b2bd2167bc5e5d61d6775357419f916952"
                    ]
                },
                {
                    "command": [
                        "destruct (mm_sss_total rho (i2,v2)) as ((i3,v3) & G3).",
                        "VernacExtend",
                        "76b0ff51c778389f82d1b93598833c192260aee3"
                    ]
                },
                {
                    "command": [
                        "apply H2 with (encode_state (i3,v3)).",
                        "VernacExtend",
                        "cd600df468e5dfb34a8b167833233768670880c4"
                    ]
                },
                {
                    "command": [
                        "apply one_step_forward; auto.",
                        "VernacExtend",
                        "77b055da8de2525dad7efeaed2ad2c4e966ad1f9"
                    ]
                },
                {
                    "command": [
                        "subst P; apply in_sss_step; auto.",
                        "VernacExtend",
                        "ff27c523188a58b905347e9fc883eacea500261a"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "mm_fractran_n",
            "line_nb": 356,
            "steps": [
                {
                    "command": [
                        "destruct mm_remove_self_loops with (P := P) as (Q & H1 & _ & H2).",
                        "VernacExtend",
                        "787c05e81ae8e343c6145462f3163f4df841048b"
                    ]
                },
                {
                    "command": [
                        "exists (encode_mm_instr 1 Q); split.",
                        "VernacExtend",
                        "35338ba360ddfc718647469bb1fd361acb797125"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "generalize (encode_mm_instr_regular 1 Q); apply Forall_impl; intros; tauto.",
                        "VernacExtend",
                        "18f7810cb298e1296f479d1ab7f93400b502cfa7"
                    ]
                },
                {
                    "command": [
                        "+",
                        "VernacBullet",
                        "3ddfc0515f916e562bacf863647e0107cb15aa13"
                    ]
                },
                {
                    "command": [
                        "intros x.",
                        "VernacExtend",
                        "596d66edc70dae19981ed74f103fc0a865aec92c"
                    ]
                },
                {
                    "command": [
                        "rewrite H2, mm_fractran_simulation; auto.",
                        "VernacExtend",
                        "6c08031dbf3cb9eea2e725cffb81aab471d80c2d"
                    ]
                },
                {
                    "command": [
                        "simpl exp; rewrite Nat.add_0_r; tauto.",
                        "VernacExtend",
                        "9180ad0c4790c7f4ab3b210bb0f3c980689c146e"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "mm_fractran",
            "line_nb": 366,
            "steps": [
                {
                    "command": [
                        "destruct mm_fractran_n with (P := P) as (l & _ & Hl).",
                        "VernacExtend",
                        "c016879cc53cfd4d945e86ea2399ca8787ea4fc6"
                    ]
                },
                {
                    "command": [
                        "exists l; intros x; rewrite Hl; simpl.",
                        "VernacExtend",
                        "809d97cf6ed547afc357ffcb6c3d1e94831b3bd7"
                    ]
                },
                {
                    "command": [
                        "rewrite exp_zero, Nat.mul_1_r; tauto.",
                        "VernacExtend",
                        "61b3478a32cf84148175a4ddaaf8d343de89a378"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        }
    ]
}