{
    "filename": "raft-proofs/NoAppendEntriesToLeaderProof.v",
    "coq_project": "verdi-raft",
    "vernac_cmds": [
        [
            "Require Import Verdi.GhostSimulations.",
            "VernacRequire",
            "891dab67151e6ddfd50d6b357dfdba6cdf4a4361"
        ],
        [
            "Require Import VerdiRaft.Raft.",
            "VernacRequire",
            "36b0b9afd1c52050ce42daf3c5fa4abb91993f25"
        ],
        [
            "Require Import VerdiRaft.RaftRefinementInterface.",
            "VernacRequire",
            "927926da3b5a03c3f12be5b77cf55cd407b249d6"
        ],
        [
            "Require Import VerdiRaft.NoAppendEntriesToSelfInterface.",
            "VernacRequire",
            "f926cacf2f5bd941e9c65c027cd1f946d04ef74f"
        ],
        [
            "Require Import VerdiRaft.OneLeaderLogPerTermInterface.",
            "VernacRequire",
            "4126e98564cfc0cf22ec005d842f1e3994328c7c"
        ],
        [
            "Require Import VerdiRaft.AppendEntriesRequestsCameFromLeadersInterface.",
            "VernacRequire",
            "67d053d8c43e8ef46d64000e0c80a99486099fd4"
        ],
        [
            "Require Import VerdiRaft.LeadersHaveLeaderLogsInterface.",
            "VernacRequire",
            "05a78ca50637855033c29d0bd10231cdad55ee59"
        ],
        [
            "Require Import VerdiRaft.NoAppendEntriesToLeaderInterface.",
            "VernacRequire",
            "2bff4005413182c018505a33f8513ca23618959a"
        ],
        [
            "Section NoAppendEntriesToLeader.",
            "VernacBeginSection",
            "1ecd80368b5253a6e15d2f455948b0a0cba98e8f"
        ],
        [
            "Context {orig_base_params : BaseParams}.",
            "VernacContext",
            "69028e681894580fbc36a6124a9136decfafb159"
        ],
        [
            "Context {one_node_params : OneNodeParams orig_base_params}.",
            "VernacContext",
            "013ed31ca1bcacb0528fc416f1059cfa49b9df65"
        ],
        [
            "Context {raft_params : RaftParams orig_base_params}.",
            "VernacContext",
            "f5c24333154da8ee6ae37600b526f95496c92448"
        ],
        [
            "Context {rri : raft_refinement_interface}.",
            "VernacContext",
            "34acb9bc0df96db7775fdb1297478e309d48058c"
        ],
        [
            "Context {naetsi : no_append_entries_to_self_interface}.",
            "VernacContext",
            "29dcb41e9f8f208899eb78eab131cb377a6771dd"
        ],
        [
            "Context {ollpti : one_leaderLog_per_term_interface}.",
            "VernacContext",
            "62aaa9845186073be1a2b65aa8707a362ee73c98"
        ],
        [
            "Context {aercfli : append_entries_came_from_leaders_interface}.",
            "VernacContext",
            "204a2aa1422186ce2aeab8b0d916d27960256787"
        ],
        [
            "Context {lhlli : leaders_have_leaderLogs_interface}.",
            "VernacContext",
            "87324fe5329f3557d1ac2774a23f7d72ef09b263"
        ],
        [
            "Definition no_append_entries_to_leader' (net : network) : Prop := forall p t n pli plt es ci, In p (nwPackets net) -> pBody p = AppendEntries t n pli plt es ci -> type (snd (nwState net (pDst p))) = Leader -> currentTerm (snd (nwState net (pDst p))) = t -> False.",
            "VernacDefinition",
            "a5ed54b2149c65cfc98517da8816a0ec47505d94"
        ],
        [
            "Definition no_append_entries_to_self' (net : network) : Prop := forall p t n pli plt es ci, In p (nwPackets net) -> pBody p = AppendEntries t n pli plt es ci -> pDst p = pSrc p -> False.",
            "VernacDefinition",
            "106bdedefd6d5985ab9660538760e7d51f92d8ab"
        ],
        [
            "Theorem lift_no_append_entries_to_self : forall net, refined_raft_intermediate_reachable net -> no_append_entries_to_self (deghost net).",
            "VernacStartTheoremProof",
            "5c9a5d2a9e4e6daa31ff275ab5ff33879485ee1c"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "eapply lift_prop; eauto using no_append_entries_to_self_invariant.",
            "VernacExtend",
            "cf9321a608f8870f8f4cc35c76456f2d42b70662"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma ghost_packet : forall (net : network (params := raft_refined_multi_params)) p, In p (nwPackets net) -> In (deghost_packet p) (nwPackets (deghost net)).",
            "VernacStartTheoremProof",
            "4b2f74bddef109c3018814ec180c7fd9ff869d7c"
        ],
        [
            "unfold deghost.",
            "VernacExtend",
            "b055a9e1838377f61bedc8f8d590095e4b0903de"
        ],
        [
            "simpl.",
            "VernacExtend",
            "1b93169f4cf876d207c1fab22a2347202ab48d85"
        ],
        [
            "intuition.",
            "VernacExtend",
            "ebd9388eeb482972743f9cce5cbddbd85ca5bdfd"
        ],
        [
            "apply in_map_iff.",
            "VernacExtend",
            "b128e1e6f601182342113d742a28792f5aaec52c"
        ],
        [
            "eexists; eauto.",
            "VernacExtend",
            "02215ff570a78e8dfed0585aa87594983a8aa0fb"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Theorem no_append_entries_to_self'_invariant : forall net, refined_raft_intermediate_reachable net -> no_append_entries_to_self' net.",
            "VernacStartTheoremProof",
            "32707af0c3d5a35001b4c20783d16484f31d6426"
        ],
        [
            "unfold no_append_entries_to_self'.",
            "VernacExtend",
            "bc44e00427189095c3228540ab887b89ce62c543"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "find_apply_lem_hyp ghost_packet.",
            "VernacExtend",
            "004d5d47ab8f7ecab14bbabfc7c9c35f9243b176"
        ],
        [
            "find_eapply_lem_hyp lift_no_append_entries_to_self; auto.",
            "VernacExtend",
            "a751ae4bfb635c2ef0c0bf241afcd96425ff7238"
        ],
        [
            "simpl in *.",
            "VernacExtend",
            "5f89d9715fcf9b11bc0d0aadc658e9b10c47b606"
        ],
        [
            "eauto.",
            "VernacExtend",
            "d5f3a05ca887c29bb0b422fc64ae2775fea3935e"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma no_append_entries_to_leader_invariant' : forall net, refined_raft_intermediate_reachable net -> no_append_entries_to_leader' net.",
            "VernacStartTheoremProof",
            "ff594183dcc25a4878fd5355521b398cb4e7ff03"
        ],
        [
            "unfold no_append_entries_to_leader'.",
            "VernacExtend",
            "9ff7389947b65adad9fd3275c6d6425f82bfde31"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "subst.",
            "VernacExtend",
            "ccc9cb848804101be22a0bb6c324861981c5c7f1"
        ],
        [
            "find_copy_eapply_lem_hyp no_append_entries_to_self'_invariant; eauto.",
            "VernacExtend",
            "9fe5a2a7e584bf40c7860a4be3d0b9eccf24984c"
        ],
        [
            "find_false.",
            "VernacExtend",
            "7e33dd334313875602db2ee0c359a86633fe6124"
        ],
        [
            "find_eapply_lem_hyp leaders_have_leaderLogs_invariant; eauto.",
            "VernacExtend",
            "93d09c55f4aa507dbf5e35cc5f3ac18cf0cfdf79"
        ],
        [
            "break_exists.",
            "VernacExtend",
            "7914403b406cb602431a8c9ec3a15a70b4d83870"
        ],
        [
            "find_eapply_lem_hyp append_entries_came_from_leaders_invariant; eauto.",
            "VernacExtend",
            "6b08809beec3f97f83e7b4679ba9124fe6efec12"
        ],
        [
            "break_exists.",
            "VernacExtend",
            "7914403b406cb602431a8c9ec3a15a70b4d83870"
        ],
        [
            "eapply one_leaderLog_per_term_host_invariant; eauto.",
            "VernacExtend",
            "80bb536c0e6b8e3524d6786488f0cbb5ca6a9da1"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma deghost_packet_exists : forall net p, In p (nwPackets (deghost net)) -> exists (q : packet (params := raft_refined_multi_params (raft_params := raft_params))), In q (nwPackets net) /\\ p = deghost_packet q.",
            "VernacStartTheoremProof",
            "3e8493cec6c4fb3c350a27b5ec4e052313165017"
        ],
        [
            "unfold deghost.",
            "VernacExtend",
            "b055a9e1838377f61bedc8f8d590095e4b0903de"
        ],
        [
            "simpl.",
            "VernacExtend",
            "1b93169f4cf876d207c1fab22a2347202ab48d85"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "do_in_map.",
            "VernacExtend",
            "fa0be9321c6684e706bb9aefb585d66dc4eaa336"
        ],
        [
            "eauto.",
            "VernacExtend",
            "d5f3a05ca887c29bb0b422fc64ae2775fea3935e"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Instance noaetli : no_append_entries_to_leader_interface.",
            "VernacInstance",
            "73c3fcccaa2190ec36ab4b832b8275b1cd24e6ba"
        ],
        [
            "split.",
            "VernacExtend",
            "55abc140132bd88981001ac656020469a8d503eb"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "apply lower_prop; auto.",
            "VernacExtend",
            "84e85498cca6e97b2f47bcafc9ef63c5c3769969"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "find_apply_lem_hyp no_append_entries_to_leader_invariant'.",
            "VernacExtend",
            "0ddc2ebaadb81172a15c15affdc914f45a2da3e3"
        ],
        [
            "unfold no_append_entries_to_leader', no_append_entries_to_leader in *.",
            "VernacExtend",
            "09387b2dc51bb4db2114f3d0aced9bee6d67876e"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "find_apply_lem_hyp deghost_packet_exists.",
            "VernacExtend",
            "66d767dfcd94c1f99dfd35e33fae351526141137"
        ],
        [
            "break_exists.",
            "VernacExtend",
            "7914403b406cb602431a8c9ec3a15a70b4d83870"
        ],
        [
            "intuition.",
            "VernacExtend",
            "ebd9388eeb482972743f9cce5cbddbd85ca5bdfd"
        ],
        [
            "subst.",
            "VernacExtend",
            "ccc9cb848804101be22a0bb6c324861981c5c7f1"
        ],
        [
            "simpl in *.",
            "VernacExtend",
            "5f89d9715fcf9b11bc0d0aadc658e9b10c47b606"
        ],
        [
            "repeat break_match; simpl in *.",
            "VernacExtend",
            "1d9edf31c9a7aaffb4e027f5f7adcda0654c6906"
        ],
        [
            "subst.",
            "VernacExtend",
            "ccc9cb848804101be22a0bb6c324861981c5c7f1"
        ],
        [
            "match goal with | H : nwState ?h = (?gd, ?d) |- _ => replace gd with (fst (nwState h)) in * by (rewrite H; reflexivity); replace d with (snd (nwState h)) in * by (rewrite H; reflexivity); clear H end.",
            "VernacExtend",
            "923f28783426719d37b7051d98c531e263647562"
        ],
        [
            "eauto.",
            "VernacExtend",
            "d5f3a05ca887c29bb0b422fc64ae2775fea3935e"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "End NoAppendEntriesToLeader.",
            "VernacEndSegment",
            "fcf1d1fdfce7228c96cc082ee422779c90f75423"
        ]
    ],
    "proofs": [
        {
            "name": "lift_no_append_entries_to_self",
            "line_nb": 19,
            "steps": [
                {
                    "command": [
                        "intros.",
                        "VernacExtend",
                        "1b4df911c5412d25278e46f48402870ba987996b"
                    ]
                },
                {
                    "command": [
                        "eapply lift_prop; eauto using no_append_entries_to_self_invariant.",
                        "VernacExtend",
                        "cf9321a608f8870f8f4cc35c76456f2d42b70662"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "ghost_packet",
            "line_nb": 23,
            "steps": [
                {
                    "command": [
                        "unfold deghost.",
                        "VernacExtend",
                        "b055a9e1838377f61bedc8f8d590095e4b0903de"
                    ]
                },
                {
                    "command": [
                        "simpl.",
                        "VernacExtend",
                        "1b93169f4cf876d207c1fab22a2347202ab48d85"
                    ]
                },
                {
                    "command": [
                        "intuition.",
                        "VernacExtend",
                        "ebd9388eeb482972743f9cce5cbddbd85ca5bdfd"
                    ]
                },
                {
                    "command": [
                        "apply in_map_iff.",
                        "VernacExtend",
                        "b128e1e6f601182342113d742a28792f5aaec52c"
                    ]
                },
                {
                    "command": [
                        "eexists; eauto.",
                        "VernacExtend",
                        "02215ff570a78e8dfed0585aa87594983a8aa0fb"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "no_append_entries_to_leader_invariant'",
            "line_nb": 38,
            "steps": [
                {
                    "command": [
                        "unfold no_append_entries_to_leader'.",
                        "VernacExtend",
                        "9ff7389947b65adad9fd3275c6d6425f82bfde31"
                    ]
                },
                {
                    "command": [
                        "intros.",
                        "VernacExtend",
                        "1b4df911c5412d25278e46f48402870ba987996b"
                    ]
                },
                {
                    "command": [
                        "subst.",
                        "VernacExtend",
                        "ccc9cb848804101be22a0bb6c324861981c5c7f1"
                    ]
                },
                {
                    "command": [
                        "find_copy_eapply_lem_hyp no_append_entries_to_self'_invariant; eauto.",
                        "VernacExtend",
                        "9fe5a2a7e584bf40c7860a4be3d0b9eccf24984c"
                    ]
                },
                {
                    "command": [
                        "find_false.",
                        "VernacExtend",
                        "7e33dd334313875602db2ee0c359a86633fe6124"
                    ]
                },
                {
                    "command": [
                        "find_eapply_lem_hyp leaders_have_leaderLogs_invariant; eauto.",
                        "VernacExtend",
                        "93d09c55f4aa507dbf5e35cc5f3ac18cf0cfdf79"
                    ]
                },
                {
                    "command": [
                        "break_exists.",
                        "VernacExtend",
                        "7914403b406cb602431a8c9ec3a15a70b4d83870"
                    ]
                },
                {
                    "command": [
                        "find_eapply_lem_hyp append_entries_came_from_leaders_invariant; eauto.",
                        "VernacExtend",
                        "6b08809beec3f97f83e7b4679ba9124fe6efec12"
                    ]
                },
                {
                    "command": [
                        "break_exists.",
                        "VernacExtend",
                        "7914403b406cb602431a8c9ec3a15a70b4d83870"
                    ]
                },
                {
                    "command": [
                        "eapply one_leaderLog_per_term_host_invariant; eauto.",
                        "VernacExtend",
                        "80bb536c0e6b8e3524d6786488f0cbb5ca6a9da1"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "deghost_packet_exists",
            "line_nb": 50,
            "steps": [
                {
                    "command": [
                        "unfold deghost.",
                        "VernacExtend",
                        "b055a9e1838377f61bedc8f8d590095e4b0903de"
                    ]
                },
                {
                    "command": [
                        "simpl.",
                        "VernacExtend",
                        "1b93169f4cf876d207c1fab22a2347202ab48d85"
                    ]
                },
                {
                    "command": [
                        "intros.",
                        "VernacExtend",
                        "1b4df911c5412d25278e46f48402870ba987996b"
                    ]
                },
                {
                    "command": [
                        "do_in_map.",
                        "VernacExtend",
                        "fa0be9321c6684e706bb9aefb585d66dc4eaa336"
                    ]
                },
                {
                    "command": [
                        "eauto.",
                        "VernacExtend",
                        "d5f3a05ca887c29bb0b422fc64ae2775fea3935e"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        },
        {
            "name": "noaetli",
            "line_nb": 57,
            "steps": [
                {
                    "command": [
                        "split.",
                        "VernacExtend",
                        "55abc140132bd88981001ac656020469a8d503eb"
                    ]
                },
                {
                    "command": [
                        "intros.",
                        "VernacExtend",
                        "1b4df911c5412d25278e46f48402870ba987996b"
                    ]
                },
                {
                    "command": [
                        "apply lower_prop; auto.",
                        "VernacExtend",
                        "84e85498cca6e97b2f47bcafc9ef63c5c3769969"
                    ]
                },
                {
                    "command": [
                        "intros.",
                        "VernacExtend",
                        "1b4df911c5412d25278e46f48402870ba987996b"
                    ]
                },
                {
                    "command": [
                        "find_apply_lem_hyp no_append_entries_to_leader_invariant'.",
                        "VernacExtend",
                        "0ddc2ebaadb81172a15c15affdc914f45a2da3e3"
                    ]
                },
                {
                    "command": [
                        "unfold no_append_entries_to_leader', no_append_entries_to_leader in *.",
                        "VernacExtend",
                        "09387b2dc51bb4db2114f3d0aced9bee6d67876e"
                    ]
                },
                {
                    "command": [
                        "intros.",
                        "VernacExtend",
                        "1b4df911c5412d25278e46f48402870ba987996b"
                    ]
                },
                {
                    "command": [
                        "find_apply_lem_hyp deghost_packet_exists.",
                        "VernacExtend",
                        "66d767dfcd94c1f99dfd35e33fae351526141137"
                    ]
                },
                {
                    "command": [
                        "break_exists.",
                        "VernacExtend",
                        "7914403b406cb602431a8c9ec3a15a70b4d83870"
                    ]
                },
                {
                    "command": [
                        "intuition.",
                        "VernacExtend",
                        "ebd9388eeb482972743f9cce5cbddbd85ca5bdfd"
                    ]
                },
                {
                    "command": [
                        "subst.",
                        "VernacExtend",
                        "ccc9cb848804101be22a0bb6c324861981c5c7f1"
                    ]
                },
                {
                    "command": [
                        "simpl in *.",
                        "VernacExtend",
                        "5f89d9715fcf9b11bc0d0aadc658e9b10c47b606"
                    ]
                },
                {
                    "command": [
                        "repeat break_match; simpl in *.",
                        "VernacExtend",
                        "1d9edf31c9a7aaffb4e027f5f7adcda0654c6906"
                    ]
                },
                {
                    "command": [
                        "subst.",
                        "VernacExtend",
                        "ccc9cb848804101be22a0bb6c324861981c5c7f1"
                    ]
                },
                {
                    "command": [
                        "match goal with | H : nwState ?h = (?gd, ?d) |- _ => replace gd with (fst (nwState h)) in * by (rewrite H; reflexivity); replace d with (snd (nwState h)) in * by (rewrite H; reflexivity); clear H end.",
                        "VernacExtend",
                        "923f28783426719d37b7051d98c531e263647562"
                    ]
                },
                {
                    "command": [
                        "eauto.",
                        "VernacExtend",
                        "d5f3a05ca887c29bb0b422fc64ae2775fea3935e"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        }
    ]
}