{
    "filename": "src/FcEtt/fc_head_reduction.v",
    "coq_project": "corespec",
    "vernac_cmds": [
        [
            "Require Import FcEtt.sigs.",
            "VernacRequire",
            "e1bc3e0a1ceb8018f591db9b3282d04c371bcd98"
        ],
        [
            "Require Import FcEtt.fc_wf.",
            "VernacRequire",
            "17d5c996dd897022bef6981a992941390208b9eb"
        ],
        [
            "Module fc_head_reduction (e_invert : ext_invert_sig) (wk: fc_weak_sig) (wf : fc_wf_sig) (sub : fc_subst_sig).",
            "VernacDefineModule",
            "34f9fef1934b2ddda78e0be3e621f5ba40fff10a"
        ],
        [
            "Import e_invert.",
            "VernacImport",
            "190c5b94ede81cf2af590322e7d5b96a80b32f7d"
        ],
        [
            "Import wk.",
            "VernacImport",
            "b4da39e2c7be9cb33696d3b812b0434cd11e5347"
        ],
        [
            "Import sub.",
            "VernacImport",
            "413cacee403079d05e2f21513b7dedc593d7b2d6"
        ],
        [
            "Require Export FcEtt.imports.",
            "VernacRequire",
            "61372d9830cc69b950164f3e80b1f5dd32a0af67"
        ],
        [
            "Require Import FcEtt.utils.",
            "VernacRequire",
            "8d082ef10c0093b17464b2b7ed352728f63ac59d"
        ],
        [
            "Require Export FcEtt.tactics.",
            "VernacRequire",
            "2576bc1210efcfea27a4ff36e2425c851354d9d2"
        ],
        [
            "Require Export FcEtt.ett_ott.",
            "VernacRequire",
            "8dd5c55091e5ba6419649ad41af275ffbdff8adb"
        ],
        [
            "Require Export FcEtt.ett_inf.",
            "VernacRequire",
            "cbf851a51541088047ca8370dce31e979217adde"
        ],
        [
            "Require Export FcEtt.ett_ind.",
            "VernacRequire",
            "d02c6084e242e22724b53f64959ad19c5ff9918a"
        ],
        [
            "Require Export FcEtt.ett_par.",
            "VernacRequire",
            "18023110cbdcbb89216dff0c9d63966f92ee63b4"
        ],
        [
            "Require Export FcEtt.erase_syntax.",
            "VernacRequire",
            "70fce1ef6687c53c5712bcf9ef6b12137d3c6602"
        ],
        [
            "Require Import FcEtt.ext_red_one.",
            "VernacRequire",
            "30e023da571786d41ccd505abd4e9ecba29fa1f0"
        ],
        [
            "Module red1 := ext_red_one e_invert.",
            "VernacDefineModule",
            "df479f712ca38457d66f635091f31975f8cd16be"
        ],
        [
            "Import red1.",
            "VernacImport",
            "475df80c1538d378be093e5d75367dcef1c9da52"
        ],
        [
            "Set Implicit Arguments.",
            "VernacSetOption",
            "9e84ff8896f028601d8aded48c1d4aebe60aa584"
        ],
        [
            "Set Bullet Behavior \"Strict Subproofs\".",
            "VernacSetOption",
            "2f48a6a957bc407939a01b772051438c4013f99b"
        ],
        [
            "Lemma weaken_head_reduction : forall G0 a a', head_reduction G0 a a' -> forall E F G, (G0 = F ++ G) -> AnnCtx (F ++ E ++ G) -> head_reduction (F ++ E ++ G) a a'.",
            "VernacStartTheoremProof",
            "0816c2eff00e53dda9e73b94e098cb75e0009c5a"
        ],
        [
            "intros G a a' H.",
            "VernacExtend",
            "24d5513a0f856a46e449d0664d757feca7cd206d"
        ],
        [
            "induction H; pre; subst; eauto 4.",
            "VernacExtend",
            "cb12eb94161ec025e4484d37f9948f433134dae2"
        ],
        [
            "all: try (pick fresh x and apply An_AbsTerm; [eapply AnnTyping_weakening; eauto| rewrite_env (([(x, Tm A)] ++ F) ++ E ++ G0); eauto; eapply H1; eauto; simpl_env; eauto using AnnTyping_weakening]).",
            "VernacExtend",
            "a94d38c616159e01806089e82749017197e35202"
        ],
        [
            "all: try solve [econstructor; eauto; eapply AnnDefEq_weaken_available; eauto; eapply (AnnDefEq_weakening H0 E F G0); eauto].",
            "VernacExtend",
            "13e6d4a78573a7aecdb4217ef2878e4903dad78c"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Lemma subst_head_reduction : forall G a a', head_reduction G a a' -> forall G1 G2 A b x, G = G1 ++ [(x, Tm A)] ++ G2 -> AnnTyping G2 b A -> head_reduction (map (tm_subst_tm_sort b x) G1 ++ G2) (tm_subst_tm_tm b x a) (tm_subst_tm_tm b x a').",
            "VernacStartTheoremProof",
            "c1bd7cc65061c1ccc77b154572630fb124eb7513"
        ],
        [
            "intros G a a' R.",
            "VernacExtend",
            "bb5a5f7a2a6121a323491385075279595614abb3"
        ],
        [
            "induction R; intros G1 G2 A0 b0 x0 EQ Ty; simpl; subst; eauto using tm_subst_tm_tm_lc_tm, AnnTyping_lc1, AnnTyping_lc2, tm_subst_tm_co_lc_co.",
            "VernacExtend",
            "073c747c0ad419d85df95810d0b978afa617559d"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "have h0: lc_tm b0 by apply AnnTyping_lc1 in Ty.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "rewrite tm_subst_tm_tm_open_tm_wrt_tm; auto.",
            "VernacExtend",
            "9e2b92fba484264671c209dbe9b51f8bf106fcab"
        ],
        [
            "apply An_AppAbs; simpl; try apply tm_subst_tm_tm_lc_tm; auto.",
            "VernacExtend",
            "6096373ae02ab0352fc576fb27dbdb231977f7b6"
        ],
        [
            "eapply Value_tm_subst_tm_tm in H0; simpl in H0; eauto.",
            "VernacExtend",
            "3c8c8176983a58f1111a60c75cdb16c34a0669fa"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "have h0: lc_tm b0 by apply AnnTyping_lc1 in Ty.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "rewrite tm_subst_tm_tm_open_tm_wrt_co; auto.",
            "VernacExtend",
            "9e2b92fba484264671c209dbe9b51f8bf106fcab"
        ],
        [
            "apply An_CAppCAbs; simpl.",
            "VernacExtend",
            "83a014d84e9b83e197fab27c31fdbae90f931ecc"
        ],
        [
            "destruct phi.",
            "VernacExtend",
            "94d2a805a4b0f120f8f84b14f2d934e83b1ea1cd"
        ],
        [
            "apply tm_subst_tm_constraint_lc_constraint; auto.",
            "VernacExtend",
            "e211f8a3fa6254bd4a72f1eb51e17911c37418cd"
        ],
        [
            "have h1 := tm_subst_tm_tm_lc_tm _ _ x0 H0 h0; auto.",
            "VernacExtend",
            "0883d99e6f5c71b4dacbb07cffb5061a7717ac1d"
        ],
        [
            "apply tm_subst_tm_co_lc_co; auto.",
            "VernacExtend",
            "eb12271e8e333b0e71ace6d790d735e0b081c5b0"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "eapply An_AbsTerm with (L := singleton x0 \\u L); eauto.",
            "VernacExtend",
            "57949a5aa82cbd538124ef996e584c178187f23c"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "have h0 := first ann_tm_substitution_mutual _ _ _ H; auto.",
            "VernacExtend",
            "0883d99e6f5c71b4dacbb07cffb5061a7717ac1d"
        ],
        [
            "simpl in h0.",
            "VernacExtend",
            "67c25f3a513803524cecf6f6fb11e94408f97866"
        ],
        [
            "eapply h0; eauto.",
            "VernacExtend",
            "bf9211468656c16ba59a0850ff4294f6899caaf7"
        ],
        [
            "+",
            "VernacBullet",
            "3ddfc0515f916e562bacf863647e0107cb15aa13"
        ],
        [
            "simpl in H1.",
            "VernacExtend",
            "8e8db7ad05fc7a69fb83eaedd7fb1e86ee74784d"
        ],
        [
            "intros x H2.",
            "VernacExtend",
            "f0c31a3f2dabbd4412e5f9ee341a43df64babb3c"
        ],
        [
            "have h1 : lc_tm b0 by apply AnnTyping_lc1 in Ty.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "have h0 := H1 x ltac:(auto) ((x, Tm A) :: G1) G2 A0 b0 x0 ltac:(auto) Ty.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "repeat rewrite tm_subst_tm_tm_open_tm_wrt_tm_rec in h0; auto.",
            "VernacExtend",
            "f7b556375a564743810d1a280a32c6c0ff871f35"
        ],
        [
            "simpl.",
            "VernacExtend",
            "1b93169f4cf876d207c1fab22a2347202ab48d85"
        ],
        [
            "simpl in h0.",
            "VernacExtend",
            "67c25f3a513803524cecf6f6fb11e94408f97866"
        ],
        [
            "destruct eq_dec; auto.",
            "VernacExtend",
            "efedffa696a068c243f3ae86a22cb0f063f10b85"
        ],
        [
            "fsetdec.",
            "VernacExtend",
            "d9651132b72f95a28a33945b2cbaaf1d88dd00d9"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "eapply An_Axiom; eauto.",
            "VernacExtend",
            "ce388c962c462ac16a26e86d21423ed0e45dffe9"
        ],
        [
            "erewrite tm_subst_fresh_2; eauto.",
            "VernacExtend",
            "0073ce9ced729410ae978533f47e269b5ebcb4ad"
        ],
        [
            "eapply an_toplevel_closed; eauto.",
            "VernacExtend",
            "0076b4d2bbeef0e24c1ada54e440b8251ca94078"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "have h1 : lc_tm b0 by apply AnnTyping_lc1 in Ty.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "apply An_Combine; auto.",
            "VernacExtend",
            "e47a811639bb15e16a6a13852d6b4ada17c9d5bc"
        ],
        [
            "all: try apply tm_subst_tm_co_lc_co; auto.",
            "VernacExtend",
            "13a14374aab46874c58aa4eecce185b6a64bed9d"
        ],
        [
            "apply Value_tm_subst_tm_tm; auto.",
            "VernacExtend",
            "794c40e8c70794680ec20185c020b1fb23a81dff"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "have h1 : lc_tm b0 by apply AnnTyping_lc1 in Ty.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "eapply An_Push; eauto.",
            "VernacExtend",
            "d8c7b7429e9b494b55437549d66b9d2eab179c96"
        ],
        [
            "eapply Value_tm_subst_tm_tm; eauto.",
            "VernacExtend",
            "a2f76041bd2863460aefff78d76f4561e49704d8"
        ],
        [
            "eapply (fourth ann_tm_substitution_mutual) in H0; eauto 2.",
            "VernacExtend",
            "30b9d14fc4e3e588640fab94ab0176a459450bcc"
        ],
        [
            "simpl in H0.",
            "VernacExtend",
            "a4a6a8421870dbf7255f8d031744eec32f12a941"
        ],
        [
            "eapply AnnDefEq_weaken_available; eauto.",
            "VernacExtend",
            "5277b809a8bf9b819dbb738ea30dc37d5ece9d6f"
        ],
        [
            "-",
            "VernacBullet",
            "581cab4bf49fa4b495e569bbda96fc8d28fddcc0"
        ],
        [
            "have h1 : lc_tm b0 by apply AnnTyping_lc1 in Ty.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "eapply An_CPush; eauto.",
            "VernacExtend",
            "b161a9640753b86c6ae45e05656b8434aa3a9a65"
        ],
        [
            "eapply Value_tm_subst_tm_tm; eauto.",
            "VernacExtend",
            "a2f76041bd2863460aefff78d76f4561e49704d8"
        ],
        [
            "eapply (fourth ann_tm_substitution_mutual) in H0; eauto 2.",
            "VernacExtend",
            "30b9d14fc4e3e588640fab94ab0176a459450bcc"
        ],
        [
            "simpl in H0.",
            "VernacExtend",
            "a4a6a8421870dbf7255f8d031744eec32f12a941"
        ],
        [
            "eapply AnnDefEq_weaken_available; eauto.",
            "VernacExtend",
            "5277b809a8bf9b819dbb738ea30dc37d5ece9d6f"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "Ltac resolve_open a := let s := fresh in match goal with [ x1 : ?b = open_tm_wrt_tm a (a_Var_f ?x) |- _ ] => destruct a; inversion x1; [unfold open_tm_wrt_tm in x1; simpl in x1; match goal with [ n:nat |- _ ] => destruct (lt_eq_lt_dec n 0) as [s | [| s]]; try destruct s; inversion x1 end | subst; unfold open_tm_wrt_tm in x1; unfold open_tm_wrt_tm; simpl in *; inversion x1; clear x1] end.",
            "VernacExtend",
            "c5dc98456f5f7a38cfcaba5b821e6eb9fe2a4062"
        ],
        [
            "Lemma An_AbsTerm_exists : \u2200 G x A (a a' : tm), x `notin` (fv_tm a \\u fv_tm a' \\u dom G) -> AnnTyping G A a_Star -> head_reduction ([(x, Tm A)] ++ G) (open_tm_wrt_tm a (a_Var_f x)) (open_tm_wrt_tm a' (a_Var_f x)) \u2192 head_reduction G (a_Abs Irrel A a) (a_Abs Irrel A a').",
            "VernacStartTheoremProof",
            "79b7edf26c6d70bcf174a3e3dce20fb1bc998e5b"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "pick fresh x0 and apply An_AbsTerm.",
            "VernacExtend",
            "9259d8def7b416245c0c4aa934c71bc4020f1538"
        ],
        [
            "auto.",
            "VernacExtend",
            "1f09da0addd069b3b65326f8c71967acc1e985af"
        ],
        [
            "have AC: (AnnCtx ([(x,Tm A)] ++ G)) by eauto with ctx_wff.",
            "VernacExtend",
            "406cde1174359c53bf162a2a18c4eede395555f9"
        ],
        [
            "intros.",
            "VernacExtend",
            "1b4df911c5412d25278e46f48402870ba987996b"
        ],
        [
            "rewrite (tm_subst_tm_tm_intro x); auto.",
            "VernacExtend",
            "9e2b92fba484264671c209dbe9b51f8bf106fcab"
        ],
        [
            "rewrite (tm_subst_tm_tm_intro x a'); auto.",
            "VernacExtend",
            "9e2b92fba484264671c209dbe9b51f8bf106fcab"
        ],
        [
            "move: weaken_head_reduction => h.",
            "VernacExtend",
            "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
        ],
        [
            "eapply h with (F:= [(x,Tm A)])(E := [(x0,Tm A)])(G:=G) in H1.",
            "VernacExtend",
            "ab530fae450931ee595a8370d8db916387de2ea6"
        ],
        [
            "eapply subst_head_reduction with (G := nil ++ [(x, Tm A)] ++ ([(x0,Tm A)] ++ G))(b := (a_Var_f x0)) (x:=x) in H1; eauto.",
            "VernacExtend",
            "bbca906e1d2475860f138bdbdcbca98707c8d413"
        ],
        [
            "simpl_env in H1.",
            "VernacExtend",
            "efd2b6949259054ddb98f6a875acf63dc7e760ce"
        ],
        [
            "auto.",
            "VernacExtend",
            "1f09da0addd069b3b65326f8c71967acc1e985af"
        ],
        [
            "econstructor; eauto with ctx_wff.",
            "VernacExtend",
            "ace6202c3d74165d36889ea64293b161387660fc"
        ],
        [
            "auto.",
            "VernacExtend",
            "1f09da0addd069b3b65326f8c71967acc1e985af"
        ],
        [
            "econstructor; eauto with ctx_wff.",
            "VernacExtend",
            "ace6202c3d74165d36889ea64293b161387660fc"
        ],
        [
            "eapply AnnTyping_weakening with (F:=nil); eauto 4.",
            "VernacExtend",
            "e94d6501b1ca70067ad94b147ffe98c96c41ab03"
        ],
        [
            "simpl.",
            "VernacExtend",
            "1b93169f4cf876d207c1fab22a2347202ab48d85"
        ],
        [
            "econstructor; eauto with ctx_wff.",
            "VernacExtend",
            "ace6202c3d74165d36889ea64293b161387660fc"
        ],
        [
            "Qed.",
            "VernacEndProof",
            "6eee6c55dea8e22a11abc36404343a43e520a888"
        ],
        [
            "End fc_head_reduction.",
            "VernacEndSegment",
            "7679f7da90294916c364312a88d1615658261d62"
        ]
    ],
    "proofs": [
        {
            "name": "An_AbsTerm_exists",
            "line_nb": 82,
            "steps": [
                {
                    "command": [
                        "intros.",
                        "VernacExtend",
                        "1b4df911c5412d25278e46f48402870ba987996b"
                    ]
                },
                {
                    "command": [
                        "pick fresh x0 and apply An_AbsTerm.",
                        "VernacExtend",
                        "9259d8def7b416245c0c4aa934c71bc4020f1538"
                    ]
                },
                {
                    "command": [
                        "auto.",
                        "VernacExtend",
                        "1f09da0addd069b3b65326f8c71967acc1e985af"
                    ]
                },
                {
                    "command": [
                        "have AC: (AnnCtx ([(x,Tm A)] ++ G)) by eauto with ctx_wff.",
                        "VernacExtend",
                        "406cde1174359c53bf162a2a18c4eede395555f9"
                    ]
                },
                {
                    "command": [
                        "intros.",
                        "VernacExtend",
                        "1b4df911c5412d25278e46f48402870ba987996b"
                    ]
                },
                {
                    "command": [
                        "rewrite (tm_subst_tm_tm_intro x); auto.",
                        "VernacExtend",
                        "9e2b92fba484264671c209dbe9b51f8bf106fcab"
                    ]
                },
                {
                    "command": [
                        "rewrite (tm_subst_tm_tm_intro x a'); auto.",
                        "VernacExtend",
                        "9e2b92fba484264671c209dbe9b51f8bf106fcab"
                    ]
                },
                {
                    "command": [
                        "move: weaken_head_reduction => h.",
                        "VernacExtend",
                        "b1b2cb7a3a617cba67460b4eca1f04de3c1cc716"
                    ]
                },
                {
                    "command": [
                        "eapply h with (F:= [(x,Tm A)])(E := [(x0,Tm A)])(G:=G) in H1.",
                        "VernacExtend",
                        "ab530fae450931ee595a8370d8db916387de2ea6"
                    ]
                },
                {
                    "command": [
                        "eapply subst_head_reduction with (G := nil ++ [(x, Tm A)] ++ ([(x0,Tm A)] ++ G))(b := (a_Var_f x0)) (x:=x) in H1; eauto.",
                        "VernacExtend",
                        "bbca906e1d2475860f138bdbdcbca98707c8d413"
                    ]
                },
                {
                    "command": [
                        "simpl_env in H1.",
                        "VernacExtend",
                        "efd2b6949259054ddb98f6a875acf63dc7e760ce"
                    ]
                },
                {
                    "command": [
                        "auto.",
                        "VernacExtend",
                        "1f09da0addd069b3b65326f8c71967acc1e985af"
                    ]
                },
                {
                    "command": [
                        "econstructor; eauto with ctx_wff.",
                        "VernacExtend",
                        "ace6202c3d74165d36889ea64293b161387660fc"
                    ]
                },
                {
                    "command": [
                        "auto.",
                        "VernacExtend",
                        "1f09da0addd069b3b65326f8c71967acc1e985af"
                    ]
                },
                {
                    "command": [
                        "econstructor; eauto with ctx_wff.",
                        "VernacExtend",
                        "ace6202c3d74165d36889ea64293b161387660fc"
                    ]
                },
                {
                    "command": [
                        "eapply AnnTyping_weakening with (F:=nil); eauto 4.",
                        "VernacExtend",
                        "e94d6501b1ca70067ad94b147ffe98c96c41ab03"
                    ]
                },
                {
                    "command": [
                        "simpl.",
                        "VernacExtend",
                        "1b93169f4cf876d207c1fab22a2347202ab48d85"
                    ]
                },
                {
                    "command": [
                        "econstructor; eauto with ctx_wff.",
                        "VernacExtend",
                        "ace6202c3d74165d36889ea64293b161387660fc"
                    ]
                },
                {
                    "command": [
                        "Qed.",
                        "VernacEndProof",
                        "6eee6c55dea8e22a11abc36404343a43e520a888"
                    ]
                }
            ]
        }
    ]
}